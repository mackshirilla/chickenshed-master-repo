{"mappings":"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","sources":["src/modules/dashboard/listDonations.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js"],"sourcesContent":["// src/pages/listDonations.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../api/apiConfig\";\n\ninterface SupportCampaign {\n  id: number;\n  Name: string;\n  Main_Image: string;\n  Subheading: string;\n  Short_Description: string;\n}\n\ninterface Donation {\n  id: number;\n  uuid: string;\n  created_at: number;\n  user_id: number;\n  support_campaign_id: number;\n  campaign_name: string;\n  status: string;\n  amount: number;\n  keep_anonymous: boolean;\n  customer_first_name?: string;\n  support_campaign: SupportCampaign;\n  donation_subscription?: {\n    id: number;\n    subscription_type: string;\n  };\n}\n\nexport async function fetchDonations(): Promise<Donation[]> {\n  try {\n    const getDonations = apiClient.get<Donation[]>(\"/dashboard/donations\");\n    const response = await getDonations.fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching donations:\", error);\n    throw error;\n  }\n}\n\nexport async function initializeDynamicDonationList(containerSelector: string) {\n  const list = new WFDynamicList<Donation>(containerSelector, {\n    rowSelector: \"#listDonationCard\",\n    loaderSelector: \"#listDonationloading\",\n    emptySelector: \"#listDonationEmpty\",\n  });\n\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({ display: \"flex\" });\n    return loaderElement;\n  });\n\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({ display: \"flex\" });\n    return emptyElement;\n  });\n\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const donationCard = new WFComponent(rowElement);\n\n    const campaignImage = new WFImage(\n      donationCard.getChildAsComponent(\"#cardCampaignImage\").getElement()\n    );\n    if (rowData.support_campaign?.Main_Image) {\n      campaignImage.setImage(rowData.support_campaign.Main_Image);\n    } else {\n      campaignImage.setImage(\n        \"https://cdn.prod.website-files.com/667f080f36260b9afbdc46b2/667f080f36260b9afbdc46be_placeholder.svg\"\n      );\n    }\n\n    const campaignName = donationCard.getChildAsComponent(\"#cardCampaignName\");\n    campaignName.setText(rowData.campaign_name);\n\n    const campaignSubtitle = donationCard.getChildAsComponent(\"#cardCampaignSubtitle\");\n    campaignSubtitle.setText(rowData.support_campaign?.Subheading || \"\");\n\n    const donationDate = donationCard.getChildAsComponent(\"#cardDonationDate\");\n    const date = new Date(rowData.created_at);\n    donationDate.setText(date.toLocaleDateString());\n\n    const donationAmount = donationCard.getChildAsComponent(\"#cardDonationAmount\");\n    donationAmount.setText(`$${rowData.amount.toFixed(2)}`);\n\n    const currentHref = donationCard.getElement().getAttribute(\"href\") || \"#\";\n    const separator = currentHref.includes(\"?\") ? \"&\" : \"?\";\n    const newHref = `${currentHref}${separator}donation=${rowData.uuid}`;\n    donationCard.getElement().setAttribute(\"href\", newHref);\n\n    rowElement.setStyle({ display: \"block\" });\n    return rowElement;\n  });\n\n  try {\n    list.changeLoadingStatus(true);\n    const donations = await fetchDonations();\n    donations.sort((a, b) => b.created_at - a.created_at);\n    list.setData(donations);\n    list.changeLoadingStatus(false);\n  } catch (error) {\n    console.error(\"Error loading donations:\", error);\n    list.setData([]);\n    list.changeLoadingStatus(false);\n  }\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));"],"names":[],"version":3,"file":"listDonations.d068a80f.js.map","sourceRoot":"../"}