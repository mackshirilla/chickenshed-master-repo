!function(e,t,n,o,r){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[o]&&i[o],a=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,n){if(!a[t]){if(!e[t]){var r="function"==typeof i[o]&&i[o];if(!n&&r)return r(t,!0);if(s)return s(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}u.resolve=function(n){var o=e[t][1][n];return null!=o?o:n},u.cache={};var p=a[t]=new c.Module(t);e[t][0].call(p.exports,u,p,p.exports,this)}return a[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=a,c.parent=s,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return i[o]}}),i[o]=c;for(var d=0;d<t.length;d++)c(t[d])}({fChp6:[function(e,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(n),o.export(n,"initializeSessionDetails",()=>l);var r=e("@xatom/core"),i=e("../../../api/apiConfig"),s=e("./components/listSessionFiles");async function a(e,t,n,o){try{let r={workshop_id:e,program_id:t,session_id:n};return o&&(r.subscription_id=o),await (0,i.apiClient).get(`/dashboard/registration/session/${n}`,{data:r}).fetch()}catch(t){let e=t?.response?.data?.message||t.message||"Unexpected error";alert(`Error: ${e}`),window.history.length>1?window.history.back():window.location.href="/dashboard/registrations";return}}async function l(){(0,s.initializeDynamicSessionFileList)("#filesList");let e=new URLSearchParams(window.location.search),t=e.get("workshop")||"none",n=e.get("program"),o=e.get("session"),i=e.get("subscription")||void 0;if(!n||!o){!function(e){let t=document.querySelector("#listStudentProfilesEmpty");t&&(t.innerHTML=`<div>${e}</div>`,t.setAttribute("style","display: flex;")),alert(`Error: ${e}`)}("Invalid access. Missing parameters.");return}let l=await a(t,n,o,i);if(!l)return;let{program:c,workshop:d,session:p,students:u,caregiver:m}=l,f=p.location_details;d?(new(0,r.WFComponent)("#workshopName").setText(d.Name),new(0,r.WFComponent)("#workshopShortDescription").setText(d.Short_description)):(new(0,r.WFComponent)("#workshopName").setText(c.name),new(0,r.WFComponent)("#workshopShortDescription").setText(c.Short_description)),function(e,t){new(0,r.WFComponent)("#sessionWeekday").setText(e.Weekday),new(0,r.WFComponent)("#sessionTime").setText(e.Time_block),new(0,r.WFComponent)("#sessionLocation").setText(t?.Name??"");let n=document.getElementById("sessionLocationMap");n&&t?.Map_embed?(n.style.display="",n.innerHTML=t.Map_embed,n.querySelectorAll("figure, iframe, figure > div").forEach(e=>{e.style.cssText="width:100%;height:100%;margin:0;padding:0;border:0;"})):n&&(n.style.display="none")}(p,f),function(e){let t=new r.WFDynamicList("#listStudentProfiles",{rowSelector:"#listStudentCard",loaderSelector:"#listStudentProfilesloading",emptySelector:"#listStudentProfilesEmpty"});t.rowRenderer(({rowData:e,rowElement:t})=>{let n=new r.WFComponent(t);new(0,r.WFComponent)(n.getChildAsComponent("#studentName").getElement()).setText(e.full_name),n.getChildAsComponent("img#listStudentCardImage")?.setAttribute("src",e.profile_pic||"https://cdn.prod.website-files.com/placeholder.svg");let o=n.getChildAsComponent("#studentLink");if(o){let t=new URL(o.getAttribute("href")||"#",window.location.origin);t.searchParams.set("id",e.student_id.toString()),o.setAttribute("href",t.toString())}return t}),t.setData(e)}(u),function(e,t,n,o,i){let s=document.querySelector("#programBreadcrumb");if(s){new(0,r.WFComponent)(s).setText(e.name);let t=new URL(s.href,window.location.origin);t.searchParams.set("program",e.id.toString()),o&&t.searchParams.set("subscription",o),s.href=t.toString()}let a=document.querySelector("#workshopBreadcrumb"),l=a?.previousElementSibling;if(a){if(t){a.style.display="",l&&(l.style.display=""),new(0,r.WFComponent)(a).setText(t.Name);let n=new URL(a.href,window.location.origin);n.searchParams.set("program",e.id.toString()),n.searchParams.set("workshop",t.id.toString()),o&&n.searchParams.set("subscription",o),a.href=n.toString()}else a.style.display="none",l&&(l.style.display="none")}let c=document.querySelector("#sessionBreadcrumb");c&&new(0,r.WFComponent)(c).setText(`${n.Weekday}, ${n.Time_block}`);let d=document.querySelector("#userBreadcumbList");i?d?.setAttribute("style","display: none;"):d?.setAttribute("style","display: flex;")}(c,d,p,i,m),function(e){let t=document.querySelector(e);t instanceof HTMLElement&&t.click()}(".success_trigger")}},{"@xatom/core":"65YBq","../../../api/apiConfig":"dUmIV","./components/listSessionFiles":"9Xmw3","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"9Xmw3":[function(e,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(n),o.export(n,"fetchSessionFiles",()=>s),o.export(n,"initializeDynamicSessionFileList",()=>a);var r=e("@xatom/core"),i=e("../../../../api/apiConfig");async function s(e){try{let t=(0,i.apiClient).get(`/student_files/session/${e}`);return await t.fetch()}catch(e){throw console.error("Error fetching files for student:",e),e}}async function a(e){let t=new URLSearchParams(window.location.search).get("session");if(!t){console.error("No student ID provided in URL");return}let n=new r.WFDynamicList(e,{rowSelector:"#fileCard",loaderSelector:"#filesloading",emptySelector:"#filesEmpty"});n.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),n.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),n.rowRenderer(({rowData:e,rowElement:t})=>{let n=new r.WFComponent(t);return n.setAttribute("href",e.file_url),n.getChildAsComponent("#fileName").setText(e.file_name),t.setStyle({display:"block"}),t});try{n.changeLoadingStatus(!0);let e=await s(t);e.sort((e,t)=>e.file_name.localeCompare(t.file_name)),n.setData(e),n.changeLoadingStatus(!1)}catch(e){console.error("Error loading files:",e),n.setData([]),n.changeLoadingStatus(!1)}}},{"@xatom/core":"65YBq","../../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=sessionDetails.60c9e3c9.js.map
