!function(e,t,r,n,i){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof o[n]&&o[n],a=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,r){if(!a[t]){if(!e[t]){var i="function"==typeof o[n]&&o[n];if(!r&&i)return i(t,!0);if(s)return s(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}p.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},p.cache={};var u=a[t]=new c.Module(t);e[t][0].call(u.exports,p,u,u.exports,this)}return a[t].exports;function p(e){var t=p.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=a,c.parent=s,c.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return o[n]}}),o[n]=c;for(var d=0;d<t.length;d++)c(t[d])}({"3Fz1E":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"makeTicketPurchase",()=>g);var i=e("@xatom/core"),o=e("./productionList"),s=e("./performanceList"),a=e("./ticketTiers"),l=e("./state/ticketPurchaseState"),c=e("@xatom/slider"),d=e("./components/sidebarIndicators"),u=e("../../utils/validationUtils"),p=e("../../utils/formUtils"),m=e("../../api/apiConfig"),f=e("./components/urlParamNavigator");let g=async()=>{let e=new c.WFSlider(".multi-step_form_slider");await (0,f.initializeStateFromUrlParams)(e),(0,d.initializeTicketSidebarIndicators)(),await (0,o.initializeProductionList)("#selectProductionList"),new i.WFFormComponent("#formStepOne").onFormSubmit(async(t,r)=>{r.preventDefault();let n=(0,l.getSelectedProduction)(),o=new i.WFComponent("#stepOneRequestingAnimation");if(!n||!n.id){console.error("No production selected.");let e=new i.WFComponent("#submitStepOneError");e.setText("Please select a production."),e.setStyle({display:"block"});return}console.log("Production selected:",n),new i.WFComponent("#submitStepOneError").setStyle({display:"none"}),o.setStyle({display:"block"});try{await (0,s.initializePerformanceList)("#selectPerformanceList"),(0,d.markTicketStepAsCompleted)(1),(0,d.setActiveTicketStep)(2),e.goNext()}catch(e){console.error("Error during step 1 processing:",e)}finally{o.setStyle({display:"none"})}}),new i.WFFormComponent("#formStepTwo").onFormSubmit(async(t,r)=>{r.preventDefault();let n=(0,l.getSelectedPerformance)(),o=new i.WFComponent("#stepTwoRequestingAnimation");if(!n||!n.id){console.error("No performance selected.");let e=new i.WFComponent("#submitStepTwoError");e.setText("Please select a performance."),e.setStyle({display:"block"});return}console.log("Performance selected:",n),new i.WFComponent("#submitStepTwoError").setStyle({display:"none"}),o.setStyle({display:"block"});try{(0,d.markTicketStepAsCompleted)(2),(0,d.setActiveTicketStep)(3),await (0,a.initializeTicketTiers)("#bundleList","#ticketTierList"),e.goNext()}catch(e){console.error("Error during step 2 processing:",e)}finally{o.setStyle({display:"none"})}});let t=new i.WFFormComponent("#formStepThree"),r=new i.WFComponent("#emailWrap"),n=new i.WFComponent("#firstNameInput"),g=new i.WFComponent("#lastNameInput"),h=new i.WFComponent("#emailInput"),y=new i.WFComponent("#customQuestionInput"),S=new i.WFComponent("#submitStepThreeError"),C=new i.WFComponent("#noTicketsError"),v=(e,t)=>{let r=()=>(0,p.toggleError)(t,"",!1);e.on("input",r),e.on("focus",r),e.on("change",r)};t.onFormSubmit(async(e,t)=>{t.preventDefault();let o=!0;if(S.setStyle({display:"none"}),"none"!==r.getElement().style.display){let e=new i.WFComponent("#firstNameInputError"),t=(0,p.createValidationFunction)(n,u.validateNotEmpty,"First name is required.")();(0,p.toggleError)(e,t,!!t),o=o&&!t,v(n,e);let r=new i.WFComponent("#lastNameInputError"),s=(0,p.createValidationFunction)(g,u.validateNotEmpty,"Last name is required.")();(0,p.toggleError)(r,s,!!s),o=o&&!s,v(g,r);let a=new i.WFComponent("#emailInputError"),l=(0,p.createValidationFunction)(h,u.validateEmail,"A valid email is required.")();(0,p.toggleError)(a,l,!!l),o=o&&!l,v(h,a)}let s=new i.WFComponent("#customQuestionInputError"),a=(0,p.createValidationFunction)(y,u.validateNotEmpty,"This field is required.")();(0,p.toggleError)(s,a,!!a),o=o&&!a,v(y,s);let c=(0,l.getSelectedBundles)(),f=(0,l.getSelectedTickets)();if(0===c.length&&0===f.length?((0,p.toggleError)(C,"Please select at least one bundle or ticket.",!0),o=!1):(0,p.toggleError)(C,"",!1),!o){console.error("Form validation failed."),S.setText("Please correct the highlighted errors."),S.setStyle({display:"block"});return}console.log("Final form is valid, proceeding with submission...");let x=new i.WFComponent("#stepThreeRequestingAnimation");x.setStyle({display:"block"});try{let{selectedBundles:e,selectedTickets:t,email:r,firstName:n,lastName:i,customQuestion:o,assistanceNeeded:s,assistanceMessage:a,selectedProductionId:c,selectedPerformanceId:u}=(0,l.loadTicketPurchaseState)(),p=`${window.location.origin}/purchase-tickets?production=${c}&performance=${u}`,f=await (0,m.apiClient).post("/tickets/begin_checkout",{data:{selectedBundles:e,selectedTickets:t,email:r,firstName:n,lastName:i,customQuestion:o,assistanceNeeded:s,assistanceMessage:a,selectedProductionId:c,selectedPerformanceId:u,cancel_url:p}}).fetch();console.log("Checkout response:",f),(0,d.markTicketStepAsCompleted)(3),window.location.href=f.checkout_url||"/payment"}catch(e){console.error("Error during final step processing:",e),S.setText("An error occurred during checkout. Please try again."),S.setStyle({display:"block"})}finally{x.setStyle({display:"none"})}}),new i.WFComponent("#backStepThree").on("click",()=>{(0,l.clearSelectedBundles)(),(0,l.clearSelectedTickets)(),e.goPrevious(),(0,d.unsetActiveTicketStep)(3),(0,d.unmarkTicketStepAsCompleted)(2),(0,d.setActiveTicketStep)(2)}),new i.WFComponent("#backStepTwo").on("click",()=>{(0,l.clearSelectedPerformance)(),e.goPrevious(),(0,d.unsetActiveTicketStep)(2),(0,d.unmarkTicketStepAsCompleted)(1),(0,d.setActiveTicketStep)(1)}),(0,d.setActiveTicketStep)(1)}},{"@xatom/core":"65YBq","./productionList":"6zyyu","./performanceList":"h28oA","./ticketTiers":"bBABM","./state/ticketPurchaseState":"8lBgN","@xatom/slider":"ejxGx","./components/sidebarIndicators":"i8KxD","../../utils/validationUtils":"gu2z7","../../utils/formUtils":"gepHz","../../api/apiConfig":"dUmIV","./components/urlParamNavigator":"4zIDj","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"6zyyu":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeProductionList",()=>c);var i=e("@xatom/core"),o=e("../../api/productions"),s=e("./state/ticketPurchaseState");let a=null,l=null,c=async e=>{let t=document.querySelector(e);if(!t)return console.error("Production list container not found."),[];l||(l=t.cloneNode(!0)),t.innerHTML="",t.appendChild(l.cloneNode(!0));let r=new i.WFDynamicList(e,{rowSelector:"#cardSelectProduction",loaderSelector:"#productionListLoading",emptySelector:"#productionListEmpty"});r.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),r.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),r.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let n=new i.WFComponent(t),o=n.getChildAsComponent("#cardProductionTitle"),l=n.getChildAsComponent("#cardProductionDescription"),c=n.getChildAsComponent("#cardProductionAges"),d=n.getChildAsComponent("#cardProductionImage"),u=n.getChildAsComponent(".input_card_input"),p=n.getChildAsComponent("label");if(!o||!l||!c||!u||!d||!p){console.error("Production elements not found.");return}if(e&&e.fieldData){let n=`productionInput-${r}`;u.setAttribute("id",n),u.setAttribute("value",e.id),p.setAttribute("for",n),o.setText(e.fieldData.name),l.setText(e.fieldData["short-description"]),c.setText(e.fieldData["age-description"]),e.fieldData["main-image"]?.url?(d.setAttribute("src",e.fieldData["main-image"].url),d.setAttribute("alt",e.fieldData["main-image"].alt||"Production Image")):console.warn(`Production ID ${e.id} does not have a main image.`),u.on("change",()=>{a=u.getElement().value,(0,s.saveSelectedProduction)({id:e.id,name:e.fieldData.name,description:e.fieldData["short-description"],imageUrl:e.fieldData["main-image"].url}),console.log("Selected Production ID:",a)}),t.setStyle({display:"flex"})}else console.error("Incomplete production data:",e);return t});try{r.changeLoadingStatus(!0);let e=await (0,o.fetchProductions)();return console.log("Fetched productions:",e),e.length>0?r.setData(e):r.setData([]),r.changeLoadingStatus(!1),e}catch(e){return console.error("Error loading productions:",e),r.setData([]),r.changeLoadingStatus(!1),[]}}},{"@xatom/core":"65YBq","../../api/productions":"lptwN","./state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],lptwN:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fetchProductions",()=>o);var i=e("./apiConfig");let o=async()=>{try{return(await (0,i.apiClient).get("/tickets/productions").fetch()).productions}catch(e){throw console.error("Error fetching productions:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"8lBgN":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"loadTicketPurchaseState",()=>s),n.export(r,"saveTicketPurchaseState",()=>a),n.export(r,"clearTicketPurchaseState",()=>l),n.export(r,"getSelectedProduction",()=>c),n.export(r,"saveSelectedProduction",()=>d),n.export(r,"getSelectedPerformance",()=>u),n.export(r,"saveSelectedPerformance",()=>p),n.export(r,"getSelectedBundles",()=>m),n.export(r,"saveSelectedBundle",()=>f),n.export(r,"removeSelectedBundle",()=>g),n.export(r,"removeBundleRequiredTicketsIfNeeded",()=>h),n.export(r,"getSelectedTickets",()=>y),n.export(r,"saveSelectedTicket",()=>S),n.export(r,"removeSelectedTicket",()=>C),n.export(r,"getCustomQuestion",()=>v),n.export(r,"saveCustomQuestion",()=>x),n.export(r,"getAssistanceNeeded",()=>k),n.export(r,"saveAssistanceNeeded",()=>b),n.export(r,"getAssistanceMessage",()=>T),n.export(r,"saveAssistanceMessage",()=>w),n.export(r,"saveUserDetails",()=>P),n.export(r,"clearSelectedPerformance",()=>A),n.export(r,"clearSelectedBundles",()=>F),n.export(r,"clearSelectedTickets",()=>I);let i="ticketPurchaseState",o=e=>"number"==typeof e?e:0,s=()=>{let e=localStorage.getItem(i);return e?JSON.parse(e):{}},a=e=>{let t={...s(),...e};localStorage.setItem(i,JSON.stringify(t))},l=()=>{localStorage.removeItem(i)},c=()=>{let e=s();return{id:e.selectedProductionId||null,name:e.selectedProductionName||null,description:e.selectedProductionDescription||null,imageUrl:e.selectedProductionImageUrl||null}},d=e=>{a({selectedProductionId:e.id,selectedProductionName:e.name,selectedProductionDescription:e.description,selectedProductionImageUrl:e.imageUrl})},u=()=>{let e=s();return{id:e.selectedPerformanceId||null,name:e.selectedPerformanceName||null,dateTime:e.selectedPerformanceDateTime||null,imageUrl:e.selectedPerformanceImageUrl||null,location:e.selectedPerformanceLocation||null}},p=e=>{a({selectedPerformanceId:e.id,selectedPerformanceName:e.name,selectedPerformanceDateTime:e.dateTime,selectedPerformanceDescription:e.description,selectedPerformanceImageUrl:e.imageUrl,selectedPerformanceLocation:e.location})},m=()=>s().selectedBundles||[],f=(e,t)=>{let r=m(),n=r.find(t=>t.bundle_id===e);if(n){if(t>0)n.quantity=t;else{let e=r.indexOf(n);r.splice(e,1)}}else t>0&&r.push({bundle_id:e,quantity:t});a({selectedBundles:r})},g=e=>{a({selectedBundles:m().filter(t=>t.bundle_id!==e)}),h()},h=()=>{0>=m().reduce((e,t)=>e+o(t.quantity),0)&&a({selectedTickets:y().filter(e=>!e.bundle_required)})},y=()=>s().selectedTickets||[],S=(e,t,r)=>{let n=y(),i=n.find(t=>t.ticket_tier_id===e);if(i){if(t>0)i.quantity=t;else{let e=n.indexOf(i);n.splice(e,1)}}else t>0&&n.push({ticket_tier_id:e,quantity:t,bundle_required:r});a({selectedTickets:n})},C=e=>{a({selectedTickets:y().filter(t=>t.ticket_tier_id!==e)})},v=()=>s().customQuestion||null,x=e=>{a({customQuestion:e})},k=()=>s().assistanceNeeded||!1,b=e=>{a({assistanceNeeded:e})},T=()=>s().assistanceMessage||"",w=e=>{a({assistanceMessage:e})},P=e=>{a(e)},A=()=>{a({selectedPerformanceId:void 0,selectedPerformanceName:void 0,selectedPerformanceDateTime:void 0,selectedPerformanceDescription:void 0,selectedPerformanceImageUrl:void 0,selectedPerformanceLocation:void 0})},F=()=>{a({selectedBundles:[]})},I=()=>{a({selectedTickets:[]})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],h28oA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializePerformanceList",()=>d);var i=e("@xatom/core"),o=e("../../api/performances"),s=e("./state/ticketPurchaseState"),a=e("./components/performanceFilter");let l=null,c=null,d=async e=>{let t=document.querySelector(e);if(!t)return console.error("Performance list container not found."),[];c||(c=t.cloneNode(!0)),t.innerHTML="",t.appendChild(c.cloneNode(!0));let r=new i.WFDynamicList(e,{rowSelector:"#cardSelectPerformance",loaderSelector:"#performanceListLoading",emptySelector:"#performanceListEmpty"});r.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),r.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),r.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let n=new i.WFComponent(t),o=n.getChildAsComponent(".production_date_wrapper"),a=o?.getChildAsComponent(".u-text-h4"),c=o?.getChildAsComponent(".production_date_month"),d=o?.getChildAsComponent(".input_card_description"),u=n.getChildAsComponent("#cardProductionTitle"),p=n.getChildAsComponent("#cardPerformanceTitle"),m=n.getChildAsComponent("#cardPerformanceProductionTitle"),f=n.getChildAsComponent("#cardPerformanceDescription"),g=n.getChildAsComponent("#cardImage"),h=n.getChildAsComponent(".input_card_input"),y=n.getChildAsComponent("label"),S=n.getChildAsComponent("#cardPerformanceLocation");if(!a||!c||!d||!u||!p||!m||!f||!h||!g||!y||!S){console.error("Performance elements not found.");return}if(e&&e.fieldData){let n=`performanceInput-${r}`;h.setAttribute("id",n),h.setAttribute("value",e.id),y.setAttribute("for",n);let i=new Date(e.fieldData["date-time"]);a.setText(i.toLocaleString("en-US",{day:"numeric",timeZone:"America/New_York"})),c.setText(i.toLocaleString("en-US",{month:"short",timeZone:"America/New_York"})),d.setText(i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"})),u.setText(i.toLocaleString("en-US",{weekday:"long",timeZone:"America/New_York"})),p.setText(e.fieldData["displayed-name"]);let o=(0,s.getSelectedProduction)();m.setText(o?.name||"Unknown Production"),f.setText(e.fieldData["short-description"]),e.fieldData["main-image"]?.url?(g.setAttribute("src",e.fieldData["main-image"].url),g.setAttribute("alt",e.fieldData["main-image"].alt||"Performance Image")):console.warn(`Performance ID ${e.id} does not have a main image.`),S.setText(e.location_name||"Unknown"),h.on("change",()=>{l=h.getElement().value,(0,s.saveSelectedPerformance)({id:e.id,name:e.fieldData["displayed-name"],dateTime:e.fieldData["date-time"],description:e.fieldData["short-description"],imageUrl:e.fieldData["main-image"].url,location:e.location_name}),console.log("Selected Performance ID:",l)}),t.setStyle({display:"flex"})}else console.error("Incomplete performance data:",e);return t});try{r.changeLoadingStatus(!0);let e=(0,s.getSelectedProduction)(),t=e?.id;if(!t)return console.error("No production selected, cannot fetch performances."),r.changeLoadingStatus(!1),[];let n=await (0,o.fetchPerformances)(t);return n=n.sort((e,t)=>{let r=new Date(e.fieldData["date-time"]),n=new Date(t.fieldData["date-time"]);return r.getTime()-n.getTime()}),console.log("Fetched and sorted performances:",n),n&&n.length>0?(r.setData(n),(0,a.initializePerformanceFilter)()):r.setData([]),r.changeLoadingStatus(!1),n}catch(e){return console.error("Error loading performances:",e),r.setData([]),r.changeLoadingStatus(!1),[]}}},{"@xatom/core":"65YBq","../../api/performances":"kkvM9","./state/ticketPurchaseState":"8lBgN","./components/performanceFilter":"4sx37","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],kkvM9:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fetchPerformances",()=>o);var i=e("./apiConfig");let o=async e=>{try{return(await (0,i.apiClient).post("/tickets/performances",{data:{production_id:e}}).fetch()).performances}catch(e){throw console.error("Error fetching performances:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"4sx37":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializePerformanceFilter",()=>i);let i=()=>{let e=document.getElementById("locationFilter"),t=document.getElementById("monthFilter");e&&e.addEventListener("change",()=>{o()}),t&&t.addEventListener("change",()=>{o()})},o=()=>{let e=document.getElementById("locationFilter"),t=document.getElementById("monthFilter");s(e?.value||"N/A",t?.value||"N/A")},s=(e,t)=>{let r=document.querySelectorAll(".input_card_wrap"),n=!1;r.forEach(r=>{let i=r.querySelector("#cardPerformanceLocation"),o=i?.textContent||"",s=r.querySelector(".production_date_month"),a=s?.textContent||"",l="N/A"===t||a.toUpperCase()===t;("N/A"===e||o===e)&&l?(r.style.display="flex",n=!0):r.style.display="none"});let i=document.getElementById("filterListEmpty");i&&(i.style.display=n?"none":"flex")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bBABM:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeTicketTiers",()=>p);var i=e("../../api/ticketTiersAPI"),o=e("./components/ticketTierListRender"),s=e("./state/ticketPurchaseState"),a=e("@xatom/core"),l=e("./components/selectedPerformanceUI"),c=e("./components/customQuestionUI"),d=e("./components/assistanceInputUI"),u=e("./components/userDetailsUI");let p=async(e,t)=>{let r=(0,s.getSelectedPerformance)();if(!r||!r.id){console.error("No performance selected.");return}try{let{bundles_offered:n,tickets_offered:s,performance_details:p}=await (0,i.fetchTicketTiers)(r.id);(0,l.updateSelectedPerformanceUI)(),(0,u.initializeUserDetails)();let m=new a.WFComponent(e);m&&m.setStyle({display:"block"});let f=new a.WFComponent(t);f&&f.setStyle({display:"block"});let g=!1;n.length>0?((0,o.renderBundles)(n,e),g=!0):m&&m.setStyle({display:"none"}),s.length>0?((0,o.renderTicketTiers)(s,t),g=!0):f&&f.setStyle({display:"none"});let h=new a.WFComponent("#noTicketsAvailable");h&&(g?h.setStyle({display:"none"}):h.setStyle({display:"flex"}));let y=p.fieldData["custom-question"];(0,c.updateCustomQuestion)(y),(0,d.initializeAssistanceInput)()}catch(e){console.error("Error fetching ticket tiers:",e)}}},{"../../api/ticketTiersAPI":"iApBh","./components/ticketTierListRender":"64cXF","./state/ticketPurchaseState":"8lBgN","@xatom/core":"65YBq","./components/selectedPerformanceUI":"ldUYM","./components/customQuestionUI":"dxOwo","./components/assistanceInputUI":"2EvCq","./components/userDetailsUI":"6alDg","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],iApBh:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fetchTicketTiers",()=>o);var i=e("./apiConfig");let o=async e=>{try{return await (0,i.apiClient).post("/tickets/ticket_tiers",{data:{selectedPerformanceId:e}}).fetch()}catch(e){throw console.error("Error fetching ticket tiers:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"64cXF":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"renderBundles",()=>i.renderBundles),n.export(r,"renderTicketTiers",()=>o.renderTicketTiers);var i=e("./bundleRenderer"),o=e("./ticketTierRenderer")},{"./bundleRenderer":"2Fs2e","./ticketTierRenderer":"bIOFG","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"2Fs2e":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"renderBundles",()=>d);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState"),s=e("../state/bundleStateUpdater"),a=e("./ticketTierRenderer"),l=e("../../../utils/formUtils");let c=null,d=(e,t)=>{let r=document.querySelector(t);if(!r){console.error("Bundle list container not found.");return}c||(c=r.cloneNode(!0)),r.innerHTML="",r.appendChild(c.cloneNode(!0));let n=()=>{let e=new i.WFComponent("#noTicketsError");(0,l.toggleError)(e,"",!1)},d=new i.WFDynamicList(t,{rowSelector:"#bundleCard",loaderSelector:"#bundleListLoading",emptySelector:"#bundleListEmpty"});d.loaderRenderer(e=>(e.getElement().style.display="flex",e)),d.emptyRenderer(e=>(e.getElement().style.display="flex",e)),d.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let l=new i.WFComponent(t),c=l.getChildAsComponent("#bundleName"),d=l.getChildAsComponent("#bundlePrice"),u=l.getChildAsComponent("#bundleSoldOut"),p=l.getChildAsComponent("#bundleDescription"),m=l.getChildAsComponent("#bundleQuantityInput"),f=l.getChildAsComponent("#bundleQuantityIncrease"),g=l.getChildAsComponent("#bundleQuantityDecrease"),h=l.getChildAsComponent(".maximum_alert"),y=l.getChildAsComponent(".number_input_wrapper");if(!c||!d||!u||!p||!m||!f||!g||!h||!y){console.error("Bundle elements not found.");return}c.setText(e.fieldData["displayed-name"]),d.setText(`${e.price}`),p.setText(e.fieldData["short-description"]),m.setAttribute("max",String(e.quantity)),m.setAttribute("value","0");let S=()=>{let t=Number(m.getElement().value),r=h.getElement();t>=e.quantity?(h.setText("You have reached the maximum available quantity."),r.style.display="block"):r.style.display="none"};return f.on("click",()=>{let t=m.getElement(),r=Number(t.value);r<e.quantity&&(r++,t.value=String(r),(0,o.saveSelectedBundle)(e.id,r),(0,s.updateTicketTierButtons)(),n()),S(),(0,a.revalidateTicketTierQuantities)()}),g.on("click",()=>{let t=m.getElement(),r=Number(t.value);r>0&&(r--,t.value=String(r),r>0?((0,o.saveSelectedBundle)(e.id,r),n()):(0,o.removeSelectedBundle)(e.id),(0,s.updateTicketTierButtons)()),S(),(0,s.resetTicketQuantitiesIfNeeded)(),(0,a.revalidateTicketTierQuantities)()}),m.on("input",()=>{let t=m.getElement();Number(t.value)>e.quantity&&(t.value=String(e.quantity),S()),(0,a.revalidateTicketTierQuantities)(),n()}),e.quantity<=0?(u.getElement().style.display="block",d.getElement().style.display="none",y.addCssClass("is-disabled")):(u.getElement().style.display="none",d.getElement().style.display="block",y.removeCssClass("is-disabled")),t.setStyle({display:"flex"}),t}),d.setData(e)}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","../state/bundleStateUpdater":"by5b6","./ticketTierRenderer":"bIOFG","../../../utils/formUtils":"gepHz","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],by5b6:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"resetTicketQuantitiesIfNeeded",()=>s),n.export(r,"updateTicketTierButtons",()=>a);var i=e("../state/ticketPurchaseState");let o=e=>"number"==typeof e?e:0,s=()=>{let e=(0,i.getSelectedBundles)().reduce((e,t)=>e+o(t.quantity),0);(0,i.getSelectedTickets)().forEach(t=>{let r=document.querySelector(`#ticketTierCard[data-id="${t.ticket_tier_id}"] #ticketTierQuantityInput`);r&&t.bundle_required&&e<=0&&(r.value="0",(0,i.removeSelectedTicket)(t.ticket_tier_id))}),console.log("Updated selectedTickets:",(0,i.getSelectedTickets)())},a=()=>{let e=(0,i.getSelectedBundles)().reduce((e,t)=>e+o(t.quantity),0),t=document.querySelectorAll("#ticketTierQuantityInput"),r=document.querySelectorAll("#ticketTierQuantityIncrease");t.forEach(t=>{let r=t.closest("#ticketTierCard");r?.getAttribute("data-requires-bundle")==="true"&&e<=0?(t.setAttribute("disabled","true"),t.value="0"):t.removeAttribute("disabled")}),r.forEach(t=>{let r=t.closest("#ticketTierCard");r?.getAttribute("data-requires-bundle")==="true"&&e<=0?t.setAttribute("disabled","true"):t.removeAttribute("disabled")}),s()}},{"../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bIOFG:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"revalidateTicketTierQuantities",()=>d),n.export(r,"renderTicketTiers",()=>u);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState"),s=e("../../../utils/formUtils");let a=e=>"number"==typeof e?e:0,l=()=>{let e=new i.WFComponent("#noTicketsError");(0,s.toggleError)(e,"",!1)},c=null,d=()=>{document.querySelectorAll("[data-requires-bundle='true']").forEach(e=>{let t=new i.WFComponent(e.querySelector(".maximum_alert")),r=new i.WFComponent(e.querySelector("#ticketTierQuantityInput"));0>=(0,o.getSelectedBundles)().reduce((e,t)=>e+a(t.quantity),0)?(r.getElement().value="0",t.setText("This item requires a ticket bundle purchase. Please add a ticket bundle from the options above."),t.getElement().style.display="block"):t.getElement().style.display="none"})},u=(e,t)=>{let r=document.querySelector(t);if(!r){console.error("Ticket tier list container not found.");return}c||(c=r.cloneNode(!0)),r.innerHTML="",r.appendChild(c.cloneNode(!0));let n=new i.WFDynamicList(t,{rowSelector:"#ticketTierCard",loaderSelector:"#ticketTierListLoading",emptySelector:"#ticketTierListEmpty"});n.loaderRenderer(e=>(e.getElement().style.display="flex",e)),n.emptyRenderer(e=>(e.getElement().style.display="flex",e)),n.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let n=new i.WFComponent(t);!0===e.fieldData["requires-bundle-purchase"]?t.setAttribute("data-requires-bundle","true"):t.setAttribute("data-requires-bundle","false");let s=n.getChildAsComponent("#ticketTierName"),c=n.getChildAsComponent("#ticketTierPrice"),u=n.getChildAsComponent("#ticketTierSoldOut"),p=n.getChildAsComponent("#ticketTierDescription"),m=n.getChildAsComponent("#ticketTierQuantityInput"),f=n.getChildAsComponent("#ticketTierQuantityIncrease"),g=n.getChildAsComponent("#ticketTierQuantityDecrease"),h=n.getChildAsComponent(".maximum_alert"),y=n.getChildAsComponent(".number_input_wrapper");if(!s||!c||!u||!p||!m||!f||!g||!h||!y){console.error("Ticket tier elements not found.");return}let S=e.fieldData["displayed-name"]||"Unknown Ticket Tier",C=e.price?`${e.price.toString()}`:"N/A",v=e.fieldData["short-description"]||"";s.setText(S),c.setText(C),p.setText(v),m.setAttribute("max",String(e.quantity||0)),m.setAttribute("value","0");let x=e=>{h.setText(e),h.getElement().style.display="block"};return f.on("click",()=>{let t=m.getElement(),r=Number(t.value);if(h.getElement().style.display="none",e.fieldData["requires-bundle-purchase"]&&0>=(0,o.getSelectedBundles)().reduce((e,t)=>e+a(t.quantity),0)){x("This item requires a ticket bundle purchase. Please add a ticket bundle from the options above.");return}r<e.quantity?(r++,t.value=String(r),(0,o.saveSelectedTicket)(e.id,r,e.fieldData["requires-bundle-purchase"]),d(),l()):x("You have reached the maximum available quantity.")}),g.on("click",()=>{let t=m.getElement(),r=Number(t.value);r>0&&(r--,t.value=String(r),r>0?((0,o.saveSelectedTicket)(e.id,r,e.fieldData["requires-bundle-purchase"]),l()):(0,o.removeSelectedTicket)(e.id),d())}),m.on("input",()=>{let t=m.getElement(),r=Number(t.value);r>e.quantity?(t.value=String(e.quantity),x("You have reached the maximum available quantity.")):e.fieldData["requires-bundle-purchase"]&&r>0&&0>=(0,o.getSelectedBundles)().reduce((e,t)=>e+a(t.quantity),0)?(t.value="0",x("This item requires a ticket bundle purchase. Please add a ticket bundle from the options above.")):h.getElement().style.display="none",l()}),e.quantity<=0?(u.getElement().style.display="block",c.getElement().style.display="none",y.addCssClass("is-disabled")):(u.getElement().style.display="none",c.getElement().style.display="block",y.removeCssClass("is-disabled")),t.setStyle({display:"flex"}),t}),n.setData(e)}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","../../../utils/formUtils":"gepHz","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gepHz:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"toggleError",()=>l),n.export(r,"setupValidation",()=>c),n.export(r,"createValidationFunction",()=>d),n.export(r,"createCheckboxValidationFunction",()=>u),n.export(r,"setupCheckboxValidation",()=>p),n.export(r,"validateSelectedSessions",()=>m),n.export(r,"setProfilePicUrl",()=>f),n.export(r,"setupFileUpload",()=>g),n.export(r,"formatPhoneNumber",()=>h);var i=e("@xatom/core"),o=e("@xatom/image"),s=e("../api/apiConfig"),a=e("../auth/authConfig");function l(e,t,r){e.updateTextViaAttrVar({text:r?t:""}),e.setStyle({display:r?"flex":"none"})}function c(e,t,r,n){let i=()=>{let e=r();l(t,e,!!e),n&&""===e&&l(n,"",!1)};e.on("input",i),e.on("blur",i),e.on("change",i)}function d(e,t,r){return()=>t(e.getElement().value)?"":r}function u(e,t){return()=>e.getElement().checked?"":t}function p(e,t,r){let n=u(e,r);c(e,t,n)}function m(e,t,r){let n=e.length>0&&e.some(e=>e.studentIds.length>0);return n?l(t,"",!1):l(t,r,!0),n}function f(e){let t=(0,a.userAuth).getUser();t&&t.profile&&(t.profile.profile_pic=t.profile.profile_pic||{url:""},t.profile.profile_pic.url=e,(0,a.userAuth).setUser(t),localStorage.setItem("auth_user",JSON.stringify(t)))}function g(e,t,r,n){let a=new o.WFImage("#profilePictureImage"),c=new i.WFComponent("#uploadAnimation"),d=new i.WFComponent(".drop-zone"),u=0;return new Promise(i=>{let o=o=>{if(!["image/jpeg","image/jpg"].includes(o.type)&&!/\.(jpg|jpeg)$/i.test(o.name)){l(t,"Only JPEG images are allowed.",!0),e.getElement().value="";return}if(o.size>2097152){l(t,"File size must be less than 2 MB.",!0),e.getElement().value="";return}c.setStyle({display:"flex"}),t.setStyle({display:"none"}),r.setStyle({display:"none"});let p=new FileReader;p.onload=e=>{let t=e.target?.result;a.setImage(t),d.setStyle({display:"none"})},p.readAsDataURL(o);let m=new FormData;m.append("profile_picture",o);let g=localStorage.getItem("current_student");if(g){let e=JSON.parse(g);m.append("student_profile_id",e.id.toString())}let h=(0,s.apiClient).post(n,{data:m});h.onData(n=>{if("success"===n.status){let e=n.url.profile_pic.url;f(e),a.setImage(e),localStorage.setItem("image_upload",e),r.setStyle({display:"flex"}),c.setStyle({display:"none"}),i(e)}else l(t,"Failed to upload profile picture.",!0),c.setStyle({display:"none"}),d.setStyle({display:"none"}),u=0,e.getElement().value=""}),h.onError(r=>{let n="An error occurred during image upload.";r.response&&r.response.data?n=r.response.data.message||n:r.message&&(n=r.message),l(t,n,!0),c.setStyle({display:"none"}),d.setStyle({display:"none"}),u=0,e.getElement().value=""}),h.fetch()};e.on("change",()=>{let t=e.getElement().files?.[0];t&&o(t)});let p=document.body;p.addEventListener("dragenter",e=>{e.preventDefault(),1==++u&&d.setStyle({display:"flex"})}),p.addEventListener("dragleave",()=>{--u<=0&&(d.setStyle({display:"none"}),u=0)}),p.addEventListener("dragover",e=>{e.preventDefault()}),p.addEventListener("drop",e=>{e.preventDefault();let t=e.dataTransfer?.files;t?.length&&o(t[0]),d.setStyle({display:"none"}),u=0})})}let h=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:t.length<=10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../api/apiConfig":"dUmIV","../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var n,i=e("d023971cccd819e3"),o={};Object.defineProperty(o,"WFImage",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});class s extends i.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}n=t.exports,Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{d023971cccd819e3:"65YBq"}],ldUYM:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"updateSelectedPerformanceUI",()=>s);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState");let s=()=>{let e=(0,o.getSelectedPerformance)(),t=(0,o.getSelectedProduction)();if(!e||!e.id){console.error("No performance selected.");return}let r=new i.WFComponent("#selectedPerformanceDate"),n=new i.WFComponent("#selectedPerformanceMonth"),s=new i.WFComponent("#selectedWeekday"),a=new i.WFComponent("#selectedTime"),l=new i.WFComponent("#selectedPerformanceTitle"),c=new i.WFComponent("#selectedPerformanceProductionTitle"),d=new i.WFComponent("#selectedPerformanceDescription"),u=new i.WFComponent("#selectedImage"),p=new i.WFComponent("#selectedPerformanceLocation"),m=new Date(e.dateTime);r.setText(m.getDate().toString()),n.setText(m.toLocaleString("en-US",{month:"short"})),s.setText(m.toLocaleString("en-US",{weekday:"long"})),a.setText(m.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})),l.setText(e.name),c.setText(t.name),d.setText(t.description),e.imageUrl&&(u.setAttribute("src",e.imageUrl),u.setAttribute("alt",e.name)),e.location?p.setText(e.location):p.setText("Location not specified")}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],dxOwo:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"updateCustomQuestion",()=>s);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState");let s=e=>{let t=new i.WFComponent("label[for='customQuestionInput']"),r=new i.WFComponent("#customQuestionInput");t&&r&&(t.setText(e||"No custom question available."),r.on("input",()=>{let e=r.getElement().value;(0,o.saveCustomQuestion)(e)}))}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"2EvCq":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeAssistanceInput",()=>s);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState");let s=()=>{let e=new i.WFComponent("#assistanceInput"),t=new i.WFComponent("#hiddenAssistanceWrapper"),r=new i.WFComponent("#assistanceMessageInput");if(!e||!t||!r){console.error("Assistance input or hidden wrapper elements not found.");return}let n=e.getElement().checked;if((0,o.saveAssistanceNeeded)(n),n){t.removeCssClass("g-hide");let e=r.getElement().value;(0,o.saveAssistanceMessage)(e)}else t.addCssClass("g-hide"),(0,o.saveAssistanceMessage)("");e.on("change",()=>{let n=e.getElement().checked;n?t.removeCssClass("g-hide"):(t.addCssClass("g-hide"),r.getElement().value="",(0,o.saveAssistanceMessage)("")),(0,o.saveAssistanceNeeded)(n)}),r.on("input",()=>{let e=r.getElement().value;(0,o.saveAssistanceMessage)(e)})}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"6alDg":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeUserDetails",()=>a);var i=e("@xatom/core"),o=e("../../../auth/authConfig"),s=e("../state/ticketPurchaseState");let a=()=>{let e=new i.WFComponent("#emailWrap"),t=new i.WFComponent("#firstNameInput"),r=new i.WFComponent("#lastNameInput"),n=new i.WFComponent("#emailInput"),a=(0,o.authManager).getUserAuth().getUser();a&&a.email?(e.setStyle({display:"none"}),(0,s.saveUserDetails)({firstName:a.profile?.first_name||"",lastName:a.profile?.last_name||"",email:a.email})):(e.setStyle({display:"grid"}),t.on("input",()=>{let e=t.getElement().value;(0,s.saveUserDetails)({firstName:e})}),r.on("input",()=>{let e=r.getElement().value;(0,s.saveUserDetails)({lastName:e})}),n.on("input",()=>{let e=n.getElement().value;(0,s.saveUserDetails)({email:e})}))}},{"@xatom/core":"65YBq","../../../auth/authConfig":"dHwPR","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],ejxGx:[function(e,t,r){var n,i=e("1a87f3bc23b90fa3"),o=e("37b5fd8189a9f4c7"),s={};Object.defineProperty(s,"WFSlider",{get:()=>l,set:void 0,enumerable:!0,configurable:!0});let a=window.jQuery;class l extends i.WFComponent{_sliderConfig={};_slides=[];_defaultSwipeDisabled=!1;_index=0;_listeners=new Map;constructor(e){super(e),this.init()}init(){this._defaultSwipeDisabled="true"===this.getAttribute("data-disable-swipe"),this._sliderConfig=a(this.getElement()).data()[".wSlider"],this._slides=Array.from(this._sliderConfig.slides).map(e=>new i.WFComponent(e)),this._mask=new i.WFComponent(this._sliderConfig.mask[0]),this._nav=new i.WFComponent(this._sliderConfig.nav[0]),this._left=new i.WFComponent(this._sliderConfig.left[0]),this._right=new i.WFComponent(this._sliderConfig.right[0]),function(e,t){let r,n;if(document.styleSheets&&0!=document.getElementsByTagName("head").length){if(document.styleSheets.length>0){for(var i=0,o=document.styleSheets.length;i<o;i++)if(!document.styleSheets[i].disabled){var s=document.styleSheets[i].media;if("string"==(n=typeof s)?""!==s&&-1===s.indexOf("screen")||(r=document.styleSheets[i]):"object"==n&&(""!==s.mediaText&&-1===s.mediaText.indexOf("screen")||(r=document.styleSheets[i])),void 0!==r)break}}if(void 0===r){var a=document.createElement("style");for(a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),i=0;i<document.styleSheets.length;i++)document.styleSheets[i].disabled||(r=document.styleSheets[i]);n=typeof r.media}if("string"===n){for(i=0,o=r.rules.length;i<o;i++)if(r.rules[i].selectorText&&r.rules[i].selectorText.toLowerCase()==e.toLowerCase())return void(r.rules[i].style.cssText=t);r.addRule(e,t)}else if("object"===n){var l=r.cssRules?r.cssRules.length:0;for(i=0;i<l;i++)if(r.cssRules[i].selectorText&&r.cssRules[i].selectorText.toLowerCase()==e.toLowerCase())return void(r.cssRules[i].style.cssText=t);r.insertRule(e+"{"+t+"}",l)}}}(".xa-slider-disable","display:none !important;");let e=this;Object.defineProperty(e._sliderConfig,"index",{set:function(t){e._index=t,e._triggerOnChange()},get:function(){return e._index}}),this.refereshSlides()}reloadWFSlider(){window.Webflow.require("slider").destroy(),window.Webflow.require("slider").redraw(),window.Webflow.require("slider").ready()}refereshSlides(){this._mask.getChildAsComponents(".w-slide").forEach(e=>e.remove()),this._slides.reverse().forEach(e=>{this._mask.getElement().prepend(e.getElement())}),this._slides.reverse(),this.reloadWFSlider()}getActiveSlide(){return this._slides[this._index]}getAllSlides(){return[...this._slides]}getSlideByIndex(e){return this._slides[e]}getActiveSlideIndex(){return this._index}getPreviousSlideIndex(){return this._sliderConfig.previous}goNext(){this._sliderConfig.right.click()}goPrevious(){this._sliderConfig.left.click()}goToIndex(e){e>=0&&e<this._slides.length&&(console.log(e),a(this._sliderConfig.nav.children()[e]).click())}addSlide(e,t={}){let r=t.index,n=t.cssClass,o=(0,i.createComponent)("div");o.addCssClass("w-slide"),n&&o.addCssClass(n),o.appendChild(e);let s="number"!=typeof r?-1:r,a=this._slides;s>=0&&s<=a.length?a.splice(r,0,o):a.push(o),this._slides=[...a],this.refereshSlides()}removeSlide(e){let t=[...this._slides];e>=0&&e<t.length&&t.splice(e,1),this._slides=[...t],console.log(this._slides),this.refereshSlides()}getSlideNav(){return this._nav}setSlideNavigationState(e){e?(this._left.removeCssClass("xa-slider-disable"),this._right.removeCssClass("xa-slider-disable"),this._nav.removeCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe",this._defaultSwipeDisabled?"true":"false")):(this._left.addCssClass("xa-slider-disable"),this._right.addCssClass("xa-slider-disable"),this._nav.addCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe","true")),this.reloadWFSlider()}onSlideChange(e){let t=(0,o.v4)();return this._listeners.set(t,e),()=>{this._listeners.delete(t)}}_triggerOnChange(){Array.from(this._listeners.values()).forEach(e=>{e(this._index,this._sliderConfig.previous)})}getConfig(){return this._sliderConfig}}n=t.exports,Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})})},{"1a87f3bc23b90fa3":"65YBq","37b5fd8189a9f4c7":"faiuA"}],i8KxD:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeTicketSidebarIndicators",()=>s),n.export(r,"setActiveTicketStep",()=>a),n.export(r,"unsetActiveTicketStep",()=>l),n.export(r,"markTicketStepAsCompleted",()=>c),n.export(r,"unmarkTicketStepAsCompleted",()=>d);var i=e("@xatom/core"),o=e("../../../auth/authConfig");let s=()=>{let e=new i.WFComponent("#firstNameText"),t=(0,o.userAuth).getUser();t&&t.profile&&t.profile.first_name?e.setText(t.profile.first_name):e.setText("Friend"),[{id:"sidebarStepOne",index:1},{id:"sidebarStepTwo",index:2},{id:"sidebarStepThree",index:3},{id:"sidebarStepFour",index:4}].forEach(e=>{let t=new i.WFComponent(`#${e.id}`),r=!1;t.on("click",()=>{r=!r})})},a=e=>{let t=u(e);new i.WFComponent(`#${t}`).addCssClass("is-active")},l=e=>{let t=u(e);new i.WFComponent(`#${t}`).removeCssClass("is-active")},c=e=>{let t=u(e);new i.WFComponent(`#${t}`).getElement().click()},d=e=>{let t=u(e);new i.WFComponent(`#${t}`).getElement().click()},u=e=>({1:"sidebarStepOne",2:"sidebarStepTwo",3:"sidebarStepThree",4:"sidebarStepFour"})[e]||`ticketSidebarStep${e}`},{"@xatom/core":"65YBq","../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gu2z7:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return void 0!==e&&""!==e.trim()}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}n.defineInteropFlag(r),n.export(r,"validateNotEmpty",()=>i),n.export(r,"validateEmail",()=>o),n.export(r,"validateEmailOptional",()=>s),n.export(r,"validatePasswordRequirements",()=>a),n.export(r,"validateCheckbox",()=>l),n.export(r,"validatePasswordsMatch",()=>c),n.export(r,"validateSelectField",()=>d),n.export(r,"validatePhoneNumber",()=>u),n.export(r,"validatePhoneNumberOptional",()=>p);let s=e=>""===e.trim()||o(e);function a(e){let t=/[a-z]/.test(e),r=/[A-Z]/.test(e),n=/\d/.test(e),i=/[!@#$%^&*(),.?":{}|<>]/.test(e),o=e.length>=8;return t&&r&&n&&i&&o}function l(e){return e}function c(e,t){return e===t}function d(e){return void 0!==e&&"N/A"!==e}function u(e){return/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)}let p=e=>""===e.trim()||u(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"4zIDj":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeStateFromUrlParams",()=>m);var i=e("../state/ticketPurchaseState"),o=e("../productionList"),s=e("../performanceList"),a=e("../ticketTiers"),l=e("../components/sidebarIndicators"),c=e("@xatom/core"),d=e("../components/selectedPerformanceUI"),u=e("../../../api/apiConfig");let p=()=>{let e=new URLSearchParams(window.location.search);return{productionId:e.get("production"),performanceId:e.get("performance"),cancelId:e.get("cancel")}},m=async e=>{let{productionId:t,performanceId:r,cancelId:n}=p();(0,l.initializeTicketSidebarIndicators)();let m=new c.WFComponent(".loading_wall");if(t||r||n){m.setStyle({display:"flex"});try{if(n){let e=(0,u.apiClient).delete(`/tickets/cancel_order/${n}`);await new Promise((t,r)=>{e.onData(()=>{console.log(`Ticket order ${n} canceled successfully`);let e=new URLSearchParams(window.location.search);e.delete("cancel");let r=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`;window.history.replaceState({},document.title,r),t()}),e.onError(e=>{console.error(`Failed to cancel ticket order ${n}:`,e),r(e)}),e.fetch()})}if(t){(0,i.clearTicketPurchaseState)();let n=(await (0,o.initializeProductionList)("#selectProductionList")).find(e=>e.id===t);if(n){(0,i.saveSelectedProduction)({id:n.id,name:n.fieldData["displayed-name"],description:n.fieldData["short-description"],imageUrl:n.fieldData["main-image"].url}),(0,l.markTicketStepAsCompleted)(1),(0,l.setActiveTicketStep)(2);let o=document.querySelector(`input[value="${t}"]`);o&&(o.checked=!0,o.dispatchEvent(new Event("change")));let c=await (0,s.initializePerformanceList)("#selectPerformanceList");if(r){let t=c.find(e=>e.id===r);t?((0,i.saveSelectedPerformance)({id:t.id,name:t.fieldData["displayed-name"],dateTime:t.fieldData["date-time"],description:t.fieldData["short-description"],imageUrl:t.fieldData["main-image"].url,location:t.location_name}),(0,l.markTicketStepAsCompleted)(2),(0,l.setActiveTicketStep)(3),(0,d.updateSelectedPerformanceUI)(),await (0,a.initializeTicketTiers)("#bundleList","#ticketTierList"),e.goToIndex(2)):(console.error(`Performance with ID ${r} not found`),e.goToIndex(1))}else e.goToIndex(1)}else console.error(`Production with ID ${t} not found`),e.goToIndex(0)}else e.goToIndex(0)}catch(t){console.error("Error initializing state from URL parameters:",t),e.goToIndex(0)}finally{m.addCssClass("hidden"),setTimeout(()=>m.setStyle({display:"none"}),500)}}}},{"../state/ticketPurchaseState":"8lBgN","../productionList":"6zyyu","../performanceList":"h28oA","../ticketTiers":"bBABM","../components/sidebarIndicators":"i8KxD","@xatom/core":"65YBq","../components/selectedPerformanceUI":"ldUYM","../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=makeTicketPurchase.52c79a35.js.map
