{"mappings":"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","sources":["src/modules/dashboard/donations/donationDetails.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js"],"sourcesContent":["// src/pages/donationDetails.ts\n\nimport { WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../../api/apiConfig\";\n\n// Define the Donation, Sale, and Campaign interfaces based on the API response\ninterface Donation {\n  id: number;\n  created_at: number;\n  user_id: number;\n  contact_id: number;\n  campaign_id: string;\n  campaign_name: string;\n  status: string; // e.g., 'completed'\n  amount: number;\n  keep_anonymous: boolean;\n  customer_first_name: string;\n  customer_last_name: string;\n  customer_email: string;\n  in_name_of: string; // Added field for \"In Someone Else's Name\" donations\n  sale_id: number;\n  campaign_image_url: string;\n}\n\ninterface Sale {\n  id: number;\n  created_at: number;\n  contact_id: number;\n  user_id: number;\n  customer_first_name: string;\n  customer_last_name: string;\n  customer_email: string;\n  amount_total: number;\n  reciept_url: string;\n}\n\ninterface Campaign {\n  id: string;\n  fieldData: {\n    subheading: string;\n    \"short-description\": string;\n    name: string;\n    \"main-image\": {\n      url: string;\n      alt?: string | null;\n    };\n  };\n}\n\n// Function to fetch donation details from the API\nexport async function fetchDonationDetails(donationId: number): Promise<{\n  donation: Donation;\n  sale: Sale;\n  campaign: Campaign;\n} | null> {\n  try {\n    const getDonation = apiClient.get<{\n      donation: Donation;\n      sale: Sale;\n      campaign: Campaign;\n    }>(`/dashboard/donations/${donationId}`);\n    const response = await getDonation.fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching donation details:\", error);\n    return null;\n  }\n}\n\n// Function to trigger a success event\nconst triggerSuccessEvent = (selector: string) => {\n  const successTrigger = document.querySelector(selector);\n  if (successTrigger instanceof HTMLElement) {\n    successTrigger.click();\n  }\n};\n\n// Function to initialize and render the donation details page\nexport async function initializeDonationDetailsPage() {\n  // Extract the donation ID from the URL parameters\n  const urlParams = new URLSearchParams(window.location.search);\n  const donationId = parseInt(urlParams.get(\"donation\") || \"0\", 10);\n  if (!donationId) {\n    console.error(\"Invalid donation ID\");\n    return;\n  }\n\n  try {\n    // Fetch donation details\n    const response = await fetchDonationDetails(donationId);\n\n    if (!response) {\n      console.error(\"Failed to fetch donation details\");\n      return;\n    }\n\n    const { donation, sale, campaign } = response;\n\n    // Set campaign image using WFImage\n    const campaignImageComponent = new WFImage(\"#campaignImage\");\n    campaignImageComponent.setImage(campaign.fieldData[\"main-image\"].url);\n    campaignImageComponent\n      .getElement()\n      .setAttribute(\n        \"alt\",\n        campaign.fieldData[\"main-image\"].alt ||\n          `${campaign.fieldData.name} - Campaign Image`\n      );\n\n    // Set campaign name\n    const campaignName = new WFComponent(\"#campaignName\");\n    campaignName.setText(campaign.fieldData.name);\n\n    // Set campaign subheading\n    const campaignSubheading = new WFComponent(\"#campaignSubheading\");\n    campaignSubheading.setText(campaign.fieldData.subheading);\n\n    // Set the breadcrumb text to include campaign name and donation date\n    const campaignBreadcrumb = new WFComponent(\"#campaignBreadcrumb\");\n    const donationDate = new Date(donation.created_at).toLocaleDateString([], {\n      month: \"2-digit\",\n      day: \"2-digit\",\n      year: \"2-digit\",\n    });\n    campaignBreadcrumb.setText(`${campaign.fieldData.name} - ${donationDate}`);\n\n    // Set campaign description using the short description from the campaign object\n    const campaignShortDescription = new WFComponent(\n      \"#campaignShortDescription\"\n    );\n    campaignShortDescription.setText(campaign.fieldData[\"short-description\"]);\n\n    // Set the anonymous donation status\n    const anonymousTrue = new WFComponent(\"#anonymousTrue\");\n    const anonymousFalse = new WFComponent(\"#anonymousFalse\");\n    if (donation.keep_anonymous) {\n      anonymousTrue.setStyle({ display: \"block\" });\n      anonymousFalse.setStyle({ display: \"none\" });\n    } else {\n      anonymousTrue.setStyle({ display: \"none\" });\n      anonymousFalse.setStyle({ display: \"block\" });\n    }\n\n    // Set the billing information\n    const invoiceDate = new WFComponent(\"#invoiceDate\");\n    const saleDateFormatted = new Date(sale.created_at).toLocaleDateString([], {\n      month: \"2-digit\",\n      day: \"2-digit\",\n      year: \"2-digit\",\n    });\n    invoiceDate.setText(saleDateFormatted);\n\n    const invoiceAmount = new WFComponent(\"#invoiceAmount\");\n    invoiceAmount.setText(`$${sale.amount_total.toFixed(2)}`);\n\n    const receiptButton = new WFComponent(\"#receiptButton\");\n    receiptButton.getElement().setAttribute(\"href\", sale.reciept_url);\n\n    // Handle \"Made In The Name Of\" field\n    const inNameOfHeader = new WFComponent(\"#inNameOfHeader\");\n    const inNameOfCell = new WFComponent(\"#inNameOfCell\");\n\n    if (donation.in_name_of && donation.in_name_of.trim() !== \"\") {\n      // If in_name_of has a value, display the header and cell\n      inNameOfHeader.setStyle({ display: \"table-cell\" });\n      inNameOfCell.setStyle({ display: \"table-cell\" });\n      inNameOfCell.setText(donation.in_name_of);\n    } else {\n      // If in_name_of is blank, hide the header and cell\n      inNameOfHeader.setStyle({ display: \"none\" });\n      inNameOfCell.setStyle({ display: \"none\" });\n    }\n\n    // Trigger the success event\n    triggerSuccessEvent(\".success_trigger\");\n  } catch (error) {\n    console.error(\"Error initializing donation details page:\", error);\n  }\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));"],"names":[],"version":3,"file":"donationDetails.e5f150c6.js.map","sourceRoot":"../"}