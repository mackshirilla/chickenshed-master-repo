!function(e,t,r,n,i){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof o[n]&&o[n],l=s.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,r){if(!l[t]){if(!e[t]){var i="function"==typeof o[n]&&o[n];if(!r&&i)return i(t,!0);if(s)return s(t,!0);if(a&&"string"==typeof t)return a(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}p.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},p.cache={};var u=l[t]=new c.Module(t);e[t][0].call(u.exports,p,u,u.exports,this)}return l[t].exports;function p(e){var t=p.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=l,c.parent=s,c.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return o[n]}}),o[n]=c;for(var d=0;d<t.length;d++)c(t[d])}({"3Fz1E":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"makeTicketPurchase",()=>g);var i=e("@xatom/core"),o=e("./productionList"),s=e("./performanceList"),l=e("./ticketTiers"),a=e("./state/ticketPurchaseState"),c=e("@xatom/slider"),d=e("./components/sidebarIndicators"),u=e("../../utils/validationUtils"),p=e("../../utils/formUtils"),m=e("../../api/apiConfig"),f=e("./components/urlParamNavigator");let g=async()=>{let e=new c.WFSlider(".multi-step_form_slider");await (0,f.initializeStateFromUrlParams)(e),(0,d.initializeTicketSidebarIndicators)(),await (0,o.initializeProductionList)("#selectProductionList"),new i.WFFormComponent("#formStepOne").onFormSubmit(async(t,r)=>{r.preventDefault();let n=(0,a.getSelectedProduction)(),o=new i.WFComponent("#stepOneRequestingAnimation");if(!n||!n.id){console.error("No production selected.");let e=new i.WFComponent("#submitStepOneError");e.setText("Please select a production."),e.setStyle({display:"block"});return}console.log("Production selected:",n),new i.WFComponent("#submitStepOneError").setStyle({display:"none"}),o.setStyle({display:"block"});try{await (0,s.initializePerformanceList)("#selectPerformanceList"),(0,d.markTicketStepAsCompleted)(1),(0,d.setActiveTicketStep)(2),e.goNext()}catch(e){console.error("Error during step 1 processing:",e)}finally{o.setStyle({display:"none"})}}),new i.WFFormComponent("#formStepTwo").onFormSubmit(async(t,r)=>{r.preventDefault();let n=(0,a.getSelectedPerformance)(),o=new i.WFComponent("#stepTwoRequestingAnimation");if(!n||!n.id){console.error("No performance selected.");let e=new i.WFComponent("#submitStepTwoError");e.setText("Please select a performance."),e.setStyle({display:"block"});return}console.log("Performance selected:",n),new i.WFComponent("#submitStepTwoError").setStyle({display:"none"}),o.setStyle({display:"block"});try{(0,d.markTicketStepAsCompleted)(2),(0,d.setActiveTicketStep)(3),await (0,l.initializeTicketTiers)("#bundleList","#ticketTierList"),e.goNext()}catch(e){console.error("Error during step 2 processing:",e)}finally{o.setStyle({display:"none"})}});let t=new i.WFFormComponent("#formStepThree"),r=new i.WFComponent("#emailWrap"),n=new i.WFComponent("#firstNameInput"),g=new i.WFComponent("#lastNameInput"),h=new i.WFComponent("#emailInput"),S=new i.WFComponent("#customQuestionInput"),y=new i.WFComponent("#submitStepThreeError"),C=new i.WFComponent("#noTicketsError"),v=(e,t)=>{let r=()=>(0,p.toggleError)(t,"",!1);e.on("input",r),e.on("focus",r),e.on("change",r)};t.onFormSubmit(async(e,t)=>{t.preventDefault();let o=!0;if(y.setStyle({display:"none"}),"none"!==r.getElement().style.display){let e=new i.WFComponent("#firstNameInputError"),t=(0,p.createValidationFunction)(n,u.validateNotEmpty,"First name is required.")();(0,p.toggleError)(e,t,!!t),o=o&&!t,v(n,e);let r=new i.WFComponent("#lastNameInputError"),s=(0,p.createValidationFunction)(g,u.validateNotEmpty,"Last name is required.")();(0,p.toggleError)(r,s,!!s),o=o&&!s,v(g,r);let l=new i.WFComponent("#emailInputError"),a=(0,p.createValidationFunction)(h,u.validateEmail,"A valid email is required.")();(0,p.toggleError)(l,a,!!a),o=o&&!a,v(h,l)}if("none"!==document.getElementById("customQuestionWrap").style.display){let e=new i.WFComponent("#customQuestionInputError"),t=(0,p.createValidationFunction)(S,u.validateNotEmpty,"This field is required.")();(0,p.toggleError)(e,t,!!t),o=o&&!t,v(S,e)}let s=(0,a.getSelectedBundles)(),l=(0,a.getSelectedTickets)();if(0===s.length&&0===l.length?((0,p.toggleError)(C,"Please select at least one bundle or ticket.",!0),o=!1):(0,p.toggleError)(C,"",!1),!o){console.error("Form validation failed."),y.setText("Please correct the highlighted errors."),y.setStyle({display:"block"});return}console.log("Final form is valid, proceeding with submission...");let c=new i.WFComponent("#stepThreeRequestingAnimation");c.setStyle({display:"block"});try{let{selectedBundles:e,selectedTickets:t,email:r,firstName:n,lastName:i,customQuestion:o,assistanceNeeded:s,assistanceMessage:l,selectedProductionId:c,selectedPerformanceId:u}=(0,a.loadTicketPurchaseState)(),p=`${window.location.origin}/purchase-tickets?production=${c}&performance=${u}`,f=await (0,m.apiClient).post("/tickets/begin_checkout",{data:{selectedBundles:e,selectedTickets:t,email:r,firstName:n,lastName:i,customQuestion:o,assistanceNeeded:s,assistanceMessage:l,selectedProductionId:c,selectedPerformanceId:u,cancel_url:p}}).fetch();console.log("Checkout response:",f),(0,d.markTicketStepAsCompleted)(3),window.location.href=f.checkout_url||"/payment"}catch(e){console.error("Error during final step processing:",e),y.setText("An error occurred during checkout. Please try again."),y.setStyle({display:"block"})}finally{c.setStyle({display:"none"})}}),new i.WFComponent("#backStepThree").on("click",()=>{(0,a.clearSelectedBundles)(),(0,a.clearSelectedTickets)(),e.goPrevious(),(0,d.unsetActiveTicketStep)(3),(0,d.unmarkTicketStepAsCompleted)(2),(0,d.setActiveTicketStep)(2)}),new i.WFComponent("#backStepTwo").on("click",()=>{(0,a.clearSelectedPerformance)(),e.goPrevious(),(0,d.unsetActiveTicketStep)(2),(0,d.unmarkTicketStepAsCompleted)(1),(0,d.setActiveTicketStep)(1)}),(0,d.setActiveTicketStep)(1)}},{"@xatom/core":"65YBq","./productionList":"6zyyu","./performanceList":"h28oA","./ticketTiers":"bBABM","./state/ticketPurchaseState":"8lBgN","@xatom/slider":"ejxGx","./components/sidebarIndicators":"i8KxD","../../utils/validationUtils":"gu2z7","../../utils/formUtils":"gepHz","../../api/apiConfig":"dUmIV","./components/urlParamNavigator":"4zIDj","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"6zyyu":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeProductionList",()=>c);var i=e("@xatom/core"),o=e("../../api/productions"),s=e("./state/ticketPurchaseState");let l=null,a=null,c=async e=>{let t=document.querySelector(e);if(!t)return console.error("Production list container not found."),[];a||(a=t.cloneNode(!0)),t.innerHTML="",t.appendChild(a.cloneNode(!0));let r=new i.WFDynamicList(e,{rowSelector:"#cardSelectProduction",loaderSelector:"#productionListLoading",emptySelector:"#productionListEmpty"});r.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),r.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),r.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let n=new i.WFComponent(t),o=n.getChildAsComponent("#cardProductionTitle"),a=n.getChildAsComponent("#cardProductionDescription"),c=n.getChildAsComponent("#cardProductionAges"),d=n.getChildAsComponent("#cardProductionImage"),u=n.getChildAsComponent(".input_card_input"),p=n.getChildAsComponent("label");if(!o||!a||!c||!u||!d||!p){console.error("Production elements not found.");return}let m=`productionInput-${r}`;return u.setAttribute("id",m),u.setAttribute("value",e.id.toString()),p.setAttribute("for",m),o.setText(e.Name),a.setText(e.Short_Description),c.setText(e.Age_Description),e.Main_Image?(d.setAttribute("src",e.Main_Image),d.setAttribute("alt",e.Name||"Production Image")):console.warn(`Production ID ${e.id} does not have a main image.`),u.on("change",()=>{l=u.getElement().value,(0,s.saveSelectedProduction)({id:Number(l),name:e.Name,description:e.Short_Description,imageUrl:e.Main_Image}),console.log("Selected Production ID:",l)}),t.setStyle({display:"flex"}),t});try{r.changeLoadingStatus(!0);let e=await (0,o.fetchProductions)();return console.log("Fetched productions:",e),r.setData(e),r.changeLoadingStatus(!1),e}catch(e){return console.error("Error loading productions:",e),r.setData([]),r.changeLoadingStatus(!1),[]}}},{"@xatom/core":"65YBq","../../api/productions":"lptwN","./state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],lptwN:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fetchProductions",()=>o);var i=e("./apiConfig");let o=async()=>{try{return(await (0,i.apiClient).get("/tickets/productions").fetch()).productions}catch(e){throw console.error("Error fetching productions:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"8lBgN":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"loadTicketPurchaseState",()=>s),n.export(r,"saveTicketPurchaseState",()=>l),n.export(r,"clearTicketPurchaseState",()=>a),n.export(r,"getSelectedProduction",()=>c),n.export(r,"saveSelectedProduction",()=>d),n.export(r,"getSelectedPerformance",()=>u),n.export(r,"saveSelectedPerformance",()=>p),n.export(r,"getSelectedBundles",()=>m),n.export(r,"saveSelectedBundle",()=>f),n.export(r,"removeSelectedBundle",()=>g),n.export(r,"getSelectedTickets",()=>h),n.export(r,"saveSelectedTicket",()=>S),n.export(r,"removeSelectedTicket",()=>y),n.export(r,"getCustomQuestion",()=>C),n.export(r,"saveCustomQuestion",()=>v),n.export(r,"getAssistanceNeeded",()=>x),n.export(r,"saveAssistanceNeeded",()=>T),n.export(r,"getAssistanceMessage",()=>k),n.export(r,"saveAssistanceMessage",()=>b),n.export(r,"saveUserDetails",()=>w),n.export(r,"clearSelectedPerformance",()=>_),n.export(r,"clearSelectedBundles",()=>P),n.export(r,"clearSelectedTickets",()=>A);let i="ticketPurchaseState",o=e=>"number"==typeof e?e:0,s=()=>{let e=localStorage.getItem(i);return e?JSON.parse(e):{}},l=e=>{let t={...s(),...e};localStorage.setItem(i,JSON.stringify(t))},a=()=>{localStorage.removeItem(i)},c=()=>{let e=s();return{id:e.selectedProductionId??null,name:e.selectedProductionName??null,description:e.selectedProductionDescription??null,imageUrl:e.selectedProductionImageUrl??null}},d=e=>{l({selectedProductionId:e.id,selectedProductionName:e.name,selectedProductionDescription:e.description,selectedProductionImageUrl:e.imageUrl})},u=()=>{let e=s();return{id:e.selectedPerformanceId??null,name:e.selectedPerformanceName??null,dateTime:e.selectedPerformanceDateTime??null,description:e.selectedPerformanceDescription??null,imageUrl:e.selectedPerformanceImageUrl??null,location:e.selectedPerformanceLocation??null}},p=e=>{l({selectedPerformanceId:e.id,selectedPerformanceName:e.name,selectedPerformanceDateTime:e.dateTime,selectedPerformanceDescription:e.description,selectedPerformanceImageUrl:e.imageUrl,selectedPerformanceLocation:e.location})},m=()=>s().selectedBundles||[],f=(e,t)=>{let r=m(),n=r.findIndex(t=>t.bundle_id===e);n>-1?t>0?r[n].quantity=t:r.splice(n,1):t>0&&r.push({bundle_id:e,quantity:t}),l({selectedBundles:r})},g=e=>{let t=m().filter(t=>t.bundle_id!==e);l({selectedBundles:t}),0===t.reduce((e,t)=>e+o(t.quantity),0)&&l({selectedTickets:h().filter(e=>!e.bundle_required)})},h=()=>s().selectedTickets||[],S=(e,t,r)=>{let n=h(),i=n.findIndex(t=>t.ticket_tier_id===e);i>-1?t>0?n[i].quantity=t:n.splice(i,1):t>0&&n.push({ticket_tier_id:e,quantity:t,bundle_required:r}),l({selectedTickets:n})},y=e=>{l({selectedTickets:h().filter(t=>t.ticket_tier_id!==e)})},C=()=>s().customQuestion??null,v=e=>l({customQuestion:e}),x=()=>s().assistanceNeeded??!1,T=e=>l({assistanceNeeded:e}),k=()=>s().assistanceMessage??"",b=e=>l({assistanceMessage:e}),w=e=>l(e),_=()=>l({selectedPerformanceId:void 0,selectedPerformanceName:void 0,selectedPerformanceDateTime:void 0,selectedPerformanceDescription:void 0,selectedPerformanceImageUrl:void 0,selectedPerformanceLocation:void 0}),P=()=>l({selectedBundles:[]}),A=()=>l({selectedTickets:[]})},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],h28oA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializePerformanceList",()=>c);var i=e("@xatom/core"),o=e("../../api/performances"),s=e("./state/ticketPurchaseState"),l=e("./components/performanceFilter");let a=null,c=async e=>{let t=document.querySelector(e);if(!t)return console.error("Performance list container not found."),[];a||(a=t.cloneNode(!0)),t.innerHTML="",t.appendChild(a.cloneNode(!0));let r=new i.WFDynamicList(e,{rowSelector:"#cardSelectPerformance",loaderSelector:"#performanceListLoading",emptySelector:"#performanceListEmpty"});r.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),r.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),r.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let n=new i.WFComponent(t),o=n.getChildAsComponent(".production_date_wrapper"),l=o?.getChildAsComponent(".u-text-h4"),a=o?.getChildAsComponent(".production_date_month"),c=o?.getChildAsComponent(".input_card_description"),d=n.getChildAsComponent("#cardPerformanceWeekday"),u=n.getChildAsComponent("#cardPerformanceTitle"),p=n.getChildAsComponent("#cardPerformanceProductionTitle"),m=n.getChildAsComponent("#cardPerformanceDescription"),f=n.getChildAsComponent("#cardImage"),g=n.getChildAsComponent(".input_card_input"),h=n.getChildAsComponent("label"),S=n.getChildAsComponent("#cardPerformanceLocation");if(!l||!a||!c||!d||!u||!p||!m||!f||!g||!h||!S){console.error("Performance elements not found.");return}let y=`performanceInput-${r}`;g.setAttribute("id",y),g.setAttribute("value",e.id.toString()),h.setAttribute("for",y);let C=new Date(Number(e.Date_Time));l.setText(C.toLocaleString("en-US",{day:"numeric",timeZone:"America/New_York"})),a.setText(C.toLocaleString("en-US",{month:"short",timeZone:"America/New_York"})),d.setText(C.toLocaleString("en-US",{weekday:"long",timeZone:"America/New_York"})),c.setText(C.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"America/New_York"})),u.setText(e.Displayed_Name||e.Name);let v=(0,s.getSelectedProduction)();return p.setText(v?.name||"Unknown Production"),m.setText(e.Short_Description),e.Main_Image&&(f.setAttribute("src",e.Main_Image),f.setAttribute("alt",e.Displayed_Name||e.Name)),S.setText(e.location_details?.Name||"Unknown venue"),g.on("change",()=>{(0,s.saveSelectedPerformance)({id:e.id.toString(),name:e.Displayed_Name,dateTime:e.Date_Time.toString(),description:e.Short_Description,imageUrl:e.Main_Image,location:e.location_details?.Name||""})}),t.setStyle({display:"flex"}),t});try{r.changeLoadingStatus(!0);let e=(0,s.getSelectedProduction)();if(!e?.id)throw Error("No production selected");let t=await (0,o.fetchPerformances)(e.id.toString());return t.sort((e,t)=>e.Date_Time-t.Date_Time),r.setData(t),t.length&&(0,l.initializePerformanceFilter)(),r.changeLoadingStatus(!1),t}catch(e){return console.error("Error loading performances:",e),r.setData([]),r.changeLoadingStatus(!1),[]}}},{"@xatom/core":"65YBq","../../api/performances":"kkvM9","./state/ticketPurchaseState":"8lBgN","./components/performanceFilter":"4sx37","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],kkvM9:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fetchPerformances",()=>o);var i=e("./apiConfig");let o=async e=>{try{let{performances:t}=await (0,i.apiClient).post("/tickets/performances",{data:{production_id:e}}).fetch();return t}catch(e){throw console.error("Error fetching performances:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"4sx37":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializePerformanceFilter",()=>i);let i=()=>{let e=document.getElementById("locationFilter"),t=document.getElementById("monthFilter");e&&e.addEventListener("change",()=>{o()}),t&&t.addEventListener("change",()=>{o()})},o=()=>{let e=document.getElementById("locationFilter"),t=document.getElementById("monthFilter");s(e?.value||"N/A",t?.value||"N/A")},s=(e,t)=>{let r=document.querySelectorAll(".input_card_wrap"),n=!1;r.forEach(r=>{let i=r.querySelector("#cardPerformanceLocation"),o=i?.textContent||"",s=r.querySelector(".production_date_month"),l=s?.textContent||"",a="N/A"===t||l.toUpperCase()===t;("N/A"===e||o===e)&&a?(r.style.display="flex",n=!0):r.style.display="none"});let i=document.getElementById("filterListEmpty");i&&(i.style.display=n?"none":"flex")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bBABM:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeTicketTiers",()=>p);var i=e("../../api/ticketTiersAPI"),o=e("./components/ticketTierListRender"),s=e("./state/ticketPurchaseState"),l=e("@xatom/core"),a=e("./components/selectedPerformanceUI"),c=e("./components/customQuestionUI"),d=e("./components/assistanceInputUI"),u=e("./components/userDetailsUI");let p=async(e,t)=>{let r=(0,s.getSelectedPerformance)();if(!r?.id){console.error("No performance selected.");return}try{let{tickets_available:n,performance_details:s,bundles_available:p}=await (0,i.fetchTicketTiers)(r.id),m=s.ticket_bundles_offered.flat(),f=s.ticket_tiers_offered.flat();(0,a.updateSelectedPerformanceUI)(),(0,u.initializeUserDetails)();let g=new l.WFComponent(e);g.setStyle({display:"block"});let h=new l.WFComponent(t);h.setStyle({display:"block"});let S=!1;m.length>0?((0,o.renderBundles)(m,e,p),S=!0):g.setStyle({display:"none"}),f.length>0?((0,o.renderTicketTiers)(f,n,t),S=!0):h.setStyle({display:"none"}),new l.WFComponent("#noTicketsAvailable").setStyle({display:S?"none":"flex"});let y=s.Custom_Question;(0,c.updateCustomQuestion)(y),(0,d.initializeAssistanceInput)()}catch(e){console.error("Error fetching ticket tiers:",e)}}},{"../../api/ticketTiersAPI":"iApBh","./components/ticketTierListRender":"64cXF","./state/ticketPurchaseState":"8lBgN","@xatom/core":"65YBq","./components/selectedPerformanceUI":"ldUYM","./components/customQuestionUI":"dxOwo","./components/assistanceInputUI":"2EvCq","./components/userDetailsUI":"6alDg","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],iApBh:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"fetchTicketTiers",()=>o);var i=e("./apiConfig");let o=async e=>{try{return await (0,i.apiClient).post("/tickets/ticket_tiers",{data:{selectedPerformanceId:e}}).fetch()}catch(e){throw console.error("Error fetching ticket tiers:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"64cXF":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"renderBundles",()=>i.renderBundles),n.export(r,"renderTicketTiers",()=>o.renderTicketTiers);var i=e("./bundleRenderer"),o=e("./ticketTierRenderer")},{"./bundleRenderer":"2Fs2e","./ticketTierRenderer":"bIOFG","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"2Fs2e":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"renderBundles",()=>d);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState"),s=e("../state/bundleStateUpdater"),l=e("./ticketTierRenderer"),a=e("../../../utils/formUtils");let c=null,d=(e,t,r=[])=>{let n=document.querySelector(t);if(!n){console.error("Bundle list container not found.");return}c||(c=n.cloneNode(!0)),n.innerHTML="",n.appendChild(c.cloneNode(!0));let d=()=>{let e=new i.WFComponent("#noTicketsError");(0,a.toggleError)(e,"",!1)},u=new i.WFDynamicList(t,{rowSelector:"#bundleCard",loaderSelector:"#bundleListLoading",emptySelector:"#bundleListEmpty"});u.loaderRenderer(e=>(e.getElement().style.display="flex",e)),u.emptyRenderer(e=>(e.getElement().style.display="flex",e)),u.rowRenderer(({rowData:e,rowElement:t})=>{let n=new i.WFComponent(t),a=n.getChildAsComponent("#bundlePrice"),c=n.getChildAsComponent("#bundleName"),u=n.getChildAsComponent("#bundleDescription"),p=n.getChildAsComponent("#bundleQuantityInput"),m=n.getChildAsComponent("#bundleQuantityIncrease"),f=n.getChildAsComponent("#bundleQuantityDecrease"),g=n.getChildAsComponent(".maximum_alert"),h=n.getChildAsComponent("#bundleSoldOut"),S=n.getChildAsComponent(".number_input_wrapper");if(!a||!c||!u||!p||!m||!f||!g||!h||!S){console.error("Bundle elements not found.");return}a.setText(e.product_details.Displayed_single_sale_price),c.setText(e.Displayed_Name),u.setText(e.Short_Description),p.setAttribute("value","0");let y=r.find(t=>t.bundle_id===e.id),C=y?y.max_available:1/0;C<=0?(h.setText("Sold out"),h.getElement().style.display="block",S.addCssClass("is-disabled")):(h.getElement().style.display="none",S.removeCssClass("is-disabled")),p.setAttribute("max",C.toString());let v=()=>g.getElement().style.display="none",x=e=>{g.setText(e),g.getElement().style.display="block"};return m.on("click",()=>{let t=p.getElement(),r=Number(t.value);r<C?(r+=1,t.value=String(r),(0,o.saveSelectedBundle)(e.id.toString(),r),(0,s.updateTicketTierButtons)(),d(),v(),(0,s.resetTicketQuantitiesIfNeeded)(),(0,l.revalidateTicketTierQuantities)()):x(`Only up to ${C} bundles available.`)}),f.on("click",()=>{let t=p.getElement(),r=Number(t.value);r>0&&(r-=1,t.value=String(r),r>0?(0,o.saveSelectedBundle)(e.id.toString(),r):(0,o.removeSelectedBundle)(e.id.toString()),(0,s.updateTicketTierButtons)(),d(),v(),(0,s.resetTicketQuantitiesIfNeeded)(),(0,l.revalidateTicketTierQuantities)())}),p.on("input",()=>{d();let e=p.getElement();Number(e.value)>C?(e.value=String(C),x(`Only up to ${C} bundles available.`)):v(),(0,s.resetTicketQuantitiesIfNeeded)(),(0,l.revalidateTicketTierQuantities)()}),t.setStyle({display:"flex"}),t}),u.setData(e)}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","../state/bundleStateUpdater":"by5b6","./ticketTierRenderer":"bIOFG","../../../utils/formUtils":"gepHz","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],by5b6:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"resetTicketQuantitiesIfNeeded",()=>s),n.export(r,"updateTicketTierButtons",()=>l);var i=e("../state/ticketPurchaseState");let o=e=>"number"==typeof e?e:0,s=()=>{let e=(0,i.getSelectedBundles)().reduce((e,t)=>e+o(t.quantity),0);(0,i.getSelectedTickets)().forEach(t=>{let r=document.querySelector(`#ticketTierCard[data-id="${t.ticket_tier_id}"] #ticketTierQuantityInput`);r&&t.bundle_required&&e<=0&&(r.value="0",(0,i.removeSelectedTicket)(t.ticket_tier_id))}),console.log("Updated selectedTickets:",(0,i.getSelectedTickets)())},l=()=>{let e=(0,i.getSelectedBundles)().reduce((e,t)=>e+o(t.quantity),0),t=document.querySelectorAll("#ticketTierQuantityInput"),r=document.querySelectorAll("#ticketTierQuantityIncrease");t.forEach(t=>{let r=t.closest("#ticketTierCard");r?.getAttribute("data-requires-bundle")==="true"&&e<=0?(t.setAttribute("disabled","true"),t.value="0"):t.removeAttribute("disabled")}),r.forEach(t=>{let r=t.closest("#ticketTierCard");r?.getAttribute("data-requires-bundle")==="true"&&e<=0?t.setAttribute("disabled","true"):t.removeAttribute("disabled")}),s()}},{"../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bIOFG:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"revalidateTicketTierQuantities",()=>d),n.export(r,"renderTicketTiers",()=>u);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState"),s=e("../../../utils/formUtils");let l=e=>"number"==typeof e?e:0,a=()=>{let e=new i.WFComponent("#noTicketsError");(0,s.toggleError)(e,"",!1)},c=null,d=()=>{document.querySelectorAll("[data-requires-bundle='true']").forEach(e=>{let t=new i.WFComponent(e.querySelector(".maximum_alert")),r=new i.WFComponent(e.querySelector("#ticketTierQuantityInput"));0>=(0,o.getSelectedBundles)().reduce((e,t)=>e+l(t.quantity),0)?(r.getElement().value="0",t.setText("This item requires a ticket bundle purchase. Please add a ticket bundle from the options above."),t.getElement().style.display="block"):t.getElement().style.display="none"})},u=(e,t,r)=>{let n=new Map;t.forEach(e=>{n.set(e.Ticket_Tier,e.Quantity_Available)});let s=document.querySelector(r);if(!s){console.error("Ticket tier list container not found.");return}c||(c=s.cloneNode(!0)),s.innerHTML="",s.appendChild(c.cloneNode(!0));let u=new i.WFDynamicList(r,{rowSelector:"#ticketTierCard",loaderSelector:"#ticketTierListLoading",emptySelector:"#ticketTierListEmpty"});u.loaderRenderer(e=>(e.getElement().style.display="flex",e)),u.emptyRenderer(e=>(e.getElement().style.display="flex",e)),u.rowRenderer(({rowData:e,rowElement:t})=>{let r=new i.WFComponent(t),s=e.Requires_Bundle_Purchase;t.setAttribute("data-requires-bundle",s?"true":"false");let c=r.getChildAsComponent("#ticketTierName"),u=r.getChildAsComponent("#ticketTierPrice"),p=r.getChildAsComponent("#ticketTierSoldOut"),m=r.getChildAsComponent("#ticketTierDescription"),f=r.getChildAsComponent("#ticketTierQuantityInput"),g=r.getChildAsComponent("#ticketTierQuantityIncrease"),h=r.getChildAsComponent("#ticketTierQuantityDecrease"),S=r.getChildAsComponent(".maximum_alert"),y=r.getChildAsComponent(".number_input_wrapper");if(!c||!u||!p||!m||!f||!g||!h||!S||!y){console.error("Ticket tier elements not found.");return}let C=n.get(e.id)??0;c.setText(e.Displayed_Name),u.setText(e.product_details.Displayed_single_sale_price),m.setText(e.Short_Description),f.setAttribute("max",String(C)),f.setAttribute("value","0"),C<=0?(p.setText("Sold out"),p.getElement().style.display="block",y.addCssClass("is-disabled")):(p.getElement().style.display="none",y.removeCssClass("is-disabled"));let v=e=>{S.setText(e),S.getElement().style.display="block"};return g.on("click",()=>{let t=f.getElement(),r=Number(t.value);if(s&&0>=(0,o.getSelectedBundles)().reduce((e,t)=>e+l(t.quantity),0)){v("This item requires a ticket bundle purchase. Please add a ticket bundle from the options above.");return}r<C?(r++,t.value=String(r),(0,o.saveSelectedTicket)(e.id.toString(),r,s),a(),d()):v("You have reached the maximum available quantity.")}),h.on("click",()=>{let t=f.getElement(),r=Number(t.value);r>0&&(r--,t.value=String(r),r>0?(0,o.saveSelectedTicket)(e.id.toString(),r,s):(0,o.removeSelectedTicket)(e.id.toString()),a(),d())}),f.on("input",()=>{a();let e=f.getElement();Number(e.value)>C&&(e.value=String(C),v("You have reached the maximum available quantity.")),d()}),t.setStyle({display:"flex"}),t}),u.setData(e)}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","../../../utils/formUtils":"gepHz","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gepHz:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"toggleError",()=>a),n.export(r,"setupValidation",()=>c),n.export(r,"createValidationFunction",()=>d),n.export(r,"createCheckboxValidationFunction",()=>u),n.export(r,"setupCheckboxValidation",()=>p),n.export(r,"validateSelectedSessions",()=>m),n.export(r,"setProfilePicUrl",()=>f),n.export(r,"setupFileUpload",()=>g),n.export(r,"formatPhoneNumber",()=>h);var i=e("@xatom/core"),o=e("@xatom/image"),s=e("../api/apiConfig"),l=e("../auth/authConfig");function a(e,t,r){e.updateTextViaAttrVar({text:r?t:""}),e.setStyle({display:r?"flex":"none"})}function c(e,t,r,n){let i=()=>{let e=r();a(t,e,!!e),n&&""===e&&a(n,"",!1)};e.on("input",i),e.on("blur",i),e.on("change",i)}function d(e,t,r){return()=>t(e.getElement().value)?"":r}function u(e,t){return()=>e.getElement().checked?"":t}function p(e,t,r){let n=u(e,r);c(e,t,n)}function m(e,t,r){let n=e.length>0&&e.some(e=>e.studentIds.length>0);return n?a(t,"",!1):a(t,r,!0),n}function f(e){let t=(0,l.userAuth).getUser();t&&t.profile&&(t.profile.profile_pic=t.profile.profile_pic||{url:""},t.profile.profile_pic.url=e,(0,l.userAuth).setUser(t),localStorage.setItem("auth_user",JSON.stringify(t)))}function g(e,t,r,n){let l=new o.WFImage("#profilePictureImage"),c=new i.WFComponent("#uploadAnimation"),d=new i.WFComponent(".drop-zone"),u=0;return new Promise(i=>{let o=o=>{if(!["image/jpeg","image/jpg"].includes(o.type)&&!/\.(jpg|jpeg)$/i.test(o.name)){a(t,"Only JPEG images are allowed.",!0),e.getElement().value="";return}if(o.size>2097152){a(t,"File size must be less than 2 MB.",!0),e.getElement().value="";return}c.setStyle({display:"flex"}),t.setStyle({display:"none"}),r.setStyle({display:"none"});let p=new FileReader;p.onload=e=>{let t=e.target?.result;l.setImage(t),d.setStyle({display:"none"})},p.readAsDataURL(o);let m=new FormData;m.append("profile_picture",o);let g=localStorage.getItem("current_student");if(g){let e=JSON.parse(g);m.append("student_profile_id",e.id.toString())}let h=(0,s.apiClient).post(n,{data:m});h.onData(n=>{if("success"===n.status){let e=n.url.profile_pic.url;f(e),l.setImage(e),localStorage.setItem("image_upload",e),r.setStyle({display:"flex"}),c.setStyle({display:"none"}),i(e)}else a(t,"Failed to upload profile picture.",!0),c.setStyle({display:"none"}),d.setStyle({display:"none"}),u=0,e.getElement().value=""}),h.onError(r=>{let n="An error occurred during image upload.";r.response&&r.response.data?n=r.response.data.message||n:r.message&&(n=r.message),a(t,n,!0),c.setStyle({display:"none"}),d.setStyle({display:"none"}),u=0,e.getElement().value=""}),h.fetch()};e.on("change",()=>{let t=e.getElement().files?.[0];t&&o(t)});let p=document.body;p.addEventListener("dragenter",e=>{e.preventDefault(),1==++u&&d.setStyle({display:"flex"})}),p.addEventListener("dragleave",()=>{--u<=0&&(d.setStyle({display:"none"}),u=0)}),p.addEventListener("dragover",e=>{e.preventDefault()}),p.addEventListener("drop",e=>{e.preventDefault();let t=e.dataTransfer?.files;t?.length&&o(t[0]),d.setStyle({display:"none"}),u=0})})}let h=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:t.length<=10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../api/apiConfig":"dUmIV","../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var n,i=e("d023971cccd819e3"),o={};Object.defineProperty(o,"WFImage",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});class s extends i.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}n=t.exports,Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},{d023971cccd819e3:"65YBq"}],ldUYM:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"updateSelectedPerformanceUI",()=>s);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState");let s=()=>{let e;let t=(0,o.getSelectedPerformance)(),r=(0,o.getSelectedProduction)();if(!t||!t.id){console.error("No performance selected.");return}let n=new i.WFComponent("#selectedPerformanceDate"),s=new i.WFComponent("#selectedPerformanceMonth"),l=new i.WFComponent("#selectedWeekday"),a=new i.WFComponent("#selectedTime"),c=new i.WFComponent("#selectedPerformanceTitle"),d=new i.WFComponent("#selectedPerformanceProductionTitle"),u=new i.WFComponent("#selectedPerformanceDescription"),p=new i.WFComponent("#selectedImage"),m=new i.WFComponent("#selectedPerformanceLocation"),f=t.dateTime;e=new Date(/^\d+$/.test(f)?Number(f):f);let g={timeZone:"America/New_York"};n.setText(e.toLocaleString("en-US",{...g,day:"numeric"})),s.setText(e.toLocaleString("en-US",{...g,month:"short"})),l.setText(e.toLocaleString("en-US",{...g,weekday:"long"})),a.setText(e.toLocaleTimeString("en-US",{...g,hour:"2-digit",minute:"2-digit",hour12:!0})),c.setText(t.name),d.setText(r.name),u.setText(r.description),t.imageUrl&&(p.setAttribute("src",t.imageUrl),p.setAttribute("alt",t.name)),t.location?m.setText(t.location):m.setText("Location not specified")}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],dxOwo:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"updateCustomQuestion",()=>s);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState");let s=e=>{let t=new i.WFComponent("#customQuestionWrap"),r=new i.WFComponent("#customQuestionDivider"),n=new i.WFComponent("label[for='customQuestionInput']"),s=new i.WFComponent("#customQuestionInput");if(!e){t.setStyle({display:"none"}),r.setStyle({display:"none"});return}t.setStyle({display:""}),r.setStyle({display:""}),n.setText(e),s.on("input",()=>{let e=s.getElement().value;(0,o.saveCustomQuestion)(e)})}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"2EvCq":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeAssistanceInput",()=>s);var i=e("@xatom/core"),o=e("../state/ticketPurchaseState");let s=()=>{let e=new i.WFComponent("#assistanceInput"),t=new i.WFComponent("#hiddenAssistanceWrapper"),r=new i.WFComponent("#assistanceMessageInput");if(!e||!t||!r){console.error("Assistance input or hidden wrapper elements not found.");return}let n=e.getElement().checked;if((0,o.saveAssistanceNeeded)(n),n){t.removeCssClass("g-hide");let e=r.getElement().value;(0,o.saveAssistanceMessage)(e)}else t.addCssClass("g-hide"),(0,o.saveAssistanceMessage)("");e.on("change",()=>{let n=e.getElement().checked;n?t.removeCssClass("g-hide"):(t.addCssClass("g-hide"),r.getElement().value="",(0,o.saveAssistanceMessage)("")),(0,o.saveAssistanceNeeded)(n)}),r.on("input",()=>{let e=r.getElement().value;(0,o.saveAssistanceMessage)(e)})}},{"@xatom/core":"65YBq","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"6alDg":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeUserDetails",()=>l);var i=e("@xatom/core"),o=e("../../../auth/authConfig"),s=e("../state/ticketPurchaseState");let l=()=>{let e=new i.WFComponent("#emailWrap"),t=new i.WFComponent("#firstNameInput"),r=new i.WFComponent("#lastNameInput"),n=new i.WFComponent("#emailInput"),l=(0,o.authManager).getUserAuth().getUser();l&&l.email?(e.setStyle({display:"none"}),(0,s.saveUserDetails)({firstName:l.profile?.first_name||"",lastName:l.profile?.last_name||"",email:l.email})):(e.setStyle({display:"grid"}),t.on("input",()=>{let e=t.getElement().value;(0,s.saveUserDetails)({firstName:e})}),r.on("input",()=>{let e=r.getElement().value;(0,s.saveUserDetails)({lastName:e})}),n.on("input",()=>{let e=n.getElement().value;(0,s.saveUserDetails)({email:e})}))}},{"@xatom/core":"65YBq","../../../auth/authConfig":"dHwPR","../state/ticketPurchaseState":"8lBgN","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],ejxGx:[function(e,t,r){var n,i=e("1a87f3bc23b90fa3"),o=e("37b5fd8189a9f4c7"),s={};Object.defineProperty(s,"WFSlider",{get:()=>a,set:void 0,enumerable:!0,configurable:!0});let l=window.jQuery;class a extends i.WFComponent{_sliderConfig={};_slides=[];_defaultSwipeDisabled=!1;_index=0;_listeners=new Map;constructor(e){super(e),this.init()}init(){this._defaultSwipeDisabled="true"===this.getAttribute("data-disable-swipe"),this._sliderConfig=l(this.getElement()).data()[".wSlider"],this._slides=Array.from(this._sliderConfig.slides).map(e=>new i.WFComponent(e)),this._mask=new i.WFComponent(this._sliderConfig.mask[0]),this._nav=new i.WFComponent(this._sliderConfig.nav[0]),this._left=new i.WFComponent(this._sliderConfig.left[0]),this._right=new i.WFComponent(this._sliderConfig.right[0]),function(e,t){let r,n;if(document.styleSheets&&0!=document.getElementsByTagName("head").length){if(document.styleSheets.length>0){for(var i=0,o=document.styleSheets.length;i<o;i++)if(!document.styleSheets[i].disabled){var s=document.styleSheets[i].media;if("string"==(n=typeof s)?""!==s&&-1===s.indexOf("screen")||(r=document.styleSheets[i]):"object"==n&&(""!==s.mediaText&&-1===s.mediaText.indexOf("screen")||(r=document.styleSheets[i])),void 0!==r)break}}if(void 0===r){var l=document.createElement("style");for(l.type="text/css",document.getElementsByTagName("head")[0].appendChild(l),i=0;i<document.styleSheets.length;i++)document.styleSheets[i].disabled||(r=document.styleSheets[i]);n=typeof r.media}if("string"===n){for(i=0,o=r.rules.length;i<o;i++)if(r.rules[i].selectorText&&r.rules[i].selectorText.toLowerCase()==e.toLowerCase())return void(r.rules[i].style.cssText=t);r.addRule(e,t)}else if("object"===n){var a=r.cssRules?r.cssRules.length:0;for(i=0;i<a;i++)if(r.cssRules[i].selectorText&&r.cssRules[i].selectorText.toLowerCase()==e.toLowerCase())return void(r.cssRules[i].style.cssText=t);r.insertRule(e+"{"+t+"}",a)}}}(".xa-slider-disable","display:none !important;");let e=this;Object.defineProperty(e._sliderConfig,"index",{set:function(t){e._index=t,e._triggerOnChange()},get:function(){return e._index}}),this.refereshSlides()}reloadWFSlider(){window.Webflow.require("slider").destroy(),window.Webflow.require("slider").redraw(),window.Webflow.require("slider").ready()}refereshSlides(){this._mask.getChildAsComponents(".w-slide").forEach(e=>e.remove()),this._slides.reverse().forEach(e=>{this._mask.getElement().prepend(e.getElement())}),this._slides.reverse(),this.reloadWFSlider()}getActiveSlide(){return this._slides[this._index]}getAllSlides(){return[...this._slides]}getSlideByIndex(e){return this._slides[e]}getActiveSlideIndex(){return this._index}getPreviousSlideIndex(){return this._sliderConfig.previous}goNext(){this._sliderConfig.right.click()}goPrevious(){this._sliderConfig.left.click()}goToIndex(e){e>=0&&e<this._slides.length&&(console.log(e),l(this._sliderConfig.nav.children()[e]).click())}addSlide(e,t={}){let r=t.index,n=t.cssClass,o=(0,i.createComponent)("div");o.addCssClass("w-slide"),n&&o.addCssClass(n),o.appendChild(e);let s="number"!=typeof r?-1:r,l=this._slides;s>=0&&s<=l.length?l.splice(r,0,o):l.push(o),this._slides=[...l],this.refereshSlides()}removeSlide(e){let t=[...this._slides];e>=0&&e<t.length&&t.splice(e,1),this._slides=[...t],console.log(this._slides),this.refereshSlides()}getSlideNav(){return this._nav}setSlideNavigationState(e){e?(this._left.removeCssClass("xa-slider-disable"),this._right.removeCssClass("xa-slider-disable"),this._nav.removeCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe",this._defaultSwipeDisabled?"true":"false")):(this._left.addCssClass("xa-slider-disable"),this._right.addCssClass("xa-slider-disable"),this._nav.addCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe","true")),this.reloadWFSlider()}onSlideChange(e){let t=(0,o.v4)();return this._listeners.set(t,e),()=>{this._listeners.delete(t)}}_triggerOnChange(){Array.from(this._listeners.values()).forEach(e=>{e(this._index,this._sliderConfig.previous)})}getConfig(){return this._sliderConfig}}n=t.exports,Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})})},{"1a87f3bc23b90fa3":"65YBq","37b5fd8189a9f4c7":"faiuA"}],i8KxD:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeTicketSidebarIndicators",()=>s),n.export(r,"setActiveTicketStep",()=>l),n.export(r,"unsetActiveTicketStep",()=>a),n.export(r,"markTicketStepAsCompleted",()=>c),n.export(r,"unmarkTicketStepAsCompleted",()=>d);var i=e("@xatom/core"),o=e("../../../auth/authConfig");let s=()=>{let e=new i.WFComponent("#firstNameText"),t=(0,o.userAuth).getUser();t&&t.profile&&t.profile.first_name?e.setText(t.profile.first_name):e.setText("Friend"),[{id:"sidebarStepOne",index:1},{id:"sidebarStepTwo",index:2},{id:"sidebarStepThree",index:3},{id:"sidebarStepFour",index:4}].forEach(e=>{let t=new i.WFComponent(`#${e.id}`),r=!1;t.on("click",()=>{r=!r})})},l=e=>{let t=u(e);new i.WFComponent(`#${t}`).addCssClass("is-active")},a=e=>{let t=u(e);new i.WFComponent(`#${t}`).removeCssClass("is-active")},c=e=>{let t=u(e);new i.WFComponent(`#${t}`).getElement().click()},d=e=>{let t=u(e);new i.WFComponent(`#${t}`).getElement().click()},u=e=>({1:"sidebarStepOne",2:"sidebarStepTwo",3:"sidebarStepThree",4:"sidebarStepFour"})[e]||`ticketSidebarStep${e}`},{"@xatom/core":"65YBq","../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gu2z7:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return void 0!==e&&""!==e.trim()}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}n.defineInteropFlag(r),n.export(r,"validateNotEmpty",()=>i),n.export(r,"validateEmail",()=>o),n.export(r,"validateEmailOptional",()=>s),n.export(r,"validatePasswordRequirements",()=>l),n.export(r,"validateCheckbox",()=>a),n.export(r,"validatePasswordsMatch",()=>c),n.export(r,"validateSelectField",()=>d),n.export(r,"validatePhoneNumber",()=>u),n.export(r,"validatePhoneNumberOptional",()=>p);let s=e=>""===e.trim()||o(e);function l(e){let t=/[a-z]/.test(e),r=/[A-Z]/.test(e),n=/\d/.test(e),i=/[!@#$%^&*(),.?":{}|<>]/.test(e),o=e.length>=8;return t&&r&&n&&i&&o}function a(e){return e}function c(e,t){return e===t}function d(e){return void 0!==e&&"N/A"!==e}function u(e){return/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)}let p=e=>""===e.trim()||u(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"4zIDj":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"initializeStateFromUrlParams",()=>m);var i=e("../state/ticketPurchaseState"),o=e("../productionList"),s=e("../performanceList"),l=e("../ticketTiers"),a=e("../components/sidebarIndicators"),c=e("@xatom/core"),d=e("../components/selectedPerformanceUI"),u=e("../../../api/apiConfig");let p=()=>{let e=new URLSearchParams(window.location.search);return{productionId:e.get("production"),performanceId:e.get("performance"),cancelId:e.get("cancel")}},m=async e=>{let{productionId:t,performanceId:r,cancelId:n}=p();(0,a.initializeTicketSidebarIndicators)();let m=new c.WFComponent(".loading_wall");if(t||r||n){m.setStyle({display:"flex"});try{if(n){let e=(0,u.apiClient).delete(`/tickets/cancel_order/${n}`);await new Promise((t,r)=>{e.onData(()=>{let e=new URLSearchParams(window.location.search);e.delete("cancel");let r=window.location.pathname,n=e.toString();window.history.replaceState({},document.title,r+(n?`?${n}`:"")),t()}),e.onError(e=>r(e)),e.fetch()})}if(t){(0,i.clearTicketPurchaseState)();let n=(await (0,o.initializeProductionList)("#selectProductionList")).find(e=>e.id===Number(t));if(n){(0,i.saveSelectedProduction)({id:n.id,name:n.Name,description:n.Short_Description,imageUrl:n.Main_Image}),(0,a.markTicketStepAsCompleted)(1),(0,a.setActiveTicketStep)(2);let o=document.querySelector(`input[value="${t}"]`);o&&(o.checked=!0,o.dispatchEvent(new Event("change")));let c=await (0,s.initializePerformanceList)("#selectPerformanceList");if(r){let t=c.find(e=>e.id.toString()===r);t?((0,i.saveSelectedPerformance)({id:t.id.toString(),name:t.Displayed_Name,dateTime:t.Date_Time.toString(),description:t.Short_Description,imageUrl:t.Main_Image,location:t.location_details.Name}),(0,a.markTicketStepAsCompleted)(2),(0,a.setActiveTicketStep)(3),(0,d.updateSelectedPerformanceUI)(),await (0,l.initializeTicketTiers)("#bundleList","#ticketTierList"),e.goToIndex(2)):(console.error(`Performance ${r} not found`),e.goToIndex(1))}else e.goToIndex(1)}else console.error(`Production ${t} not found`),e.goToIndex(0)}else e.goToIndex(0)}catch(t){console.error("Error initializing from URL:",t),e.goToIndex(0)}finally{m.addCssClass("hidden"),setTimeout(()=>m.setStyle({display:"none"}),500)}}}},{"../state/ticketPurchaseState":"8lBgN","../productionList":"6zyyu","../performanceList":"h28oA","../ticketTiers":"bBABM","../components/sidebarIndicators":"i8KxD","@xatom/core":"65YBq","../components/selectedPerformanceUI":"ldUYM","../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=makeTicketPurchase.46f9ecd7.js.map
