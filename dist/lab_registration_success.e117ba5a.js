!function(e,t,r,o,s){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n="function"==typeof i[o]&&i[o],a=n.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,r){if(!a[t]){if(!e[t]){var s="function"==typeof i[o]&&i[o];if(!r&&s)return s(t,!0);if(n)return n(t,!0);if(l&&"string"==typeof t)return l(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}g.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},g.cache={};var d=a[t]=new c.Module(t);e[t][0].call(d.exports,g,d,d.exports,this)}return a[t].exports;function g(e){var t=g.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=a,c.parent=n,c.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return i[o]}}),i[o]=c;for(var u=0;u<t.length;u++)c(t[u])}({kheiv:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"handleLabRegistrationSuccess",()=>d);var s=e("@xatom/core"),i=e("@xatom/image"),n=e("../../api/apiConfig");let a=()=>{let e=new URLSearchParams(window.location.search);return e.get("order")||e.get("session_id")},l=e=>e.workshop_details?.Main_Image||e.program_details?.Main_Image||null,c=e=>{let t=new Map;for(let r of e){let e=r.workshop_id??r.workshop_details?.id??Math.abs((r.workshop_name||"").toLowerCase().split("").reduce((e,t)=>e+t.charCodeAt(0),0)),o=t.get(e)??[];o.push(r),t.set(e,o)}let r=[];for(let e of t.values()){let t=e.slice().sort((e,t)=>(e.session_details?.Start_Date??Number.MAX_SAFE_INTEGER)-(t.session_details?.Start_Date??Number.MAX_SAFE_INTEGER))[0];r.push(t)}return r.sort((e,t)=>{let r=e.session_details?.Start_Date??Number.MAX_SAFE_INTEGER,o=t.session_details?.Start_Date??Number.MAX_SAFE_INTEGER;return r!==o?r-o:(e.workshop_name||"").localeCompare(t.workshop_name||"")}),r},u=(e,t,r)=>{let o=e.querySelector(`#${t}, .${r}`);return o?(o.classList.contains(r)||o.classList.add(r),o.id===t&&o.removeAttribute("id"),o):null};async function d(){let e=a();if(!e){console.error("Missing order/session_id param in URL");return}let t=(0,n.apiClient).get(`/success_page/lab_registration/${encodeURIComponent(e)}`);try{let{data:r}=await new Promise((e,r)=>{t.onData(t=>e(t)),t.onError(r),t.fetch()}),o=Array.isArray(r)?r:[];o.length||console.warn("No lab registrations returned.");let n=c(o),a=new s.WFDynamicList("#labList",{rowSelector:"#labRegistrationCard"});a.rowRenderer(({rowData:t,rowElement:r})=>{let o=r.getElement();o.classList.add("js-labRegistrationCard"),"labRegistrationCard"===o.id&&o.removeAttribute("id");let n=u(o,"labCardImage","js-labCardImage"),a=u(o,"labCardProgram","js-labCardProgram"),c=u(o,"labCardWorkshop","js-labCardWorkshop");if(n instanceof HTMLImageElement){let e=new i.WFImage(n),r=l(t);r&&e.setImage(r),e.getElement().alt=`${t.program_name} \u{2014} ${t.workshop_name}`}a&&new(0,s.WFComponent)(a).setText(t.program_name||""),c&&new(0,s.WFComponent)(c).setText(t.workshop_name||"");try{let r=o.getAttribute("href")||"#",s=new URL(r,window.location.origin);s.searchParams.set("order",t.checkout_session_id||e),s.searchParams.set("program",String(t.program_details?.id??"")),s.searchParams.set("subscription","none"),o.setAttribute("href",s.toString())}catch{}return o.style.display="block",r}),a.setData(n);let d=document.getElementById("labList");d&&(d.style.display="block"),document.querySelector(".success_trigger")?.click()}catch(e){console.error("Error loading lab registration list:",e)}}document.addEventListener("DOMContentLoaded",d)},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var o,s=e("d023971cccd819e3"),i={};Object.defineProperty(i,"WFImage",{get:()=>n,set:void 0,enumerable:!0,configurable:!0});class n extends s.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}o=t.exports,Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return i[e]}})})},{d023971cccd819e3:"65YBq"}]},[],0,"parcelRequired346");
//# sourceMappingURL=lab_registration_success.e117ba5a.js.map
