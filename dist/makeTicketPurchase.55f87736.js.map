{"mappings":"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","sources":["src/modules/tickets/makeTicketPurchase.ts","src/modules/tickets/productionList.ts","src/api/productions.ts","src/modules/tickets/state/ticketPurchaseState.ts","src/modules/tickets/performanceList.ts","src/api/performances.ts","src/modules/tickets/components/performanceFilter.ts","src/modules/tickets/ticketTiers.ts","src/api/ticketTiersAPI.ts","src/modules/tickets/components/ticketTierListRender.ts","src/modules/tickets/components/bundleRenderer.ts","src/modules/tickets/state/bundleStateUpdater.ts","src/modules/tickets/components/ticketTierRenderer.ts","src/utils/formUtils.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js","src/modules/tickets/components/selectedPerformanceUI.ts","src/modules/tickets/components/customQuestionUI.ts","src/modules/tickets/components/assistanceInputUI.ts","src/modules/tickets/components/userDetailsUI.ts","node_modules/.pnpm/@xatom+slider@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/slider/dist/index.js","src/modules/tickets/components/sidebarIndicators.ts","src/utils/validationUtils.ts","src/modules/tickets/components/urlParamNavigator.ts"],"sourcesContent":["import { WFComponent, WFFormComponent } from \"@xatom/core\";\nimport { initializeProductionList } from \"./productionList\";\nimport { initializePerformanceList } from \"./performanceList\";\nimport { initializeTicketTiers } from \"./ticketTiers\";\nimport {\n  getSelectedProduction,\n  getSelectedPerformance,\n  loadTicketPurchaseState,\n  getSelectedBundles,\n  getSelectedTickets,\n  clearTicketPurchaseState,\n  clearSelectedPerformance,\n  clearSelectedBundles,\n  clearSelectedTickets,\n} from \"./state/ticketPurchaseState\";\nimport { WFSlider } from \"@xatom/slider\";\nimport {\n  initializeTicketSidebarIndicators,\n  setActiveTicketStep,\n  markTicketStepAsCompleted,\n  unsetActiveTicketStep,\n  unmarkTicketStepAsCompleted,\n} from \"./components/sidebarIndicators\";\nimport { validateNotEmpty, validateEmail } from \"../../utils/validationUtils\";\nimport { toggleError, createValidationFunction } from \"../../utils/formUtils\";\nimport { apiClient } from \"../../api/apiConfig\";\nimport { initializeStateFromUrlParams } from \"./components/urlParamNavigator\";\n\ninterface checkoutResponse {\n  checkout_url: string;\n}\n\n// Initialize the ticket purchase process\nexport const makeTicketPurchase = async () => {\n  const slider = new WFSlider(\".multi-step_form_slider\");\n\n  // Initialize state from URL parameters\n  await initializeStateFromUrlParams(slider);\n\n  // Initialize sidebar indicators\n  initializeTicketSidebarIndicators();\n\n  // Step 1: Initialize production list\n  await initializeProductionList(\"#selectProductionList\");\n\n  // Handle form submission for production selection\n  const formStepOne = new WFFormComponent<{ production_id: string }>(\n    \"#formStepOne\"\n  );\n\n  formStepOne.onFormSubmit(async (formData, event) => {\n    event.preventDefault();\n    const selectedProduction = getSelectedProduction();\n    const stepOneRequestingAnimation = new WFComponent(\n      \"#stepOneRequestingAnimation\"\n    );\n\n    if (!selectedProduction || !selectedProduction.id) {\n      console.error(\"No production selected.\");\n      const submitStepOneError = new WFComponent(\"#submitStepOneError\");\n      submitStepOneError.setText(\"Please select a production.\");\n      submitStepOneError.setStyle({ display: \"block\" });\n      return;\n    }\n\n    console.log(\"Production selected:\", selectedProduction);\n\n    const submitStepOneError = new WFComponent(\"#submitStepOneError\");\n    submitStepOneError.setStyle({ display: \"none\" });\n\n    // Show the loading animation\n    stepOneRequestingAnimation.setStyle({ display: \"block\" });\n\n    try {\n      // Proceed to Step 2: Initialize performance list\n      await initializePerformanceList(\"#selectPerformanceList\");\n\n      // Mark Step 1 as completed and move to Step 2\n      markTicketStepAsCompleted(1);\n      setActiveTicketStep(2);\n\n      // Move to the next step\n      slider.goNext();\n    } catch (error) {\n      console.error(\"Error during step 1 processing:\", error);\n    } finally {\n      // Hide the loading animation\n      stepOneRequestingAnimation.setStyle({ display: \"none\" });\n    }\n  });\n\n  // Step 2: Handle form submission for performance selection\n  const formStepTwo = new WFFormComponent<{ performance_id: string }>(\n    \"#formStepTwo\"\n  );\n\n  formStepTwo.onFormSubmit(async (formData, event) => {\n    event.preventDefault();\n    const selectedPerformance = getSelectedPerformance();\n    const stepTwoRequestingAnimation = new WFComponent(\n      \"#stepTwoRequestingAnimation\"\n    );\n\n    if (!selectedPerformance || !selectedPerformance.id) {\n      console.error(\"No performance selected.\");\n      const submitStepTwoError = new WFComponent(\"#submitStepTwoError\");\n      submitStepTwoError.setText(\"Please select a performance.\");\n      submitStepTwoError.setStyle({ display: \"block\" });\n      return;\n    }\n\n    console.log(\"Performance selected:\", selectedPerformance);\n\n    const submitStepTwoError = new WFComponent(\"#submitStepTwoError\");\n    submitStepTwoError.setStyle({ display: \"none\" });\n\n    // Show the loading animation\n    stepTwoRequestingAnimation.setStyle({ display: \"block\" });\n\n    try {\n      // Mark Step 2 as completed and move to Step 3\n      markTicketStepAsCompleted(2);\n      setActiveTicketStep(3);\n\n      // Initialize ticket tiers (Step 3)\n      await initializeTicketTiers(\"#bundleList\", \"#ticketTierList\");\n\n      // Move to the next step\n      slider.goNext();\n    } catch (error) {\n      console.error(\"Error during step 2 processing:\", error);\n    } finally {\n      // Hide the loading animation\n      stepTwoRequestingAnimation.setStyle({ display: \"none\" });\n    }\n  });\n\n  // Step 3: Handle form submission for final checkout\n  const formStepThree = new WFFormComponent(\"#formStepThree\");\n  const emailWrap = new WFComponent(\"#emailWrap\");\n  const firstNameInput = new WFComponent(\"#firstNameInput\");\n  const lastNameInput = new WFComponent(\"#lastNameInput\");\n  const emailInput = new WFComponent(\"#emailInput\");\n  const customQuestionInput = new WFComponent(\"#customQuestionInput\");\n  const submitStepThreeError = new WFComponent(\"#submitStepThreeError\");\n  const noTicketsError = new WFComponent(\"#noTicketsError\");\n\n  // Function to clear errors on interaction\n  const clearErrorOnInteraction = (\n    inputComponent: WFComponent,\n    errorComponent: WFComponent\n  ) => {\n    const clearError = () => toggleError(errorComponent, \"\", false);\n    inputComponent.on(\"input\", clearError);\n    inputComponent.on(\"focus\", clearError);\n    inputComponent.on(\"change\", clearError);\n  };\n\n  formStepThree.onFormSubmit(async (formData, event) => {\n    event.preventDefault();\n    let formIsValid = true;\n\n    // clear any existing submit errors\n    submitStepThreeError.setStyle({ display: \"none\" });\n\n    // Validate email wrap section if displayed\n    if (emailWrap.getElement().style.display !== \"none\") {\n      // Validate First Name\n      const firstNameError = new WFComponent(\"#firstNameInputError\");\n      const firstNameValidation = createValidationFunction(\n        firstNameInput,\n        validateNotEmpty,\n        \"First name is required.\"\n      );\n      const firstNameValidationResult = firstNameValidation();\n      toggleError(\n        firstNameError,\n        firstNameValidationResult,\n        !!firstNameValidationResult\n      );\n      formIsValid = formIsValid && !firstNameValidationResult;\n      clearErrorOnInteraction(firstNameInput, firstNameError);\n\n      // Validate Last Name\n      const lastNameError = new WFComponent(\"#lastNameInputError\");\n      const lastNameValidation = createValidationFunction(\n        lastNameInput,\n        validateNotEmpty,\n        \"Last name is required.\"\n      );\n      const lastNameValidationResult = lastNameValidation();\n      toggleError(\n        lastNameError,\n        lastNameValidationResult,\n        !!lastNameValidationResult\n      );\n      formIsValid = formIsValid && !lastNameValidationResult;\n      clearErrorOnInteraction(lastNameInput, lastNameError);\n\n      // Validate Email\n      const emailError = new WFComponent(\"#emailInputError\");\n      const emailValidation = createValidationFunction(\n        emailInput,\n        validateEmail,\n        \"A valid email is required.\"\n      );\n      const emailValidationResult = emailValidation();\n      toggleError(emailError, emailValidationResult, !!emailValidationResult);\n      formIsValid = formIsValid && !emailValidationResult;\n      clearErrorOnInteraction(emailInput, emailError);\n    }\n\n    // Validate Custom Question\n    const customQuestionError = new WFComponent(\"#customQuestionInputError\");\n    const customQuestionValidation = createValidationFunction(\n      customQuestionInput,\n      validateNotEmpty,\n      \"This field is required.\"\n    );\n    const customQuestionValidationResult = customQuestionValidation();\n    toggleError(\n      customQuestionError,\n      customQuestionValidationResult,\n      !!customQuestionValidationResult\n    );\n    formIsValid = formIsValid && !customQuestionValidationResult;\n    clearErrorOnInteraction(customQuestionInput, customQuestionError);\n\n    // Validate that at least one bundle or ticket is selected\n    const selectedBundles = getSelectedBundles();\n    const selectedTickets = getSelectedTickets();\n\n    if (selectedBundles.length === 0 && selectedTickets.length === 0) {\n      toggleError(\n        noTicketsError,\n        \"Please select at least one bundle or ticket.\",\n        true\n      );\n      formIsValid = false;\n    } else {\n      toggleError(noTicketsError, \"\", false);\n    }\n\n    if (!formIsValid) {\n      console.error(\"Form validation failed.\");\n      submitStepThreeError.setText(\"Please correct the highlighted errors.\");\n      submitStepThreeError.setStyle({ display: \"block\" });\n      return;\n    }\n\n    console.log(\"Final form is valid, proceeding with submission...\");\n\n    const stepThreeRequestingAnimation = new WFComponent(\n      \"#stepThreeRequestingAnimation\"\n    );\n    stepThreeRequestingAnimation.setStyle({ display: \"block\" });\n\n    try {\n      // Load the current state\n      const ticketPurchaseState = loadTicketPurchaseState();\n\n      // Extract only the required values from the state\n      const {\n        selectedBundles,\n        selectedTickets,\n        email,\n        firstName,\n        lastName,\n        customQuestion,\n        assistanceNeeded,\n        assistanceMessage,\n        selectedProductionId,\n        selectedPerformanceId,\n      } = ticketPurchaseState;\n\n      // Construct the cancel_url\n      const cancelUrl = `${window.location.origin}/purchase-tickets?production=${selectedProductionId}&performance=${selectedPerformanceId}`;\n\n      // Create the payload with only the required values and the cancel_url\n      const payload = {\n        selectedBundles,\n        selectedTickets,\n        email,\n        firstName,\n        lastName,\n        customQuestion,\n        assistanceNeeded,\n        assistanceMessage,\n        selectedProductionId,\n        selectedPerformanceId,\n        cancel_url: cancelUrl,\n      };\n\n      // Submit the extracted state to the /tickets/begin_checkout endpoint\n      const response = await apiClient\n        .post<checkoutResponse>(\"/tickets/begin_checkout\", {\n          data: payload,\n        })\n        .fetch();\n\n      // Handle the response (e.g., redirect to the payment page or show success message)\n      console.log(\"Checkout response:\", response);\n\n      // Mark Step 3 as completed\n      markTicketStepAsCompleted(3);\n\n      // Redirect or show success (this depends on your application flow)\n      window.location.href = response.checkout_url || \"/payment\";\n    } catch (error) {\n      console.error(\"Error during final step processing:\", error);\n      submitStepThreeError.setText(\n        \"An error occurred during checkout. Please try again.\"\n      );\n      submitStepThreeError.setStyle({ display: \"block\" });\n    } finally {\n      stepThreeRequestingAnimation.setStyle({ display: \"none\" });\n    }\n  });\n\n  // Handle \"Go Back\" button for Step 3\n  const backStepThree = new WFComponent(\"#backStepThree\");\n  backStepThree.on(\"click\", () => {\n    clearSelectedBundles();\n    clearSelectedTickets();\n    slider.goPrevious();\n    unsetActiveTicketStep(3);\n    unmarkTicketStepAsCompleted(2);\n    setActiveTicketStep(2);\n  });\n\n  // Handle \"Go Back\" button for Step 2\n  const backStepTwo = new WFComponent(\"#backStepTwo\");\n  backStepTwo.on(\"click\", () => {\n    clearSelectedPerformance();\n    slider.goPrevious();\n    unsetActiveTicketStep(2);\n    unmarkTicketStepAsCompleted(1);\n    setActiveTicketStep(1);\n  });\n\n  // Initialize sidebar indicators and set the first step as active\n  setActiveTicketStep(1);\n};\n","import { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { fetchProductions, Production } from \"../../api/productions\";\nimport { saveSelectedProduction } from \"./state/ticketPurchaseState\";\n\nlet selectedProductionId: string | null = null;\nlet initialTemplateState: HTMLElement | null = null;\n\nexport const initializeProductionList = async (\n  containerSelector: string\n): Promise<Production[]> => {\n  // Update return type to Promise<Production[]>\n  const container = document.querySelector(containerSelector);\n  if (!container) {\n    console.error(\"Production list container not found.\");\n    return [];\n  }\n\n  if (!initialTemplateState) {\n    initialTemplateState = container.cloneNode(true) as HTMLElement;\n  }\n\n  container.innerHTML = \"\";\n  container.appendChild(initialTemplateState.cloneNode(true));\n\n  const list = new WFDynamicList<Production>(containerSelector, {\n    rowSelector: \"#cardSelectProduction\",\n    loaderSelector: \"#productionListLoading\",\n    emptySelector: \"#productionListEmpty\",\n  });\n\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({ display: \"flex\" });\n    return loaderElement;\n  });\n\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({ display: \"flex\" });\n    return emptyElement;\n  });\n\n  list.rowRenderer(({ rowData, rowElement, index }) => {\n    const productionCard = new WFComponent(rowElement);\n    const productionTitle = productionCard.getChildAsComponent(\n      \"#cardProductionTitle\"\n    );\n    const productionDescription = productionCard.getChildAsComponent(\n      \"#cardProductionDescription\"\n    );\n    const productionAges = productionCard.getChildAsComponent(\n      \"#cardProductionAges\"\n    );\n    const productionImage = productionCard.getChildAsComponent(\n      \"#cardProductionImage\"\n    );\n    const productionInput =\n      productionCard.getChildAsComponent(\".input_card_input\");\n    const productionLabel = productionCard.getChildAsComponent(\"label\");\n\n    if (\n      !productionTitle ||\n      !productionDescription ||\n      !productionAges ||\n      !productionInput ||\n      !productionImage ||\n      !productionLabel\n    ) {\n      console.error(\"Production elements not found.\");\n      return;\n    }\n\n    if (rowData && rowData.fieldData) {\n      const inputId = `productionInput-${index}`;\n      productionInput.setAttribute(\"id\", inputId);\n      productionInput.setAttribute(\"value\", rowData.id);\n      productionLabel.setAttribute(\"for\", inputId);\n\n      productionTitle.setText(rowData.fieldData.name);\n      productionDescription.setText(rowData.fieldData[\"short-description\"]);\n      productionAges.setText(rowData.fieldData[\"age-description\"]);\n\n      if (rowData.fieldData[\"main-image\"]?.url) {\n        productionImage.setAttribute(\n          \"src\",\n          rowData.fieldData[\"main-image\"].url\n        );\n        productionImage.setAttribute(\n          \"alt\",\n          rowData.fieldData[\"main-image\"].alt || \"Production Image\"\n        );\n      } else {\n        console.warn(`Production ID ${rowData.id} does not have a main image.`);\n      }\n\n      productionInput.on(\"change\", () => {\n        selectedProductionId = (\n          productionInput.getElement() as HTMLInputElement\n        ).value;\n        saveSelectedProduction({\n          id: rowData.id,\n          name: rowData.fieldData.name,\n          description: rowData.fieldData[\"short-description\"],\n          imageUrl: rowData.fieldData[\"main-image\"].url, // Save production image URL\n        });\n        console.log(\"Selected Production ID:\", selectedProductionId);\n      });\n\n      rowElement.setStyle({ display: \"flex\" });\n    } else {\n      console.error(\"Incomplete production data:\", rowData);\n    }\n\n    return rowElement;\n  });\n\n  try {\n    list.changeLoadingStatus(true);\n    const productions = await fetchProductions();\n    console.log(\"Fetched productions:\", productions);\n\n    if (productions.length > 0) {\n      list.setData(productions);\n    } else {\n      list.setData([]); // Trigger the empty state\n    }\n\n    list.changeLoadingStatus(false);\n    return productions; // Return the list of productions\n  } catch (error) {\n    console.error(\"Error loading productions:\", error);\n    list.setData([]);\n    list.changeLoadingStatus(false);\n    return []; // Return an empty array in case of error\n  }\n};\n","import { apiClient } from \"./apiConfig\";\n\nexport interface Production {\n  id: string;\n  fieldData: {\n    name: string;\n    slug: string;\n    subheading: string;\n    ageDescription: string;\n    shortDescription: string;\n    mainImage: {\n      url: string;\n      alt: string | null;\n    };\n  };\n}\n\ninterface ProductionApiResponse {\n  productions: Production[];\n}\n\n// Fetch productions from the server\nexport const fetchProductions = async (): Promise<Production[]> => {\n  try {\n    const response = await apiClient\n      .get<ProductionApiResponse>(\"/tickets/productions\")\n      .fetch();\n    return response.productions;\n  } catch (error) {\n    console.error(\"Error fetching productions:\", error);\n    throw error;\n  }\n};\n","export interface TicketItem {\n  ticket_tier_id: string;\n  quantity: number;\n  bundle_required: boolean;\n}\n\nexport interface BundleItem {\n  bundle_id: string;\n  quantity: number;\n}\n\nexport interface TicketPurchaseState {\n  selectedProductionId?: string;\n  selectedProductionName?: string;\n  selectedProductionDescription?: string;\n  selectedProductionImageUrl?: string;\n  selectedPerformanceId?: string;\n  selectedPerformanceName?: string;\n  selectedPerformanceDateTime?: string;\n  selectedPerformanceDescription?: string;\n  selectedPerformanceImageUrl?: string;\n  selectedPerformanceLocation?: string;\n  selectedBundles?: BundleItem[];\n  selectedTickets?: TicketItem[];\n  customQuestion?: string;\n  assistanceNeeded?: boolean;\n  assistanceMessage?: string;\n  firstName?: string;\n  lastName?: string;\n  email?: string;\n}\n\nconst TICKET_PURCHASE_STATE_KEY = \"ticketPurchaseState\";\n\n// Utility function to safely convert unknown types to number\nconst safeNumber = (value: unknown): number =>\n  typeof value === \"number\" ? value : 0;\n\nexport const loadTicketPurchaseState = (): TicketPurchaseState => {\n  const savedState = localStorage.getItem(TICKET_PURCHASE_STATE_KEY);\n  return savedState ? JSON.parse(savedState) : {};\n};\n\nexport const saveTicketPurchaseState = (\n  state: Partial<TicketPurchaseState>\n) => {\n  const currentState = loadTicketPurchaseState();\n  const newState = { ...currentState, ...state };\n  localStorage.setItem(TICKET_PURCHASE_STATE_KEY, JSON.stringify(newState));\n};\n\nexport const clearTicketPurchaseState = () => {\n  localStorage.removeItem(TICKET_PURCHASE_STATE_KEY);\n};\n\n// Production-related functions\nexport const getSelectedProduction = () => {\n  const state = loadTicketPurchaseState();\n  return {\n    id: state.selectedProductionId || null,\n    name: state.selectedProductionName || null,\n    description: state.selectedProductionDescription || null,\n    imageUrl: state.selectedProductionImageUrl || null, // Retrieve production image URL\n  };\n};\n\nexport const saveSelectedProduction = (production: {\n  id: string;\n  name: string;\n  description: string;\n  imageUrl: string; // Store production image URL\n}) => {\n  saveTicketPurchaseState({\n    selectedProductionId: production.id,\n    selectedProductionName: production.name,\n    selectedProductionDescription: production.description,\n    selectedProductionImageUrl: production.imageUrl, // Save production image URL\n  });\n};\n\n// Performance-related functions\nexport const getSelectedPerformance = () => {\n  const state = loadTicketPurchaseState();\n  return {\n    id: state.selectedPerformanceId || null,\n    name: state.selectedPerformanceName || null,\n    dateTime: state.selectedPerformanceDateTime || null,\n    imageUrl: state.selectedPerformanceImageUrl || null,\n    location: state.selectedPerformanceLocation || null, // Retrieve performance location\n  };\n};\n\nexport const saveSelectedPerformance = (performance: {\n  id: string;\n  name: string;\n  dateTime: string;\n  description: string;\n  imageUrl: string;\n  location: string;\n}) => {\n  saveTicketPurchaseState({\n    selectedPerformanceId: performance.id,\n    selectedPerformanceName: performance.name,\n    selectedPerformanceDateTime: performance.dateTime,\n    selectedPerformanceDescription: performance.description, // Save description to state\n    selectedPerformanceImageUrl: performance.imageUrl,\n    selectedPerformanceLocation: performance.location,\n  });\n};\n\n// Bundle-related functions\nexport const getSelectedBundles = (): BundleItem[] => {\n  const state = loadTicketPurchaseState();\n  return state.selectedBundles || [];\n};\n\nexport const saveSelectedBundle = (bundleId: string, quantity: number) => {\n  const bundles = getSelectedBundles();\n  const existingBundle = bundles.find((b) => b.bundle_id === bundleId);\n\n  if (existingBundle) {\n    if (quantity > 0) {\n      existingBundle.quantity = quantity;\n    } else {\n      // Remove bundle if quantity is 0\n      const index = bundles.indexOf(existingBundle);\n      bundles.splice(index, 1);\n    }\n  } else if (quantity > 0) {\n    bundles.push({ bundle_id: bundleId, quantity });\n  }\n\n  saveTicketPurchaseState({ selectedBundles: bundles });\n};\n\nexport const removeSelectedBundle = (bundleId: string) => {\n  const bundles = getSelectedBundles();\n  const updatedBundles = bundles.filter((b) => b.bundle_id !== bundleId);\n  saveTicketPurchaseState({ selectedBundles: updatedBundles });\n\n  // After removing a bundle, check if any bundle is selected and remove \"bundle_required\" tickets if none are selected\n  removeBundleRequiredTicketsIfNeeded();\n};\n\n// New function to remove \"bundle_required: true\" tickets if no bundles are selected\nexport const removeBundleRequiredTicketsIfNeeded = () => {\n  const bundles = getSelectedBundles();\n  const totalBundlesSelected = bundles.reduce(\n    (sum, bundle) => sum + safeNumber(bundle.quantity),\n    0\n  );\n\n  if (totalBundlesSelected <= 0) {\n    const tickets = getSelectedTickets();\n    const updatedTickets = tickets.filter((t) => !t.bundle_required);\n    saveTicketPurchaseState({ selectedTickets: updatedTickets });\n  }\n};\n\n// Ticket-related functions\nexport const getSelectedTickets = (): TicketItem[] => {\n  const state = loadTicketPurchaseState();\n  return state.selectedTickets || [];\n};\n\nexport const saveSelectedTicket = (\n  ticket_tier_id: string,\n  quantity: number,\n  bundle_required: boolean\n) => {\n  const tickets = getSelectedTickets();\n  const existingTicket = tickets.find(\n    (t) => t.ticket_tier_id === ticket_tier_id\n  );\n\n  if (existingTicket) {\n    if (quantity > 0) {\n      existingTicket.quantity = quantity;\n    } else {\n      // Remove ticket if quantity is 0\n      const index = tickets.indexOf(existingTicket);\n      tickets.splice(index, 1);\n    }\n  } else if (quantity > 0) {\n    tickets.push({ ticket_tier_id, quantity, bundle_required });\n  }\n\n  saveTicketPurchaseState({ selectedTickets: tickets });\n};\n\nexport const removeSelectedTicket = (ticket_tier_id: string) => {\n  const tickets = getSelectedTickets();\n  const updatedTickets = tickets.filter(\n    (t) => t.ticket_tier_id !== ticket_tier_id\n  );\n  saveTicketPurchaseState({ selectedTickets: updatedTickets });\n};\n\n// Assistance-related functions\nexport const getCustomQuestion = () => {\n  const state = loadTicketPurchaseState();\n  return state.customQuestion || null;\n};\n\nexport const saveCustomQuestion = (question: string) => {\n  saveTicketPurchaseState({ customQuestion: question });\n};\n\nexport const getAssistanceNeeded = (): boolean => {\n  const state = loadTicketPurchaseState();\n  return state.assistanceNeeded || false; // Default to false if not set\n};\n\nexport const saveAssistanceNeeded = (needed: boolean) => {\n  saveTicketPurchaseState({ assistanceNeeded: needed });\n};\n\nexport const getAssistanceMessage = (): string => {\n  const state = loadTicketPurchaseState();\n  return state.assistanceMessage || \"\"; // Default to empty string if not set\n};\n\nexport const saveAssistanceMessage = (message: string) => {\n  saveTicketPurchaseState({ assistanceMessage: message });\n};\n\n// User-related functions\nexport const saveUserDetails = (details: {\n  firstName?: string;\n  lastName?: string;\n  email?: string;\n}) => {\n  saveTicketPurchaseState(details);\n};\n\n// Function to clear the selected performance from the state\nexport const clearSelectedPerformance = () => {\n  saveTicketPurchaseState({\n    selectedPerformanceId: undefined,\n    selectedPerformanceName: undefined,\n    selectedPerformanceDateTime: undefined,\n    selectedPerformanceDescription: undefined,\n    selectedPerformanceImageUrl: undefined,\n    selectedPerformanceLocation: undefined,\n  });\n};\n\n// Function to clear the selected bundles from the state\nexport const clearSelectedBundles = () => {\n  saveTicketPurchaseState({\n    selectedBundles: [],\n  });\n};\n\n// Function to clear the selected tickets from the state\nexport const clearSelectedTickets = () => {\n  saveTicketPurchaseState({\n    selectedTickets: [],\n  });\n};\n","import { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { fetchPerformances, Performance } from \"../../api/performances\";\nimport {\n  saveSelectedPerformance,\n  getSelectedProduction,\n} from \"./state/ticketPurchaseState\";\nimport { initializePerformanceFilter } from \"./components/performanceFilter\"; // Import the filtering initialization\n\nlet selectedPerformanceId: string | null = null;\nlet initialTemplateState: HTMLElement | null = null;\n\nexport const initializePerformanceList = async (\n  containerSelector: string\n): Promise<Performance[]> => {\n  // Update return type to Promise<Performance[]>\n  const container = document.querySelector(containerSelector);\n  if (!container) {\n    console.error(\"Performance list container not found.\");\n    return [];\n  }\n\n  if (!initialTemplateState) {\n    initialTemplateState = container.cloneNode(true) as HTMLElement;\n  }\n\n  container.innerHTML = \"\";\n  container.appendChild(initialTemplateState.cloneNode(true));\n\n  const list = new WFDynamicList<Performance>(containerSelector, {\n    rowSelector: \"#cardSelectPerformance\",\n    loaderSelector: \"#performanceListLoading\",\n    emptySelector: \"#performanceListEmpty\",\n  });\n\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({ display: \"flex\" });\n    return loaderElement;\n  });\n\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({ display: \"flex\" });\n    return emptyElement;\n  });\n\n  list.rowRenderer(({ rowData, rowElement, index }) => {\n    const performanceCard = new WFComponent(rowElement);\n    const performanceDateWrapper = performanceCard.getChildAsComponent(\n      \".production_date_wrapper\"\n    );\n    const performanceDay =\n      performanceDateWrapper?.getChildAsComponent(\".u-text-h4\");\n    const performanceMonth = performanceDateWrapper?.getChildAsComponent(\n      \".production_date_month\"\n    );\n    const performanceTime = performanceDateWrapper?.getChildAsComponent(\n      \".input_card_description\"\n    );\n\n    const performanceWeekday = performanceCard.getChildAsComponent(\n      \"#cardProductionTitle\" // Assuming this is the correct selector for the weekday element\n    );\n\n    const performanceTitle = performanceCard.getChildAsComponent(\n      \"#cardPerformanceTitle\"\n    );\n    const performanceProductionTitle = performanceCard.getChildAsComponent(\n      \"#cardPerformanceProductionTitle\"\n    );\n    const performanceDescription = performanceCard.getChildAsComponent(\n      \"#cardPerformanceDescription\"\n    );\n    const performanceImage = performanceCard.getChildAsComponent(\"#cardImage\");\n    const performanceInput =\n      performanceCard.getChildAsComponent(\".input_card_input\");\n    const performanceLabel = performanceCard.getChildAsComponent(\"label\");\n    const performanceLocation = performanceCard.getChildAsComponent(\n      \"#cardPerformanceLocation\" // Assuming this is the correct selector for location\n    );\n\n    if (\n      !performanceDay ||\n      !performanceMonth ||\n      !performanceTime ||\n      !performanceWeekday ||\n      !performanceTitle ||\n      !performanceProductionTitle ||\n      !performanceDescription ||\n      !performanceInput ||\n      !performanceImage ||\n      !performanceLabel ||\n      !performanceLocation\n    ) {\n      console.error(\"Performance elements not found.\");\n      return;\n    }\n\n    if (rowData && rowData.fieldData) {\n      const inputId = `performanceInput-${index}`;\n      performanceInput.setAttribute(\"id\", inputId);\n      performanceInput.setAttribute(\"value\", rowData.id);\n      performanceLabel.setAttribute(\"for\", inputId);\n\n      const date = new Date(rowData.fieldData[\"date-time\"]);\n\n      performanceDay.setText(\n        date.toLocaleString(\"en-US\", {\n          day: \"numeric\",\n          timeZone: \"America/New_York\",\n        })\n      );\n      performanceMonth.setText(\n        date.toLocaleString(\"en-US\", {\n          month: \"short\",\n          timeZone: \"America/New_York\",\n        })\n      );\n      performanceTime.setText(\n        date.toLocaleTimeString(\"en-US\", {\n          hour: \"2-digit\",\n          minute: \"2-digit\",\n          timeZone: \"America/New_York\",\n        })\n      );\n\n      performanceWeekday.setText(\n        date.toLocaleString(\"en-US\", {\n          weekday: \"long\",\n          timeZone: \"America/New_York\",\n        })\n      );\n\n      performanceTitle.setText(rowData.fieldData[\"displayed-name\"]);\n\n      // Get the selected production name from the state and set it in the card\n      const selectedProduction = getSelectedProduction();\n      performanceProductionTitle.setText(\n        selectedProduction?.name || \"Unknown Production\"\n      );\n\n      performanceDescription.setText(rowData.fieldData[\"short-description\"]);\n\n      if (rowData.fieldData[\"main-image\"]?.url) {\n        performanceImage.setAttribute(\n          \"src\",\n          rowData.fieldData[\"main-image\"].url\n        );\n        performanceImage.setAttribute(\n          \"alt\",\n          rowData.fieldData[\"main-image\"].alt || \"Performance Image\"\n        );\n      } else {\n        console.warn(\n          `Performance ID ${rowData.id} does not have a main image.`\n        );\n      }\n\n      performanceLocation.setText(rowData.location_name || \"Unknown\");\n\n      performanceInput.on(\"change\", () => {\n        selectedPerformanceId = (\n          performanceInput.getElement() as HTMLInputElement\n        ).value;\n        saveSelectedPerformance({\n          id: rowData.id,\n          name: rowData.fieldData[\"displayed-name\"],\n          dateTime: rowData.fieldData[\"date-time\"],\n          description: rowData.fieldData[\"short-description\"], // Include description here\n          imageUrl: rowData.fieldData[\"main-image\"].url,\n          location: rowData.location_name, // Include location here\n        });\n        console.log(\"Selected Performance ID:\", selectedPerformanceId);\n      });\n\n      rowElement.setStyle({ display: \"flex\" });\n    } else {\n      console.error(\"Incomplete performance data:\", rowData);\n    }\n\n    return rowElement;\n  });\n\n  try {\n    list.changeLoadingStatus(true);\n\n    // Get the selected production ID from the state\n    const selectedProduction = getSelectedProduction();\n    const selectedProductionId = selectedProduction?.id;\n\n    if (!selectedProductionId) {\n      console.error(\"No production selected, cannot fetch performances.\");\n      list.changeLoadingStatus(false);\n      return [];\n    }\n\n    // Fetch performances based on the selected production ID\n    let performances = await fetchPerformances(selectedProductionId);\n\n    // Sort performances by date\n    performances = performances.sort((a, b) => {\n      const dateA = new Date(a.fieldData[\"date-time\"]);\n      const dateB = new Date(b.fieldData[\"date-time\"]);\n      return dateA.getTime() - dateB.getTime();\n    });\n\n    console.log(\"Fetched and sorted performances:\", performances);\n\n    if (performances && performances.length > 0) {\n      list.setData(performances);\n\n      // Initialize the performance filter after data is set\n      initializePerformanceFilter();\n    } else {\n      list.setData([]); // Trigger the empty state\n    }\n\n    list.changeLoadingStatus(false);\n    return performances; // Return the list of performances\n  } catch (error) {\n    console.error(\"Error loading performances:\", error);\n    list.setData([]);\n    list.changeLoadingStatus(false);\n    return []; // Return an empty array in case of error\n  }\n};\n","import { apiClient } from \"./apiConfig\";\n\nexport interface Performance {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    \"date-time\": string;\n    \"short-description\": string;\n    name: string;\n    slug: string;\n    \"parent-production\": string;\n    location: string;\n    \"main-image\": {\n      fileId: string;\n      url: string;\n      alt: string | null;\n    };\n    \"custom-question\": string;\n    \"displayed-name\": string;\n  };\n  location_name: string;\n}\n\ninterface PerformanceApiResponse {\n  performances: Performance[];\n}\n\n// Fetch performances from the server\nexport const fetchPerformances = async (productionId: string) => {\n  try {\n    const response = await apiClient\n      .post<PerformanceApiResponse>(\"/tickets/performances\", {\n        data: { production_id: productionId }, // Send production_id in the body\n      })\n      .fetch();\n    return response.performances;\n  } catch (error) {\n    console.error(\"Error fetching performances:\", error);\n    throw error;\n  }\n};\n","export const initializePerformanceFilter = () => {\n  const locationSelectElement = document.getElementById(\"locationFilter\");\n  const monthSelectElement = document.getElementById(\"monthFilter\");\n\n  if (locationSelectElement) {\n    locationSelectElement.addEventListener(\"change\", () => {\n      applyFilters();\n    });\n  }\n\n  if (monthSelectElement) {\n    monthSelectElement.addEventListener(\"change\", () => {\n      applyFilters();\n    });\n  }\n};\n\nconst applyFilters = () => {\n  const locationSelectElement = document.getElementById(\n    \"locationFilter\"\n  ) as HTMLSelectElement;\n  const monthSelectElement = document.getElementById(\n    \"monthFilter\"\n  ) as HTMLSelectElement;\n\n  const selectedLocation = locationSelectElement?.value || \"N/A\";\n  const selectedMonth = monthSelectElement?.value || \"N/A\";\n\n  filterPerformances(selectedLocation, selectedMonth);\n};\n\nconst filterPerformances = (location: string, month: string) => {\n  const performanceCards = document.querySelectorAll(\".input_card_wrap\");\n  let hasVisibleItems = false;\n\n  performanceCards.forEach((performanceCard) => {\n    const performanceLocationElement = performanceCard.querySelector(\n      \"#cardPerformanceLocation\"\n    ) as HTMLElement;\n    const performanceLocation = performanceLocationElement?.textContent || \"\";\n\n    const performanceMonthElement = performanceCard.querySelector(\n      \".production_date_month\"\n    ) as HTMLElement;\n    const performanceMonth = performanceMonthElement?.textContent || \"\";\n\n    const matchesLocation =\n      location === \"N/A\" || performanceLocation === location;\n    const matchesMonth =\n      month === \"N/A\" || performanceMonth.toUpperCase() === month;\n\n    if (matchesLocation && matchesMonth) {\n      (performanceCard as HTMLElement).style.display = \"flex\";\n      hasVisibleItems = true;\n    } else {\n      (performanceCard as HTMLElement).style.display = \"none\";\n    }\n  });\n\n  // Handle empty state display\n  const emptyStateElement = document.getElementById(\"filterListEmpty\");\n  if (emptyStateElement) {\n    emptyStateElement.style.display = hasVisibleItems ? \"none\" : \"flex\";\n  }\n};\n","import { fetchTicketTiers } from \"../../api/ticketTiersAPI\";\nimport {\n  renderBundles,\n  renderTicketTiers,\n} from \"./components/ticketTierListRender\";\nimport { getSelectedPerformance } from \"./state/ticketPurchaseState\";\nimport { WFComponent } from \"@xatom/core\";\nimport { updateSelectedPerformanceUI } from \"./components/selectedPerformanceUI\";\nimport { updateCustomQuestion } from \"./components/customQuestionUI\";\nimport { initializeAssistanceInput } from \"./components/assistanceInputUI\";\nimport { initializeUserDetails } from \"./components/userDetailsUI\"; // Import the new component\n\nexport const initializeTicketTiers = async (\n  bundleContainerSelector: string,\n  tierContainerSelector: string\n) => {\n  const selectedPerformance = getSelectedPerformance();\n\n  if (!selectedPerformance || !selectedPerformance.id) {\n    console.error(\"No performance selected.\");\n    return;\n  }\n\n  try {\n    // Fetch ticket tiers data based on the selected performance\n    const ticketTierData = await fetchTicketTiers(selectedPerformance.id);\n\n    const { bundles_offered, tickets_offered, performance_details } =\n      ticketTierData;\n\n    // Update the UI with the selected performance details\n    updateSelectedPerformanceUI();\n\n    // Initialize the user details section\n    initializeUserDetails(); // Initialize the user details component\n\n    // Always reset the display style before rendering\n    const bundleContainer = new WFComponent(bundleContainerSelector);\n    if (bundleContainer) {\n      bundleContainer.setStyle({ display: \"block\" }); // Reset to default visible style\n    }\n\n    const tierContainer = new WFComponent(tierContainerSelector);\n    if (tierContainer) {\n      tierContainer.setStyle({ display: \"block\" }); // Reset to default visible style\n    }\n\n    // Flag to check if there are any bundles or tickets\n    let hasBundlesOrTickets = false;\n\n    // Render bundles if available\n    if (bundles_offered.length > 0) {\n      renderBundles(bundles_offered, bundleContainerSelector);\n      hasBundlesOrTickets = true;\n    } else {\n      if (bundleContainer) {\n        bundleContainer.setStyle({ display: \"none\" }); // Hide if no bundles offered\n      }\n    }\n\n    // Render ticket tiers if available\n    if (tickets_offered.length > 0) {\n      renderTicketTiers(tickets_offered, tierContainerSelector);\n      hasBundlesOrTickets = true;\n    } else {\n      if (tierContainer) {\n        tierContainer.setStyle({ display: \"none\" }); // Hide if no tickets offered\n      }\n    }\n\n    // Show or hide the \"no tickets available\" message\n    const noTicketsAvailableElement = new WFComponent(\"#noTicketsAvailable\");\n    if (noTicketsAvailableElement) {\n      if (!hasBundlesOrTickets) {\n        noTicketsAvailableElement.setStyle({ display: \"flex\" });\n      } else {\n        noTicketsAvailableElement.setStyle({ display: \"none\" });\n      }\n    }\n\n    // Extract the custom question and update the UI\n    const customQuestion = performance_details.fieldData[\"custom-question\"];\n    updateCustomQuestion(customQuestion);\n\n    // Initialize the assistance input logic\n    initializeAssistanceInput(); // Initialize the assistance input component\n  } catch (error) {\n    console.error(\"Error fetching ticket tiers:\", error);\n    // Handle any errors that occur during the ticket tiers fetching process\n  }\n};\n","import { apiClient } from \"./apiConfig\";\nimport { Performance } from \"./performances\"; // Import Performance interface\n\nexport interface TicketTier {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    \"sold-quantity\": number;\n    quantity: number;\n    \"reserved-quantity\": number;\n    name: string;\n    slug: string;\n    \"ticket-tier\": string;\n    \"parent-performance\": string;\n  };\n}\n\nexport interface BundleTicket {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    quantity: number;\n    name: string;\n    slug: string;\n    \"parent-bundle\": string;\n    \"parent-ticket-tier\": string;\n  };\n  amount_available: number;\n}\n\nexport interface BundleOffered {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    \"short-description\": string;\n    name: string;\n    slug: string;\n    product: string;\n    \"parent-performances\": string[];\n    \"displayed-name\": string;\n  };\n  bundle_tickets: BundleTicket[];\n  quantity: number;\n  price: string;\n}\n\nexport interface TicketOffered {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    \"displayed-name\": string;\n    name: string;\n    slug: string;\n    \"parent-performances\": string[];\n    product: string;\n    \"short-description\": string;\n    \"requires-bundle-purchase\": boolean;\n  };\n  quantity: number;\n  price: string;\n}\n\ninterface TicketTiersApiResponse {\n  tickets_available: TicketTier[];\n  bundles_offered: BundleOffered[];\n  tickets_offered: TicketOffered[];\n  performance_details: Performance; // Use the imported Performance interface\n  location_details: {\n    id: string;\n    cmsLocaleId: string;\n    lastPublished: string;\n    lastUpdated: string;\n    createdOn: string;\n    isArchived: boolean;\n    isDraft: boolean;\n    fieldData: {\n      \"address-line-1\": string;\n      \"city-state-zip\": string;\n      \"map-embed\": string;\n      name: string;\n      slug: string;\n    };\n  };\n}\n\n// Fetch ticket tiers from the server\nexport const fetchTicketTiers = async (selectedPerformanceId: string) => {\n  try {\n    const response = await apiClient\n      .post<TicketTiersApiResponse>(\"/tickets/ticket_tiers\", {\n        data: { selectedPerformanceId }, // Send selectedPerformanceId in the body\n      })\n      .fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching ticket tiers:\", error);\n    throw error;\n  }\n};\n","import { renderBundles } from \"./bundleRenderer\";\nimport { renderTicketTiers } from \"./ticketTierRenderer\";\n\nexport { renderBundles, renderTicketTiers };\n","import { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { BundleOffered } from \"../../../api/ticketTiersAPI\";\nimport {\n  saveSelectedBundle,\n  removeSelectedBundle,\n} from \"../state/ticketPurchaseState\";\nimport {\n  resetTicketQuantitiesIfNeeded,\n  updateTicketTierButtons, // Correct import source\n} from \"../state/bundleStateUpdater\";\nimport { revalidateTicketTierQuantities } from \"./ticketTierRenderer\";\nimport { toggleError } from \"../../../utils/formUtils\";\n\nlet initialBundleTemplate: HTMLElement | null = null; // Store the initial template\n\nexport const renderBundles = (\n  bundles: BundleOffered[],\n  containerSelector: string\n) => {\n  const container = document.querySelector(containerSelector);\n  if (!container) {\n    console.error(\"Bundle list container not found.\");\n    return;\n  }\n\n  // Save the initial template state if not already saved\n  if (!initialBundleTemplate) {\n    initialBundleTemplate = container.cloneNode(true) as HTMLElement;\n  }\n\n  // Clear the container and restore the initial template\n  container.innerHTML = \"\";\n  container.appendChild(initialBundleTemplate.cloneNode(true));\n\n  const clearNoTicketsError = () => {\n    const noTicketsError = new WFComponent(\"#noTicketsError\");\n    toggleError(noTicketsError, \"\", false);\n  };\n\n  const list = new WFDynamicList<BundleOffered>(containerSelector, {\n    rowSelector: \"#bundleCard\",\n    loaderSelector: \"#bundleListLoading\",\n    emptySelector: \"#bundleListEmpty\",\n  });\n\n  list.loaderRenderer((loaderElement) => {\n    (loaderElement.getElement() as HTMLElement).style.display = \"flex\";\n    return loaderElement;\n  });\n\n  list.emptyRenderer((emptyElement) => {\n    (emptyElement.getElement() as HTMLElement).style.display = \"flex\";\n    return emptyElement;\n  });\n\n  list.rowRenderer(({ rowData, rowElement, index }) => {\n    const bundleCard = new WFComponent(rowElement);\n    const bundleName = bundleCard.getChildAsComponent(\"#bundleName\");\n    const bundlePrice = bundleCard.getChildAsComponent(\"#bundlePrice\");\n    const bundleSoldOut = bundleCard.getChildAsComponent(\"#bundleSoldOut\");\n    const bundleDescription =\n      bundleCard.getChildAsComponent(\"#bundleDescription\");\n    const bundleQuantityInput = bundleCard.getChildAsComponent(\n      \"#bundleQuantityInput\"\n    );\n    const bundleIncrementButton = bundleCard.getChildAsComponent(\n      \"#bundleQuantityIncrease\"\n    );\n    const bundleDecrementButton = bundleCard.getChildAsComponent(\n      \"#bundleQuantityDecrease\"\n    );\n    const bundleMaxAlert = bundleCard.getChildAsComponent(\".maximum_alert\");\n    const numberInputWrapper = bundleCard.getChildAsComponent(\n      \".number_input_wrapper\"\n    );\n\n    if (\n      !bundleName ||\n      !bundlePrice ||\n      !bundleSoldOut ||\n      !bundleDescription ||\n      !bundleQuantityInput ||\n      !bundleIncrementButton ||\n      !bundleDecrementButton ||\n      !bundleMaxAlert ||\n      !numberInputWrapper\n    ) {\n      console.error(\"Bundle elements not found.\");\n      return;\n    }\n\n    bundleName.setText(rowData.fieldData[\"displayed-name\"]);\n    bundlePrice.setText(`${rowData.price}`);\n    bundleDescription.setText(rowData.fieldData[\"short-description\"]);\n    bundleQuantityInput.setAttribute(\"max\", String(rowData.quantity));\n    bundleQuantityInput.setAttribute(\"value\", \"0\");\n\n    const updateAlertVisibility = () => {\n      const currentQuantity = Number(\n        (bundleQuantityInput.getElement() as HTMLInputElement).value\n      );\n      const maxAlertElement = bundleMaxAlert.getElement() as HTMLElement;\n      if (currentQuantity >= rowData.quantity) {\n        bundleMaxAlert.setText(\n          \"You have reached the maximum available quantity.\"\n        );\n        maxAlertElement.style.display = \"block\";\n      } else {\n        maxAlertElement.style.display = \"none\";\n      }\n    };\n\n    bundleIncrementButton.on(\"click\", () => {\n      const inputElement = bundleQuantityInput.getElement() as HTMLInputElement;\n      let currentQuantity = Number(inputElement.value);\n\n      if (currentQuantity < rowData.quantity) {\n        currentQuantity++;\n        inputElement.value = String(currentQuantity);\n        saveSelectedBundle(rowData.id, currentQuantity);\n        updateTicketTierButtons(); // Enable ticket tier buttons if needed\n        clearNoTicketsError(); // Clear no tickets error\n      }\n\n      updateAlertVisibility();\n      revalidateTicketTierQuantities(); // Revalidate after increment\n    });\n\n    bundleDecrementButton.on(\"click\", () => {\n      const inputElement = bundleQuantityInput.getElement() as HTMLInputElement;\n      let currentQuantity = Number(inputElement.value);\n\n      if (currentQuantity > 0) {\n        currentQuantity--;\n        inputElement.value = String(currentQuantity);\n\n        if (currentQuantity > 0) {\n          saveSelectedBundle(rowData.id, currentQuantity);\n          clearNoTicketsError(); // Clear no tickets error\n        } else {\n          removeSelectedBundle(rowData.id);\n        }\n\n        updateTicketTierButtons(); // Disable ticket tier buttons if needed\n      }\n\n      updateAlertVisibility();\n      resetTicketQuantitiesIfNeeded(); // Reset ticket quantities if bundles are insufficient\n      revalidateTicketTierQuantities(); // Revalidate after decrement\n    });\n\n    bundleQuantityInput.on(\"input\", () => {\n      const inputElement = bundleQuantityInput.getElement() as HTMLInputElement;\n      let currentQuantity = Number(inputElement.value);\n      if (currentQuantity > rowData.quantity) {\n        inputElement.value = String(rowData.quantity);\n        updateAlertVisibility();\n      }\n      revalidateTicketTierQuantities(); // Revalidate on manual input\n      clearNoTicketsError(); // Clear no tickets error on manual input\n    });\n\n    if (rowData.quantity <= 0) {\n      (bundleSoldOut.getElement() as HTMLElement).style.display = \"block\";\n      (bundlePrice.getElement() as HTMLElement).style.display = \"none\";\n      numberInputWrapper.addCssClass(\"is-disabled\");\n    } else {\n      (bundleSoldOut.getElement() as HTMLElement).style.display = \"none\";\n      (bundlePrice.getElement() as HTMLElement).style.display = \"block\";\n      numberInputWrapper.removeCssClass(\"is-disabled\");\n    }\n\n    rowElement.setStyle({ display: \"flex\" });\n\n    return rowElement;\n  });\n\n  list.setData(bundles);\n};\n","import {\n  getSelectedBundles,\n  getSelectedTickets,\n  removeSelectedTicket,\n} from \"../state/ticketPurchaseState\";\n\n// Utility function to safely convert unknown types to number\nconst safeNumber = (value: unknown): number =>\n  typeof value === \"number\" ? value : 0;\n\nexport const resetTicketQuantitiesIfNeeded = () => {\n  const selectedBundles = getSelectedBundles();\n  const totalBundlesSelected = selectedBundles.reduce(\n    (sum, bundle) => sum + safeNumber(bundle.quantity),\n    0\n  );\n\n  const selectedTickets = getSelectedTickets();\n  selectedTickets.forEach((ticket) => {\n    const ticketElement = document.querySelector(\n      `#ticketTierCard[data-id=\"${ticket.ticket_tier_id}\"] #ticketTierQuantityInput`\n    ) as HTMLInputElement;\n\n    if (!ticketElement) return;\n\n    if (ticket.bundle_required && totalBundlesSelected <= 0) {\n      ticketElement.value = \"0\";\n      removeSelectedTicket(ticket.ticket_tier_id);\n    }\n  });\n\n  console.log(\"Updated selectedTickets:\", getSelectedTickets());\n};\n\nexport const updateTicketTierButtons = () => {\n  const selectedBundles = getSelectedBundles();\n  const totalBundlesSelected = selectedBundles.reduce(\n    (sum, bundle) => sum + safeNumber(bundle.quantity),\n    0\n  );\n\n  const ticketTierInputs = document.querySelectorAll<HTMLInputElement>(\n    \"#ticketTierQuantityInput\"\n  );\n  const ticketTierIncrementButtons =\n    document.querySelectorAll<HTMLButtonElement>(\"#ticketTierQuantityIncrease\");\n\n  ticketTierInputs.forEach((input) => {\n    const ticketCard = input.closest(\"#ticketTierCard\");\n    const requiresBundle =\n      ticketCard?.getAttribute(\"data-requires-bundle\") === \"true\";\n\n    if (requiresBundle && totalBundlesSelected <= 0) {\n      input.setAttribute(\"disabled\", \"true\");\n      input.value = \"0\";\n    } else {\n      input.removeAttribute(\"disabled\");\n    }\n  });\n\n  ticketTierIncrementButtons.forEach((button) => {\n    const ticketCard = button.closest(\"#ticketTierCard\");\n    const requiresBundle =\n      ticketCard?.getAttribute(\"data-requires-bundle\") === \"true\";\n\n    if (requiresBundle && totalBundlesSelected <= 0) {\n      button.setAttribute(\"disabled\", \"true\");\n    } else {\n      button.removeAttribute(\"disabled\");\n    }\n  });\n\n  resetTicketQuantitiesIfNeeded();\n};\n","import { WFComponent, WFDynamicList } from \"@xatom/core\";\nimport { TicketOffered } from \"../../../api/ticketTiersAPI\";\nimport {\n  saveSelectedTicket,\n  removeSelectedTicket,\n  getSelectedBundles,\n} from \"../state/ticketPurchaseState\";\nimport { toggleError } from \"../../../utils/formUtils\";\n\nconst safeNumber = (value: unknown): number =>\n  typeof value === \"number\" ? value : 0;\n\nconst clearNoTicketsError = () => {\n  const noTicketsError = new WFComponent(\"#noTicketsError\");\n  toggleError(noTicketsError, \"\", false);\n};\n\nlet initialTicketTierTemplate: HTMLElement | null = null;\n\nexport const revalidateTicketTierQuantities = () => {\n  const ticketTierCards = document.querySelectorAll(\n    \"[data-requires-bundle='true']\"\n  );\n  ticketTierCards.forEach((card) => {\n    const ticketTierMaxAlert = new WFComponent(\n      card.querySelector(\".maximum_alert\")\n    );\n    const ticketTierQuantityInput = new WFComponent(\n      card.querySelector(\"#ticketTierQuantityInput\")\n    );\n\n    const selectedBundles = getSelectedBundles();\n    const totalBundlesSelected = selectedBundles.reduce(\n      (sum, bundle) => sum + safeNumber(bundle.quantity),\n      0\n    );\n\n    if (totalBundlesSelected <= 0) {\n      (ticketTierQuantityInput.getElement() as HTMLInputElement).value = \"0\";\n      ticketTierMaxAlert.setText(\n        \"This item requires a ticket bundle purchase. Please add a ticket bundle from the options above.\"\n      );\n      (ticketTierMaxAlert.getElement() as HTMLElement).style.display = \"block\";\n    } else {\n      (ticketTierMaxAlert.getElement() as HTMLElement).style.display = \"none\";\n    }\n  });\n};\n\nexport const renderTicketTiers = (\n  tickets: TicketOffered[],\n  containerSelector: string\n) => {\n  const container = document.querySelector(containerSelector);\n  if (!container) {\n    console.error(\"Ticket tier list container not found.\");\n    return;\n  }\n\n  if (!initialTicketTierTemplate) {\n    initialTicketTierTemplate = container.cloneNode(true) as HTMLElement;\n  }\n\n  container.innerHTML = \"\";\n  container.appendChild(initialTicketTierTemplate.cloneNode(true));\n\n  const list = new WFDynamicList<TicketOffered>(containerSelector, {\n    rowSelector: \"#ticketTierCard\",\n    loaderSelector: \"#ticketTierListLoading\",\n    emptySelector: \"#ticketTierListEmpty\",\n  });\n\n  list.loaderRenderer((loaderElement) => {\n    (loaderElement.getElement() as HTMLElement).style.display = \"flex\";\n    return loaderElement;\n  });\n\n  list.emptyRenderer((emptyElement) => {\n    (emptyElement.getElement() as HTMLElement).style.display = \"flex\";\n    return emptyElement;\n  });\n\n  list.rowRenderer(({ rowData, rowElement, index }) => {\n    const ticketTierCard = new WFComponent(rowElement);\n    if (rowData.fieldData[\"requires-bundle-purchase\"] === true) {\n      rowElement.setAttribute(\"data-requires-bundle\", \"true\");\n    } else {\n      rowElement.setAttribute(\"data-requires-bundle\", \"false\");\n    }\n\n    const ticketTierName =\n      ticketTierCard.getChildAsComponent(\"#ticketTierName\");\n    const ticketTierPrice =\n      ticketTierCard.getChildAsComponent(\"#ticketTierPrice\");\n    const ticketTierSoldOut =\n      ticketTierCard.getChildAsComponent(\"#ticketTierSoldOut\");\n    const ticketTierDescription = ticketTierCard.getChildAsComponent(\n      \"#ticketTierDescription\"\n    );\n    const ticketTierQuantityInput = ticketTierCard.getChildAsComponent(\n      \"#ticketTierQuantityInput\"\n    );\n    const ticketTierIncrementButton = ticketTierCard.getChildAsComponent(\n      \"#ticketTierQuantityIncrease\"\n    );\n    const ticketTierDecrementButton = ticketTierCard.getChildAsComponent(\n      \"#ticketTierQuantityDecrease\"\n    );\n    const ticketTierMaxAlert =\n      ticketTierCard.getChildAsComponent(\".maximum_alert\");\n    const numberInputWrapper = ticketTierCard.getChildAsComponent(\n      \".number_input_wrapper\"\n    );\n\n    if (\n      !ticketTierName ||\n      !ticketTierPrice ||\n      !ticketTierSoldOut ||\n      !ticketTierDescription ||\n      !ticketTierQuantityInput ||\n      !ticketTierIncrementButton ||\n      !ticketTierDecrementButton ||\n      !ticketTierMaxAlert ||\n      !numberInputWrapper\n    ) {\n      console.error(\"Ticket tier elements not found.\");\n      return;\n    }\n\n    const displayedName =\n      rowData.fieldData[\"displayed-name\"] || \"Unknown Ticket Tier\";\n    const price = rowData.price ? `${rowData.price.toString()}` : \"N/A\";\n    const description = rowData.fieldData[\"short-description\"] || \"\";\n\n    ticketTierName.setText(displayedName);\n    ticketTierPrice.setText(price);\n    ticketTierDescription.setText(description);\n    ticketTierQuantityInput.setAttribute(\"max\", String(rowData.quantity || 0));\n    ticketTierQuantityInput.setAttribute(\"value\", \"0\");\n\n    const updateAlertVisibility = (message: string) => {\n      ticketTierMaxAlert.setText(message);\n      (ticketTierMaxAlert.getElement() as HTMLElement).style.display = \"block\";\n    };\n\n    ticketTierIncrementButton.on(\"click\", () => {\n      const inputElement =\n        ticketTierQuantityInput.getElement() as HTMLInputElement;\n      let currentQuantity = Number(inputElement.value);\n\n      (ticketTierMaxAlert.getElement() as HTMLElement).style.display = \"none\";\n\n      if (rowData.fieldData[\"requires-bundle-purchase\"]) {\n        const selectedBundles = getSelectedBundles();\n        const totalBundlesSelected = selectedBundles.reduce(\n          (sum, bundle) => sum + safeNumber(bundle.quantity),\n          0\n        );\n\n        if (totalBundlesSelected <= 0) {\n          updateAlertVisibility(\n            \"This item requires a ticket bundle purchase. Please add a ticket bundle from the options above.\"\n          );\n          return;\n        }\n      }\n\n      if (currentQuantity < rowData.quantity) {\n        currentQuantity++;\n        inputElement.value = String(currentQuantity);\n        saveSelectedTicket(\n          rowData.id,\n          currentQuantity,\n          rowData.fieldData[\"requires-bundle-purchase\"]\n        );\n        revalidateTicketTierQuantities();\n        clearNoTicketsError();\n      } else {\n        updateAlertVisibility(\n          \"You have reached the maximum available quantity.\"\n        );\n      }\n    });\n\n    ticketTierDecrementButton.on(\"click\", () => {\n      const inputElement =\n        ticketTierQuantityInput.getElement() as HTMLInputElement;\n      let currentQuantity = Number(inputElement.value);\n\n      if (currentQuantity > 0) {\n        currentQuantity--;\n        inputElement.value = String(currentQuantity);\n\n        if (currentQuantity > 0) {\n          saveSelectedTicket(\n            rowData.id,\n            currentQuantity,\n            rowData.fieldData[\"requires-bundle-purchase\"]\n          );\n          clearNoTicketsError();\n        } else {\n          removeSelectedTicket(rowData.id);\n        }\n\n        revalidateTicketTierQuantities();\n      }\n    });\n\n    ticketTierQuantityInput.on(\"input\", () => {\n      const inputElement =\n        ticketTierQuantityInput.getElement() as HTMLInputElement;\n      let currentQuantity = Number(inputElement.value);\n      if (currentQuantity > rowData.quantity) {\n        inputElement.value = String(rowData.quantity);\n        updateAlertVisibility(\n          \"You have reached the maximum available quantity.\"\n        );\n      } else if (\n        rowData.fieldData[\"requires-bundle-purchase\"] &&\n        currentQuantity > 0\n      ) {\n        const selectedBundles = getSelectedBundles();\n        const totalBundlesSelected = selectedBundles.reduce(\n          (sum, bundle) => sum + safeNumber(bundle.quantity),\n          0\n        );\n\n        if (totalBundlesSelected <= 0) {\n          inputElement.value = \"0\";\n          updateAlertVisibility(\n            \"This item requires a ticket bundle purchase. Please add a ticket bundle from the options above.\"\n          );\n        } else {\n          (ticketTierMaxAlert.getElement() as HTMLElement).style.display =\n            \"none\";\n        }\n      } else {\n        (ticketTierMaxAlert.getElement() as HTMLElement).style.display = \"none\";\n      }\n      clearNoTicketsError();\n    });\n\n    if (rowData.quantity <= 0) {\n      (ticketTierSoldOut.getElement() as HTMLElement).style.display = \"block\";\n      (ticketTierPrice.getElement() as HTMLElement).style.display = \"none\";\n      numberInputWrapper.addCssClass(\"is-disabled\");\n    } else {\n      (ticketTierSoldOut.getElement() as HTMLElement).style.display = \"none\";\n      (ticketTierPrice.getElement() as HTMLElement).style.display = \"block\";\n      numberInputWrapper.removeCssClass(\"is-disabled\");\n    }\n\n    rowElement.setStyle({ display: \"flex\" });\n\n    return rowElement;\n  });\n\n  list.setData(tickets);\n};\n","import { WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../api/apiConfig\";\nimport { userAuth } from \"../auth/authConfig\";\n\nexport function toggleError(\n  errorMessageComponent: WFComponent<any>,\n  message: string,\n  show: boolean\n): void {\n  errorMessageComponent.updateTextViaAttrVar({ text: show ? message : \"\" });\n  errorMessageComponent.setStyle({ display: show ? \"flex\" : \"none\" });\n}\n\nexport function setupValidation(\n  inputComponent: WFComponent,\n  errorComponent: WFComponent,\n  validate: () => string,\n  requestErrorComponent?: WFComponent // Optional component to clear on input change\n) {\n  const validateAndUpdate = () => {\n    const errorMessage = validate();\n    toggleError(errorComponent, errorMessage, !!errorMessage);\n    if (requestErrorComponent && errorMessage === \"\") {\n      // Clear request error message when the user is correcting the input\n      toggleError(requestErrorComponent, \"\", false);\n    }\n  };\n\n  // Attach event listeners for real-time validation\n  inputComponent.on(\"input\", validateAndUpdate);\n  inputComponent.on(\"blur\", validateAndUpdate);\n  inputComponent.on(\"change\", validateAndUpdate);\n}\n\nexport function createValidationFunction(\n  inputComponent: WFComponent,\n  validationFn: (input: string) => boolean,\n  errorMessage: string\n): () => string {\n  return () => {\n    const inputElement = inputComponent.getElement() as HTMLInputElement;\n    const isValid = validationFn(inputElement.value);\n    return isValid ? \"\" : errorMessage;\n  };\n}\n\nexport function createCheckboxValidationFunction(\n  checkboxComponent: WFComponent,\n  errorMessage: string\n): () => string {\n  return () => {\n    const checkbox = checkboxComponent.getElement() as HTMLInputElement;\n    return checkbox.checked ? \"\" : errorMessage;\n  };\n}\n\nexport function setupCheckboxValidation(\n  checkboxComponent: WFComponent,\n  checkboxErrorComponent: WFComponent,\n  errorMessage: string\n) {\n  const validate = createCheckboxValidationFunction(\n    checkboxComponent,\n    errorMessage\n  );\n  setupValidation(checkboxComponent, checkboxErrorComponent, validate);\n}\n\nexport function validateSelectedSessions(\n  selectedSessions: { sessionId: string; studentIds: string[] }[],\n  errorMessageComponent: WFComponent<any>,\n  errorMessage: string\n): boolean {\n  const isValid =\n    selectedSessions.length > 0 &&\n    selectedSessions.some((session) => session.studentIds.length > 0);\n\n  if (!isValid) {\n    toggleError(errorMessageComponent, errorMessage, true);\n  } else {\n    toggleError(errorMessageComponent, \"\", false);\n  }\n\n  return isValid;\n}\n\ntype fileUploadResponse = {\n  status: string;\n  url: {\n    profile_pic: {\n      url: string;\n    };\n  };\n};\n\n/**\n * Updates the user's profile picture URL in the authentication system.\n * @param {string} imageUrl - The URL of the uploaded image.\n */\nexport function setProfilePicUrl(imageUrl: string): void {\n  const user = userAuth.getUser();\n  if (user && user.profile) {\n    // Ensure the profile_picture object exists\n    user.profile.profile_pic = user.profile.profile_pic || { url: \"\" };\n\n    // Set the profile picture URL\n    user.profile.profile_pic.url = imageUrl;\n    userAuth.setUser(user);\n    localStorage.setItem(\"auth_user\", JSON.stringify(user));\n  }\n}\n\n/**\n * Handles file upload and displays the uploaded image.\n * @param {WFComponent} fileInput - The WFComponent instance for the file input field.\n * @param {WFComponent} fileInputError - The WFComponent instance for displaying error messages.\n * @param {WFComponent} fileInputSuccess - The WFComponent instance for displaying success messages.\n * @param {string} uploadEndpoint - The endpoint to which the file is sent.\n * @returns {Promise<string>} A promise that resolves with the URL of the uploaded image.\n */\n/**\n * Handles file upload and displays the uploaded image.\n * Only JPEG files less than 2 MB can be uploaded.\n * @param {WFComponent} fileInput - The WFComponent instance for the file input field.\n * @param {WFComponent} fileInputError - The WFComponent instance for displaying error messages.\n * @param {WFComponent} fileInputSuccess - The WFComponent instance for displaying success messages.\n * @param {string} uploadEndpoint - The endpoint to which the file is sent.\n * @returns {Promise<string>} A promise that resolves with the URL of the uploaded image.\n */\nexport function setupFileUpload(\n  fileInput: WFComponent,\n  fileInputError: WFComponent,\n  fileInputSuccess: WFComponent,\n  uploadEndpoint: string\n): Promise<string> {\n  const profilePictureImage = new WFImage(\"#profilePictureImage\");\n  const uploadAnimation = new WFComponent(\"#uploadAnimation\");\n\n  const overlay = new WFComponent(\".drop-zone\");\n  let dragCounter = 0;\n\n  return new Promise<string>((resolve) => {\n    const handleFile = (file: File) => {\n      // Validate file type and size\n      const validTypes = [\"image/jpeg\", \"image/jpg\"];\n      const maxSizeInBytes = 2 * 1024 * 1024; // 2 MB\n\n      if (\n        !validTypes.includes(file.type) &&\n        !/\\.(jpg|jpeg)$/i.test(file.name)\n      ) {\n        const errorMessage = \"Only JPEG images are allowed.\";\n        toggleError(fileInputError, errorMessage, true);\n        // Reset file input value\n        (fileInput.getElement() as HTMLInputElement).value = \"\";\n        return;\n      }\n\n      if (file.size > maxSizeInBytes) {\n        const errorMessage = \"File size must be less than 2 MB.\";\n        toggleError(fileInputError, errorMessage, true);\n        // Reset file input value\n        (fileInput.getElement() as HTMLInputElement).value = \"\";\n        return;\n      }\n\n      // Show upload animation immediately\n      uploadAnimation.setStyle({ display: \"flex\" });\n\n      // Hide error and success messages\n      fileInputError.setStyle({ display: \"none\" });\n      fileInputSuccess.setStyle({ display: \"none\" });\n\n      const reader = new FileReader();\n\n      // Display preview image as soon as the file is loaded into memory\n      reader.onload = (event) => {\n        // Set the preview image for the profile picture\n        const result = event.target?.result as string;\n        profilePictureImage.setImage(result);\n\n        // Hide overlay once the image is set\n        overlay.setStyle({ display: \"none\" });\n      };\n\n      reader.readAsDataURL(file);\n\n      const formData = new FormData();\n      formData.append(\"profile_picture\", file);\n\n      const existingStudent = localStorage.getItem(\"current_student\");\n      if (existingStudent) {\n        const student = JSON.parse(existingStudent);\n        formData.append(\"student_profile_id\", student.id.toString());\n      }\n\n      // Send the file to the server\n      const postRequest = apiClient.post<fileUploadResponse>(uploadEndpoint, {\n        data: formData,\n      });\n\n      postRequest.onData((response) => {\n        if (response.status === \"success\") {\n          const imageUrl = response.url.profile_pic.url;\n\n          // Update the profile picture URL in the user session and local storage\n          setProfilePicUrl(imageUrl);\n\n          // Update the image for other parts of the UI as well\n          profilePictureImage.setImage(imageUrl);\n\n          // Store the URL in local storage\n          localStorage.setItem(\"image_upload\", imageUrl);\n\n          // Show success message and hide upload animation\n          fileInputSuccess.setStyle({ display: \"flex\" });\n          uploadAnimation.setStyle({ display: \"none\" });\n\n          // Resolve with the uploaded image URL\n          resolve(imageUrl);\n        } else {\n          const errorMessage = \"Failed to upload profile picture.\";\n          toggleError(fileInputError, errorMessage, true);\n          uploadAnimation.setStyle({ display: \"none\" });\n          overlay.setStyle({ display: \"none\" });\n          dragCounter = 0;\n          // Reset file input value\n          (fileInput.getElement() as HTMLInputElement).value = \"\";\n        }\n      });\n\n      postRequest.onError((error) => {\n        let errorMessage = \"An error occurred during image upload.\";\n        if (error.response && error.response.data) {\n          errorMessage = error.response.data.message || errorMessage;\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n\n        // Show error message and hide upload animation\n        toggleError(fileInputError, errorMessage, true);\n        uploadAnimation.setStyle({ display: \"none\" });\n        overlay.setStyle({ display: \"none\" });\n        dragCounter = 0;\n        // Reset file input value\n        (fileInput.getElement() as HTMLInputElement).value = \"\";\n      });\n\n      // Make the API call\n      postRequest.fetch();\n    };\n\n    // Event listener for file input changes\n    fileInput.on(\"change\", () => {\n      const file = (fileInput.getElement() as HTMLInputElement).files?.[0];\n      if (file) {\n        handleFile(file);\n      }\n    });\n\n    // Event listeners for drag-and-drop\n    const dragZoneElement = document.body;\n    dragZoneElement.addEventListener(\"dragenter\", (event) => {\n      event.preventDefault();\n      dragCounter++;\n      if (dragCounter === 1) {\n        overlay.setStyle({ display: \"flex\" });\n      }\n    });\n\n    dragZoneElement.addEventListener(\"dragleave\", () => {\n      dragCounter--;\n      if (dragCounter <= 0) {\n        overlay.setStyle({ display: \"none\" });\n        dragCounter = 0;\n      }\n    });\n\n    dragZoneElement.addEventListener(\"dragover\", (event) => {\n      event.preventDefault();\n    });\n\n    dragZoneElement.addEventListener(\"drop\", (event) => {\n      event.preventDefault();\n\n      const files = event.dataTransfer?.files;\n      if (files?.length) {\n        handleFile(files[0]);\n      }\n\n      overlay.setStyle({ display: \"none\" });\n      dragCounter = 0;\n    });\n  });\n}\n\n// src/utils/formUtils.ts\n\n/**\n * Formats a phone number string to the format (xxx) xxx-xxxx.\n * If the input contains more than 10 digits, it truncates the extra digits.\n * If it contains fewer, it formats as much as possible.\n *\n * @param value - The raw phone number string.\n * @returns The formatted phone number string.\n */\nexport const formatPhoneNumber = (value: string): string => {\n  const cleaned = value.replace(/\\D/g, \"\"); // Remove all non-digit characters\n\n  if (cleaned.length <= 3) {\n    return cleaned;\n  } else if (cleaned.length <= 6) {\n    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3)}`;\n  } else if (cleaned.length <= 10) {\n    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(\n      6\n    )}`;\n  } else {\n    // If more than 10 digits, truncate the extra digits\n    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(\n      6,\n      10\n    )}`;\n  }\n};\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));","import { WFComponent } from \"@xatom/core\";\nimport {\n  getSelectedPerformance,\n  getSelectedProduction,\n} from \"../state/ticketPurchaseState\";\n\nexport const updateSelectedPerformanceUI = () => {\n  const selectedPerformance = getSelectedPerformance();\n  const selectedProduction = getSelectedProduction();\n\n  if (!selectedPerformance || !selectedPerformance.id) {\n    console.error(\"No performance selected.\");\n    return;\n  }\n\n  const selectedPerformanceDate = new WFComponent(\"#selectedPerformanceDate\");\n  const selectedPerformanceMonth = new WFComponent(\"#selectedPerformanceMonth\");\n  const selectedWeekday = new WFComponent(\"#selectedWeekday\");\n  const selectedTime = new WFComponent(\"#selectedTime\");\n  const selectedPerformanceTitle = new WFComponent(\"#selectedPerformanceTitle\");\n  const selectedPerformanceProductionTitle = new WFComponent(\n    \"#selectedPerformanceProductionTitle\"\n  );\n  const selectedPerformanceDescription = new WFComponent(\n    \"#selectedPerformanceDescription\"\n  );\n  const selectedImage = new WFComponent(\"#selectedImage\");\n  const selectedPerformanceLocation = new WFComponent(\n    \"#selectedPerformanceLocation\"\n  );\n\n  const date = new Date(selectedPerformance.dateTime);\n\n  selectedPerformanceDate.setText(date.getDate().toString());\n  selectedPerformanceMonth.setText(\n    date.toLocaleString(\"en-US\", { month: \"short\" })\n  );\n  selectedWeekday.setText(date.toLocaleString(\"en-US\", { weekday: \"long\" }));\n  selectedTime.setText(\n    date.toLocaleTimeString(\"en-US\", { hour: \"2-digit\", minute: \"2-digit\" })\n  );\n\n  selectedPerformanceTitle.setText(selectedPerformance.name);\n  selectedPerformanceProductionTitle.setText(selectedProduction.name);\n  selectedPerformanceDescription.setText(selectedProduction.description);\n\n  if (selectedPerformance.imageUrl) {\n    selectedImage.setAttribute(\"src\", selectedPerformance.imageUrl);\n    selectedImage.setAttribute(\"alt\", selectedPerformance.name);\n  }\n\n  // Update the location UI element with the selected performance location\n  if (selectedPerformance.location) {\n    selectedPerformanceLocation.setText(selectedPerformance.location);\n  } else {\n    selectedPerformanceLocation.setText(\"Location not specified\");\n  }\n};\n","import { WFComponent } from \"@xatom/core\";\nimport { saveCustomQuestion } from \"../state/ticketPurchaseState\"; // Correct function name\n\nexport const updateCustomQuestion = (questionText: string) => {\n  const customQuestionLabel = new WFComponent(\n    \"label[for='customQuestionInput']\"\n  );\n  const customQuestionInput = new WFComponent(\"#customQuestionInput\");\n\n  if (customQuestionLabel && customQuestionInput) {\n    customQuestionLabel.setText(\n      questionText || \"No custom question available.\"\n    );\n\n    customQuestionInput.on(\"input\", () => {\n      const answer = (customQuestionInput.getElement() as HTMLInputElement)\n        .value;\n      saveCustomQuestion(answer); // Use the correct function name\n    });\n  }\n};\n","import { WFComponent } from \"@xatom/core\";\nimport {\n  saveAssistanceNeeded,\n  saveAssistanceMessage,\n} from \"../state/ticketPurchaseState\";\n\nexport const initializeAssistanceInput = () => {\n  const assistanceInput = new WFComponent(\"#assistanceInput\");\n  const hiddenAssistanceWrapper = new WFComponent(\"#hiddenAssistanceWrapper\");\n  const assistanceMessageInput = new WFComponent(\"#assistanceMessageInput\");\n\n  if (!assistanceInput || !hiddenAssistanceWrapper || !assistanceMessageInput) {\n    console.error(\"Assistance input or hidden wrapper elements not found.\");\n    return;\n  }\n\n  // Initialize state based on current input values\n  const isChecked = (assistanceInput.getElement() as HTMLInputElement).checked;\n  saveAssistanceNeeded(isChecked);\n\n  if (isChecked) {\n    hiddenAssistanceWrapper.removeCssClass(\"g-hide\");\n    const assistanceMessage = (\n      assistanceMessageInput.getElement() as HTMLTextAreaElement\n    ).value;\n    saveAssistanceMessage(assistanceMessage);\n  } else {\n    hiddenAssistanceWrapper.addCssClass(\"g-hide\");\n    saveAssistanceMessage(\"\"); // Clear the message in the state if hidden\n  }\n\n  assistanceInput.on(\"change\", () => {\n    const isChecked = (assistanceInput.getElement() as HTMLInputElement)\n      .checked;\n\n    if (isChecked) {\n      hiddenAssistanceWrapper.removeCssClass(\"g-hide\");\n    } else {\n      hiddenAssistanceWrapper.addCssClass(\"g-hide\");\n      (assistanceMessageInput.getElement() as HTMLTextAreaElement).value = \"\"; // Clear the input when hidden\n      saveAssistanceMessage(\"\"); // Clear the message in the state if hidden\n    }\n\n    saveAssistanceNeeded(isChecked); // Save the checkbox state\n  });\n\n  assistanceMessageInput.on(\"input\", () => {\n    const message = (assistanceMessageInput.getElement() as HTMLTextAreaElement)\n      .value;\n    saveAssistanceMessage(message); // Save the message to the state\n  });\n};\n","// src/modules/tickets/components/userDetailsUI.ts\nimport { WFComponent } from \"@xatom/core\";\nimport { authManager } from \"../../../auth/authConfig\";\nimport { saveUserDetails } from \"../state/ticketPurchaseState\"; // Import the save function from state\n\nexport const initializeUserDetails = () => {\n  const emailWrap = new WFComponent(\"#emailWrap\");\n  const firstNameInput = new WFComponent(\"#firstNameInput\");\n  const lastNameInput = new WFComponent(\"#lastNameInput\");\n  const emailInput = new WFComponent(\"#emailInput\");\n\n  // Check if the user is logged in\n  const user = authManager.getUserAuth().getUser();\n\n  if (user && user.email) {\n    // User is logged in, hide the emailWrap and populate the state\n    emailWrap.setStyle({ display: \"none\" });\n\n    // Save the user details to the state\n    saveUserDetails({\n      firstName: user.profile?.first_name || \"\",\n      lastName: user.profile?.last_name || \"\",\n      email: user.email,\n    });\n  } else {\n    // User is not logged in, show the emailWrap\n    emailWrap.setStyle({ display: \"grid\" });\n\n    // Set up event listeners to save user input to the state\n    firstNameInput.on(\"input\", () => {\n      const firstName = (firstNameInput.getElement() as HTMLInputElement).value;\n      saveUserDetails({ firstName });\n    });\n\n    lastNameInput.on(\"input\", () => {\n      const lastName = (lastNameInput.getElement() as HTMLInputElement).value;\n      saveUserDetails({ lastName });\n    });\n\n    emailInput.on(\"input\", () => {\n      const email = (emailInput.getElement() as HTMLInputElement).value;\n      saveUserDetails({ email });\n    });\n  }\n};\n","var e=require(\"@xatom/core\"),s=require(\"uuid\");var t,i,r,l,d={};t=d,i=\"WFSlider\",r=()=>o,Object.defineProperty(t,i,{get:r,set:l,enumerable:!0,configurable:!0});const n=window.jQuery;class o extends e.WFComponent{_sliderConfig={};_slides=[];_defaultSwipeDisabled=!1;_index=0;_listeners=new Map;constructor(e){super(e),this.init()}init(){this._defaultSwipeDisabled=\"true\"===this.getAttribute(\"data-disable-swipe\"),this._sliderConfig=n(this.getElement()).data()[\".wSlider\"],this._slides=Array.from(this._sliderConfig.slides).map((s=>new(0,e.WFComponent)(s))),this._mask=new(0,e.WFComponent)(this._sliderConfig.mask[0]),this._nav=new(0,e.WFComponent)(this._sliderConfig.nav[0]),this._left=new(0,e.WFComponent)(this._sliderConfig.left[0]),this._right=new(0,e.WFComponent)(this._sliderConfig.right[0]),function(e,s){if(!document.styleSheets)return;if(0==document.getElementsByTagName(\"head\").length)return;let t,i;if(document.styleSheets.length>0)for(var r=0,l=document.styleSheets.length;r<l;r++)if(!document.styleSheets[r].disabled){var d=document.styleSheets[r].media;if(i=typeof d,\"string\"===i?\"\"!==d&&-1===d.indexOf(\"screen\")||(t=document.styleSheets[r]):\"object\"==i&&(\"\"!==d.mediaText&&-1===d.mediaText.indexOf(\"screen\")||(t=document.styleSheets[r])),void 0!==t)break}if(void 0===t){var n=document.createElement(\"style\");for(n.type=\"text/css\",document.getElementsByTagName(\"head\")[0].appendChild(n),r=0;r<document.styleSheets.length;r++)document.styleSheets[r].disabled||(t=document.styleSheets[r]);i=typeof t.media}if(\"string\"===i){for(r=0,l=t.rules.length;r<l;r++)if(t.rules[r].selectorText&&t.rules[r].selectorText.toLowerCase()==e.toLowerCase())return void(t.rules[r].style.cssText=s);t.addRule(e,s)}else if(\"object\"===i){var o=t.cssRules?t.cssRules.length:0;for(r=0;r<o;r++)if(t.cssRules[r].selectorText&&t.cssRules[r].selectorText.toLowerCase()==e.toLowerCase())return void(t.cssRules[r].style.cssText=s);t.insertRule(e+\"{\"+s+\"}\",o)}}(\".xa-slider-disable\",\"display:none !important;\");const s=this;Object.defineProperty(s._sliderConfig,\"index\",{set:function(e){s._index=e,s._triggerOnChange()},get:function(){return s._index}}),this.refereshSlides()}reloadWFSlider(){window.Webflow.require(\"slider\").destroy(),window.Webflow.require(\"slider\").redraw(),window.Webflow.require(\"slider\").ready()}refereshSlides(){this._mask.getChildAsComponents(\".w-slide\").forEach((e=>e.remove())),this._slides.reverse().forEach((e=>{this._mask.getElement().prepend(e.getElement())})),this._slides.reverse(),this.reloadWFSlider()}getActiveSlide(){return this._slides[this._index]}getAllSlides(){return[...this._slides]}getSlideByIndex(e){return this._slides[e]}getActiveSlideIndex(){return this._index}getPreviousSlideIndex(){return this._sliderConfig.previous}goNext(){this._sliderConfig.right.click()}goPrevious(){this._sliderConfig.left.click()}goToIndex(e){e>=0&&e<this._slides.length&&(console.log(e),n(this._sliderConfig.nav.children()[e]).click())}addSlide(s,t={}){const i=t.index,r=t.cssClass,l=(0,e.createComponent)(\"div\");l.addCssClass(\"w-slide\"),r&&l.addCssClass(r),l.appendChild(s);const d=\"number\"!=typeof i?-1:i,n=this._slides;d>=0&&d<=n.length?n.splice(i,0,l):n.push(l),this._slides=[...n],this.refereshSlides()}removeSlide(e){const s=[...this._slides];e>=0&&e<s.length&&s.splice(e,1),this._slides=[...s],console.log(this._slides),this.refereshSlides()}getSlideNav(){return this._nav}setSlideNavigationState(e){e?(this._left.removeCssClass(\"xa-slider-disable\"),this._right.removeCssClass(\"xa-slider-disable\"),this._nav.removeCssClass(\"xa-slider-disable\"),this.setAttribute(\"data-disable-swipe\",this._defaultSwipeDisabled?\"true\":\"false\")):(this._left.addCssClass(\"xa-slider-disable\"),this._right.addCssClass(\"xa-slider-disable\"),this._nav.addCssClass(\"xa-slider-disable\"),this.setAttribute(\"data-disable-swipe\",\"true\")),this.reloadWFSlider()}onSlideChange(e){const t=(0,s.v4)();return this._listeners.set(t,e),()=>{this._listeners.delete(t)}}_triggerOnChange(){Array.from(this._listeners.values()).forEach((e=>{e(this._index,this._sliderConfig.previous)}))}getConfig(){return this._sliderConfig}}var a,h;a=module.exports,h=d,Object.keys(h).forEach((function(e){\"default\"===e||\"__esModule\"===e||a.hasOwnProperty(e)||Object.defineProperty(a,e,{enumerable:!0,get:function(){return h[e]}})}));","import { WFComponent } from \"@xatom/core\";\nimport { userAuth } from \"../../../auth/authConfig\";\n\n// Initialize the sidebar indicators for the ticket form\nexport const initializeTicketSidebarIndicators = () => {\n  const steps = [\n    { id: \"sidebarStepOne\", index: 1 },\n    { id: \"sidebarStepTwo\", index: 2 },\n    { id: \"sidebarStepThree\", index: 3 },\n    { id: \"sidebarStepFour\", index: 4 },\n  ];\n\n  // Set sidebar first name from userAuth\n  const firstNameText = new WFComponent(\"#firstNameText\");\n  const user = userAuth.getUser();\n\n  if (user && user.profile && user.profile.first_name) {\n    firstNameText.setText(user.profile.first_name);\n  } else {\n    firstNameText.setText(\"Friend\");\n  }\n\n  steps.forEach((step) => {\n    const stepComponent = new WFComponent(`#${step.id}`);\n    let isCompleted = false; // Track the completed state\n\n    stepComponent.on(\"click\", () => {\n      if (isCompleted) {\n        isCompleted = false;\n        // Trigger reverse animation here if needed\n      } else {\n        isCompleted = true;\n        // Trigger completed animation here\n      }\n    });\n  });\n};\n\n// Set the active step for the ticket form\nexport const setActiveTicketStep = (stepNumber: number) => {\n  const stepId = getTicketStepId(stepNumber);\n  const stepComponent = new WFComponent(`#${stepId}`);\n  stepComponent.addCssClass(\"is-active\");\n};\n\n// Unset the active step for the ticket form\nexport const unsetActiveTicketStep = (stepNumber: number) => {\n  const stepId = getTicketStepId(stepNumber);\n  const stepComponent = new WFComponent(`#${stepId}`);\n  stepComponent.removeCssClass(\"is-active\");\n};\n\n// Mark step as completed for the ticket form\nexport const markTicketStepAsCompleted = (stepNumber: number) => {\n  const stepId = getTicketStepId(stepNumber);\n  const step = new WFComponent(`#${stepId}`);\n  step.getElement().click(); // Programmatically trigger the click event to mark as complete\n};\n\n// Unmark step as completed (reverse the completed animation) for the ticket form\nexport const unmarkTicketStepAsCompleted = (stepNumber: number) => {\n  const stepId = getTicketStepId(stepNumber);\n  const step = new WFComponent(`#${stepId}`);\n  step.getElement().click(); // Programmatically trigger the click event to unmark as complete\n};\n\n// Helper function to get the ID string for a step in the ticket form\nconst getTicketStepId = (stepNumber: number): string => {\n  const stepMap: Record<number, string> = {\n    1: \"sidebarStepOne\",\n    2: \"sidebarStepTwo\",\n    3: \"sidebarStepThree\",\n    4: \"sidebarStepFour\",\n  };\n  return stepMap[stepNumber] || `ticketSidebarStep${stepNumber}`;\n};\n","import { WFComponent } from \"@xatom/core\";\nimport { toggleError } from \"./formUtils\";\n\nexport function validateNotEmpty(input: string | undefined): boolean {\n  return input !== undefined && input.trim() !== \"\";\n}\n\nexport function validateEmail(input: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(input);\n}\n\n/**\n * Validates that the email is either empty or correctly formatted.\n * @param value The email input value.\n * @returns True if valid, false otherwise.\n */\nexport const validateEmailOptional = (value: string): boolean => {\n  if (value.trim() === \"\") {\n    // Email is optional, so empty string is valid\n    return true;\n  }\n  // Validate the email format if not empty\n  return validateEmail(value);\n};\n\nexport function validatePasswordRequirements(password: string): boolean {\n  const hasLowercase = /[a-z]/.test(password);\n  const hasUppercase = /[A-Z]/.test(password);\n  const hasDigit = /\\d/.test(password);\n  const hasSpecialChar = /[!@#$%^&*(),.?\":{}|<>]/.test(password);\n  const hasValidLength = password.length >= 8;\n  return (\n    hasLowercase && hasUppercase && hasDigit && hasSpecialChar && hasValidLength\n  );\n}\n\nexport function validateCheckbox(checked: boolean): boolean {\n  return checked;\n}\n\nexport function validatePasswordsMatch(\n  originalPassword: string,\n  confirmPassword: string\n): boolean {\n  return originalPassword === confirmPassword;\n}\n\nexport function validateSelectField(input: string | undefined): boolean {\n  return input !== undefined && input !== \"N/A\";\n}\n\nexport function validatePhoneNumber(input: string): boolean {\n  const phoneRegex = /^\\(\\d{3}\\)\\s\\d{3}-\\d{4}$/;\n  return phoneRegex.test(input);\n}\n\nexport const validatePhoneNumberOptional = (value: string): boolean => {\n  if (value.trim() === \"\") {\n    // Phone number is optional, so empty string is valid\n    return true;\n  }\n  // Validate the phone number format if not empty\n  return validatePhoneNumber(value);\n};\n","import {\n  saveSelectedProduction,\n  saveSelectedPerformance,\n  clearTicketPurchaseState,\n  loadTicketPurchaseState,\n} from \"../state/ticketPurchaseState\";\nimport { initializeProductionList } from \"../productionList\";\nimport { initializePerformanceList } from \"../performanceList\";\nimport { initializeTicketTiers } from \"../ticketTiers\";\nimport { WFSlider } from \"@xatom/slider\";\nimport {\n  initializeTicketSidebarIndicators,\n  setActiveTicketStep,\n  markTicketStepAsCompleted,\n} from \"../components/sidebarIndicators\";\nimport { WFComponent } from \"@xatom/core\";\nimport { updateSelectedPerformanceUI } from \"../components/selectedPerformanceUI\";\nimport { apiClient } from \"../../../api/apiConfig\"; // Import apiClient for API requests\n\n// Function to parse URL parameters\nconst getUrlParams = () => {\n  const params = new URLSearchParams(window.location.search);\n  const productionId = params.get(\"production\");\n  const performanceId = params.get(\"performance\");\n  const cancelId = params.get(\"cancel\"); // Extract 'cancel' parameter\n  return { productionId, performanceId, cancelId };\n};\n\n// Function to initialize states based on URL parameters\nexport const initializeStateFromUrlParams = async (slider: WFSlider) => {\n  const { productionId, performanceId, cancelId } = getUrlParams();\n  initializeTicketSidebarIndicators(); // Initialize sidebar indicators\n\n  const loadingWall = new WFComponent(\".loading_wall\");\n  const animationDuration = 500; // Duration in milliseconds matching the CSS transition time\n\n  // Check if any relevant URL parameters are present\n  if (productionId || performanceId || cancelId) {\n    // Show the loading wall\n    loadingWall.setStyle({ display: \"flex\" });\n\n    try {\n      // Handle cancellation if 'cancel' parameter is present\n      if (cancelId) {\n        // Create the DELETE request using apiClient\n        const cancelOrderRequest = apiClient.delete(\n          `/tickets/cancel_order/${cancelId}`\n        );\n\n        // Set up listeners for the DELETE request\n        await new Promise<void>((resolve, reject) => {\n          cancelOrderRequest.onData(() => {\n            console.log(`Ticket order ${cancelId} canceled successfully`);\n\n            // Optional: Remove 'cancel' parameter from the URL to prevent repeated cancellations\n            const params = new URLSearchParams(window.location.search);\n            params.delete(\"cancel\");\n            const newUrl = `${window.location.pathname}${\n              params.toString() ? `?${params.toString()}` : \"\"\n            }`;\n            window.history.replaceState({}, document.title, newUrl);\n\n            resolve(); // Resolve the promise on successful cancellation\n          });\n\n          cancelOrderRequest.onError((error) => {\n            console.error(`Failed to cancel ticket order ${cancelId}:`, error);\n            // Optional: Display an error message to the user here\n            reject(error); // Reject the promise on error\n          });\n\n          // Initiate the DELETE request\n          cancelOrderRequest.fetch();\n        });\n      }\n\n      // Proceed with initializing production and performance based on URL parameters\n\n      if (productionId) {\n        // Clear any previous ticket purchase state\n        clearTicketPurchaseState();\n\n        // Initialize the production list\n        const productions = await initializeProductionList(\n          \"#selectProductionList\"\n        );\n\n        // Find and select the production based on the URL parameter\n        const selectedProduction = productions.find(\n          (production) => production.id === productionId\n        );\n        if (selectedProduction) {\n          saveSelectedProduction({\n            id: selectedProduction.id,\n            name: selectedProduction.fieldData[\"displayed-name\"],\n            description: selectedProduction.fieldData[\"short-description\"],\n            imageUrl: selectedProduction.fieldData[\"main-image\"].url,\n          });\n\n          markTicketStepAsCompleted(1);\n          setActiveTicketStep(2);\n\n          // Select the production in the UI\n          const productionComponent = document.querySelector(\n            `input[value=\"${productionId}\"]`\n          );\n          if (productionComponent) {\n            (productionComponent as HTMLInputElement).checked = true;\n            productionComponent.dispatchEvent(new Event(\"change\"));\n          }\n\n          // Initialize the performance list for the selected production\n          const performances = await initializePerformanceList(\n            \"#selectPerformanceList\"\n          );\n\n          if (performanceId) {\n            const selectedPerformance = performances.find(\n              (performance) => performance.id === performanceId\n            );\n            if (selectedPerformance) {\n              saveSelectedPerformance({\n                id: selectedPerformance.id,\n                name: selectedPerformance.fieldData[\"displayed-name\"],\n                dateTime: selectedPerformance.fieldData[\"date-time\"],\n                description: selectedPerformance.fieldData[\"short-description\"],\n                imageUrl: selectedPerformance.fieldData[\"main-image\"].url,\n                location: selectedPerformance.location_name,\n              });\n\n              markTicketStepAsCompleted(2);\n              setActiveTicketStep(3);\n\n              // Update the UI with the selected performance details\n              updateSelectedPerformanceUI();\n\n              // Initialize the ticket tiers (Step 3)\n              await initializeTicketTiers(\"#bundleList\", \"#ticketTierList\");\n              slider.goToIndex(2); // Navigate to the ticket selection step\n            } else {\n              console.error(`Performance with ID ${performanceId} not found`);\n              slider.goToIndex(1); // Navigate to the performance selection step\n            }\n          } else {\n            slider.goToIndex(1); // Navigate to the performance selection step\n          }\n        } else {\n          console.error(`Production with ID ${productionId} not found`);\n          slider.goToIndex(0); // Navigate to the production selection step\n        }\n      } else {\n        // If no productionId, navigate to the first step\n        slider.goToIndex(0);\n      }\n    } catch (error) {\n      console.error(\"Error initializing state from URL parameters:\", error);\n      slider.goToIndex(0); // Navigate to the production selection step on error\n    } finally {\n      // Hide the loading wall after completing all initializations\n      loadingWall.addCssClass(\"hidden\");\n      setTimeout(\n        () => loadingWall.setStyle({ display: \"none\" }),\n        animationDuration\n      );\n    }\n  }\n};\n"],"names":[],"version":3,"file":"makeTicketPurchase.55f87736.js.map","sourceRoot":"../"}