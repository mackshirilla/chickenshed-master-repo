!function(e,t,n,i,a){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof r[i]&&r[i],s=o.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,n){if(!s[t]){if(!e[t]){var a="function"==typeof r[i]&&r[i];if(!n&&a)return a(t,!0);if(o)return o(t,!0);if(l&&"string"==typeof t)return l(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}u.resolve=function(n){var i=e[t][1][n];return null!=i?i:n},u.cache={};var p=s[t]=new d.Module(t);e[t][0].call(p.exports,u,p,p.exports,this)}return s[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=s,d.parent=o,d.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(d,"root",{get:function(){return r[i]}}),r[i]=d;for(var c=0;c<t.length;c++)d(t[c])}({"2XpAL":[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"makeDonation",()=>y);var a=e("@xatom/core"),r=e("./campaignList"),o=e("./campaignProductList"),s=e("./state/donationState"),l=e("./components/selectedCampaignDisplay"),d=e("@xatom/slider"),c=e("./components/userContactDetails"),p=e("../../utils/validationUtils"),u=e("../../api/apiConfig"),m=e("./components/sidebarIndicators"),g=e("./components/urlParamNavigator"),f=e("../../auth/authConfig");let h=()=>{document.querySelectorAll('input[name="selectDonationType"]').forEach(e=>{e.addEventListener("change",()=>{e.checked&&((0,s.saveSelectedDonationType)(e.value),console.log("Donation type changed to:",e.value),(0,o.renderProductListForDonationType)())})})},y=async()=>{(0,s.clearDonationState)(),h(),(0,m.initializeSidebarIndicators)(),(0,m.setActiveStep)(1);let e=new d.WFSlider(".multi-step_form_slider");(0,g.initializeStateFromUrlParams)(e),await (0,r.initializeCampaignList)("#selectCampaignList"),(0,c.initializeUserContactDetails)();let t=new a.WFFormComponent("#formStepOne"),n=new a.WFComponent("#submitStepOne");t.onFormSubmit(async(t,i)=>{i.preventDefault(),n.setAttribute("disabled","true");let r=(0,s.getSelectedCampaign)();if(!r||!r.id){console.error("No campaign selected.");let e=new a.WFComponent("#submitStepOneError");e.setText("Please select a campaign."),e.setStyle({display:"block"}),n.removeAttribute("disabled");return}console.log("Campaign selected:",r);let d=new a.WFComponent("#stepOneRequestingAnimation");d.setStyle({display:"block"});try{await (0,o.initializeDynamicProductList)("#selectProductList",r.id),(0,l.updateSelectedCampaignDisplay)(),d.setStyle({display:"none"}),(0,m.markStepAsCompleted)(1),(0,m.setActiveStep)(2),e.goNext()}catch(t){console.error("Error loading products:",t),d.setStyle({display:"none"});let e=new a.WFComponent("#submitStepOneError");e.setText("Error loading products. Please try again."),e.setStyle({display:"block"})}finally{n.removeAttribute("disabled")}});let i=new a.WFFormComponent("#formStepTwo"),y=new a.WFComponent("#submitStepTwo");i.onFormSubmit(async(e,t)=>{t.preventDefault(),y.setAttribute("disabled","true");let n=(0,s.getSelectedProduct)(),i=(0,s.getSelectedDonationType)(),r=!1;switch(i){case"one-time":r=!!n.Single_sale_price_id;break;case"month":r=!!n.Monthly_price_id;break;case"year":r=!!n.Annual_price_id}if(!r){let e=new a.WFComponent("#submitStepTwoError");e.setText("The selected product is not available for this donation type."),e.setStyle({display:"block"}),y.removeAttribute("disabled");return}let o=(0,f.userAuth).getUser(),l=o&&o.email?o.email:null,d=document.getElementById("emailWrap"),c=!1,m=l,g={email:"",firstName:"",lastName:"",isAnonymous:!1};if(d&&"none"!==d.style.display){let e=document.getElementById("firstNameInput"),t=document.getElementById("lastNameInput"),n=document.getElementById("emailInput"),i=!(0,p.validateNotEmpty)(e.value),r=!(0,p.validateNotEmpty)(t.value),o=!(0,p.validateEmail)(n.value);if(i||r||o){if(c=!0,i){let e=new a.WFComponent("#firstNameInputError");e.setText("First name is required."),e.setStyle({display:"block"})}if(r){let e=new a.WFComponent("#lastNameInputError");e.setText("Last name is required."),e.setStyle({display:"block"})}if(o){let e=new a.WFComponent("#emailInputError");e.setText("A valid email address is required."),e.setStyle({display:"block"})}let e=new a.WFComponent("#submitStepTwoError");e.setText("Please correct the errors above."),e.setStyle({display:"block"}),y.removeAttribute("disabled");return}l||(m=n.value);let s=document.getElementById("anonymousInput").checked;g={email:m,firstName:e.value,lastName:t.value,isAnonymous:s}}else{let e=document.getElementById("anonymousInput").checked;g={email:l||"",firstName:o?o.profile.first_name:"",lastName:o?o.profile.last_name:"",isAnonymous:e}}let h=document.getElementById("inNameOfBoolInput"),S=document.getElementById("inNameOfInput");if(h?.checked){let e=S.value.trim();if(!(0,p.validateNotEmpty)(e)){c=!0;let e=new a.WFComponent("#inNameOfInputError");e.setText("Please enter the name."),e.setStyle({display:"block"});let t=new a.WFComponent("#submitStepTwoError");t.setText("Please correct the errors above."),t.setStyle({display:"block"}),y.removeAttribute("disabled");return}g.inNameOf=e}else g.inNameOf="";if(!c){(0,s.saveDonorDetails)(g),new a.WFComponent("#stepTwoRequestingAnimation").setStyle({display:"block"});try{let e={...(0,s.loadDonationState)(),currentPageUrl:window.location.href},t=await (0,u.apiClient).post("/donate/begin_checkout",{data:e}).fetch();window.location.href=t.checkout_url}catch(t){console.error("Error during checkout:",t);let e=new a.WFComponent("#submitStepTwoError");e.setText("An error occurred during checkout. Please try again."),e.setStyle({display:"block"})}finally{new a.WFComponent("#stepTwoRequestingAnimation").setStyle({display:"none"}),y.removeAttribute("disabled")}}}),new a.WFComponent("#backStepTwo").on("click",()=>{console.log("Navigating to the previous step."),(0,m.unmarkStepAsCompleted)(1),(0,m.setActiveStep)(1),(0,m.unsetActiveStep)(2),e.goPrevious()}),new a.WFComponent("#submitStepTwo").on("click",()=>{console.log("Submitting the second step.")});let S=()=>{let e=new a.WFComponent("#submitStepTwoError");e.setText(""),e.setStyle({display:"none"})},C=document.getElementById("firstNameInput"),v=document.getElementById("lastNameInput"),_=document.getElementById("emailInput"),b=document.getElementById("inNameOfInput");C&&v&&_&&b&&(C.addEventListener("focus",S),v.addEventListener("focus",S),_.addEventListener("focus",S),b.addEventListener("focus",S));let w=document.getElementById("inNameOfBoolInput"),x=document.getElementById("hiddenInput"),I=()=>{if(w.checked)x.style.display="block";else{x.style.display="none",b.value="";let e=new a.WFComponent("#inNameOfInputError");e.setText(""),e.setStyle({display:"none"})}S()};w&&x&&(I(),w.addEventListener("change",I))}},{"@xatom/core":"65YBq","./campaignList":"cyN3Q","./campaignProductList":"dw1Mn","./state/donationState":"apIbX","./components/selectedCampaignDisplay":"iv1HY","@xatom/slider":"ejxGx","./components/userContactDetails":"kfWdK","../../utils/validationUtils":"gu2z7","../../api/apiConfig":"dUmIV","./components/sidebarIndicators":"aB2QU","./components/urlParamNavigator":"4SgF0","../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],cyN3Q:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"initializeCampaignList",()=>c);var a=e("@xatom/core"),r=e("../../api/campaigns"),o=e("./state/donationState");let s=null,l=()=>{let e=JSON.parse(localStorage.getItem("donationState")||"{}");e.selectedCampaignId=s,console.log("Logging state to localStorage:",e),localStorage.setItem("donationState",JSON.stringify(e))},d=null,c=async e=>{let t=document.querySelector(e);if(!t)return console.error("Campaign list container not found."),[];d||(d=t.cloneNode(!0)),t.innerHTML="",t.appendChild(d.cloneNode(!0));let n=new a.WFDynamicList(e,{rowSelector:"#cardSelectProduction",loaderSelector:"#productionListLoading",emptySelector:"#productionListEmpty"});n.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),n.emptyRenderer(e=>(e.setStyle({display:"flex"}),e));let i=[];n.rowRenderer(({rowData:e,rowElement:t,index:n})=>{let r=new a.WFComponent(t),d=r.getChildAsComponent("#cardCampaignTitle"),c=r.getChildAsComponent("#cardCampaignSubheading"),p=r.getChildAsComponent("#cardCampaignDescription"),u=r.getChildAsComponent("#cardCampaignImage"),m=r.getChildAsComponent(".input_card_input"),g=r.getChildAsComponent("label");if(!d||!c||!p||!m||!u||!g){console.error("Campaign elements not found.");return}let f=`campaignInput-${n}`;return m.setAttribute("id",f),m.setAttribute("value",e.id.toString()),g.setAttribute("for",f),d.setText(e.Name),c.setText(e.Subheading),p.setText(e.Short_Description),e.Main_Image?u.setAttribute("src",e.Main_Image):console.warn(`Campaign ID ${e.id} does not have a main image.`),m.on("change",()=>{s=e.id.toString(),(0,o.saveSelectedCampaign)({id:e.id.toString(),name:e.Name,imageUrl:e.Main_Image,description:e.Short_Description,subheading:e.Subheading}),l(),console.log("Selected Campaign ID:",s)}),t.setStyle({display:"flex"}),i.push(e),t});try{n.changeLoadingStatus(!0),i=await (0,r.fetchCampaigns)(),console.log("Fetched campaigns:",i),i.length>0?n.setData(i):n.setData([]),n.changeLoadingStatus(!1)}catch(e){console.error("Error loading campaigns:",e),n.setData([]),n.changeLoadingStatus(!1)}return i}},{"@xatom/core":"65YBq","../../api/campaigns":"8hXW0","./state/donationState":"apIbX","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"8hXW0":[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"fetchCampaigns",()=>r);var a=e("./apiConfig");let r=async()=>{try{return(await (0,a.apiClient).get("/donate/campaigns").fetch()).campaigns}catch(e){throw console.error("Error fetching campaigns:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],apIbX:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"loadDonationState",()=>r),i.export(n,"saveDonationState",()=>o),i.export(n,"clearDonationState",()=>s),i.export(n,"getSelectedCampaign",()=>l),i.export(n,"saveSelectedCampaign",()=>d),i.export(n,"getSelectedProduct",()=>c),i.export(n,"saveSelectedProduct",()=>p),i.export(n,"getDonorDetails",()=>u),i.export(n,"saveDonorDetails",()=>m),i.export(n,"getSelectedDonationType",()=>g),i.export(n,"saveSelectedDonationType",()=>f);let a="donationState",r=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):{}},o=e=>{let t={...r(),...e};localStorage.setItem(a,JSON.stringify(t))},s=()=>{localStorage.removeItem(a)},l=()=>{let e=r();return{id:e.selectedCampaignId||null,name:e.selectedCampaignName||null,imageUrl:e.selectedCampaignImageUrl||null,description:e.selectedCampaignDescription||null,subheading:e.selectedCampaignSubheading||null}},d=e=>{o({selectedCampaignId:e.id,selectedCampaignName:e.name,selectedCampaignImageUrl:e.imageUrl,selectedCampaignDescription:e.description,selectedCampaignSubheading:e.subheading})},c=()=>{let e=r();return{id:e.selectedProductId||null,name:e.selectedProductName||null,amount:e.selectedProductAmount||null,Single_sale_price_id:e.Single_sale_price_id||null,Monthly_price_id:e.Monthly_price_id||null,Annual_price_id:e.Annual_price_id||null}},p=e=>{o({selectedProductId:e.id,selectedProductName:e.name,selectedProductAmount:e.amount,Single_sale_price_id:e.Single_sale_price_id,Monthly_price_id:e.Monthly_price_id,Annual_price_id:e.Annual_price_id})},u=()=>{let e=r();return{email:e.email||null,firstName:e.firstName||null,lastName:e.lastName||null,isAnonymous:e.isAnonymous||!1,inNameOf:e.inNameOf||null}},m=e=>{o({email:e.email,firstName:e.firstName,lastName:e.lastName,isAnonymous:e.isAnonymous,inNameOf:e.inNameOf})},g=()=>r().selectedDonationType||"one-time",f=e=>{o({selectedDonationType:e})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],dw1Mn:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"renderProductListForDonationType",()=>u),i.export(n,"initializeDynamicProductList",()=>m);var a=e("@xatom/core"),r=e("../../api/campaignProducts"),o=e("./state/donationState");let s=null,l=null,d=[],c=null,p=e=>{let t=(0,o.getSelectedDonationType)();return e.filter(e=>{switch(t){case"one-time":return!!e.Single_sale_price_id;case"month":return!!e.Monthly_price_id;case"year":return!!e.Annual_price_id;default:return!1}}).sort((e,n)=>{switch(t){case"one-time":return e.Single_sale_price_amount-n.Single_sale_price_amount;case"month":return e.Monthly_price_amount-n.Monthly_price_amount;case"year":return e.Annual_price_amount-n.Annual_price_amount;default:return 0}})},u=()=>{if(c&&d.length>0){let e=p([...d]);c.setData(e)}},m=async(e,t)=>{let n=document.querySelector(e);if(!n){console.error("Product list container not found.");return}l||(l=n.cloneNode(!0)),n.innerHTML="",n.appendChild(l.cloneNode(!0));let i=new a.WFDynamicList(e,{rowSelector:"#cardSelectProduct"});c=i,i.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),i.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),i.rowRenderer(({rowData:e,rowElement:t,index:n})=>{let i=new a.WFComponent(t),r=i.getChildAsComponent("#cardProductTitle"),l=i.getChildAsComponent(".input_card_input");if(!r||!l){console.error("One or more elements not found in the product card");return}let d=`productInput-${n}`;l.setAttribute("id",d),l.setAttribute("value",e.id.toString());let c=i.getChildAsComponent("label");return c&&c.setAttribute("for",d),r.setText(e.Product_name),l.on("change",()=>{let t=(0,o.getSelectedDonationType)(),n=!1;switch(t){case"one-time":n=!!e.Single_sale_price_id,e.Single_sale_price_amount;break;case"month":n=!!e.Monthly_price_id,e.Monthly_price_amount;break;case"year":n=!!e.Annual_price_id,e.Annual_price_amount}if(!n){console.warn("Selected product is not valid for this donation type."),l.getElement().checked=!1;return}s=e.id.toString(),(0,o.saveSelectedProduct)({id:e.id.toString(),name:e.Product_name,amount:e.Single_sale_price_amount,Single_sale_price_id:e.Single_sale_price_id,Monthly_price_id:e.Monthly_price_id,Annual_price_id:e.Annual_price_id}),console.log("Selected Product ID:",s)}),t.setStyle({display:"flex"}),t});try{i.changeLoadingStatus(!0),d=await (0,r.fetchProducts)(t);let e=p(d);console.log("Filtered products:",e),i.setData(e.length>0?e:[]),i.changeLoadingStatus(!1)}catch(e){console.error("Error loading products:",e),i.setData([]),i.changeLoadingStatus(!1)}}},{"@xatom/core":"65YBq","../../api/campaignProducts":"abEqP","./state/donationState":"apIbX","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],abEqP:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"fetchProducts",()=>r);var a=e("./apiConfig");let r=async e=>{try{return(await (0,a.apiClient).post("/donate/campaign/products",{data:{campaign_id:e}}).fetch()).products}catch(e){throw console.error("Error fetching products:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],iv1HY:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"updateSelectedCampaignDisplay",()=>o);var a=e("@xatom/core"),r=e("../state/donationState");let o=()=>{let e=(0,r.getSelectedCampaign)();if(!e){console.error("No selected campaign found in the state.");return}let{name:t,subheading:n,description:i,imageUrl:o}=e,s=new a.WFComponent("#selectedCampaignTitle"),l=new a.WFComponent("#selectedCampaignSubtitle"),d=new a.WFComponent("#selectedCampaignDescription"),c=new a.WFComponent("#selectedImage");s.setText(t||"N/A"),l.setText(n||"No subheading available."),d.setText(i||"No description available."),o?c.setAttribute("src",o):c.setAttribute("src","https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg")}},{"@xatom/core":"65YBq","../state/donationState":"apIbX","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],ejxGx:[function(e,t,n){var i,a=e("1a87f3bc23b90fa3"),r=e("37b5fd8189a9f4c7"),o={};Object.defineProperty(o,"WFSlider",{get:()=>l,set:void 0,enumerable:!0,configurable:!0});let s=window.jQuery;class l extends a.WFComponent{_sliderConfig={};_slides=[];_defaultSwipeDisabled=!1;_index=0;_listeners=new Map;constructor(e){super(e),this.init()}init(){this._defaultSwipeDisabled="true"===this.getAttribute("data-disable-swipe"),this._sliderConfig=s(this.getElement()).data()[".wSlider"],this._slides=Array.from(this._sliderConfig.slides).map(e=>new a.WFComponent(e)),this._mask=new a.WFComponent(this._sliderConfig.mask[0]),this._nav=new a.WFComponent(this._sliderConfig.nav[0]),this._left=new a.WFComponent(this._sliderConfig.left[0]),this._right=new a.WFComponent(this._sliderConfig.right[0]),function(e,t){let n,i;if(document.styleSheets&&0!=document.getElementsByTagName("head").length){if(document.styleSheets.length>0){for(var a=0,r=document.styleSheets.length;a<r;a++)if(!document.styleSheets[a].disabled){var o=document.styleSheets[a].media;if("string"==(i=typeof o)?""!==o&&-1===o.indexOf("screen")||(n=document.styleSheets[a]):"object"==i&&(""!==o.mediaText&&-1===o.mediaText.indexOf("screen")||(n=document.styleSheets[a])),void 0!==n)break}}if(void 0===n){var s=document.createElement("style");for(s.type="text/css",document.getElementsByTagName("head")[0].appendChild(s),a=0;a<document.styleSheets.length;a++)document.styleSheets[a].disabled||(n=document.styleSheets[a]);i=typeof n.media}if("string"===i){for(a=0,r=n.rules.length;a<r;a++)if(n.rules[a].selectorText&&n.rules[a].selectorText.toLowerCase()==e.toLowerCase())return void(n.rules[a].style.cssText=t);n.addRule(e,t)}else if("object"===i){var l=n.cssRules?n.cssRules.length:0;for(a=0;a<l;a++)if(n.cssRules[a].selectorText&&n.cssRules[a].selectorText.toLowerCase()==e.toLowerCase())return void(n.cssRules[a].style.cssText=t);n.insertRule(e+"{"+t+"}",l)}}}(".xa-slider-disable","display:none !important;");let e=this;Object.defineProperty(e._sliderConfig,"index",{set:function(t){e._index=t,e._triggerOnChange()},get:function(){return e._index}}),this.refereshSlides()}reloadWFSlider(){window.Webflow.require("slider").destroy(),window.Webflow.require("slider").redraw(),window.Webflow.require("slider").ready()}refereshSlides(){this._mask.getChildAsComponents(".w-slide").forEach(e=>e.remove()),this._slides.reverse().forEach(e=>{this._mask.getElement().prepend(e.getElement())}),this._slides.reverse(),this.reloadWFSlider()}getActiveSlide(){return this._slides[this._index]}getAllSlides(){return[...this._slides]}getSlideByIndex(e){return this._slides[e]}getActiveSlideIndex(){return this._index}getPreviousSlideIndex(){return this._sliderConfig.previous}goNext(){this._sliderConfig.right.click()}goPrevious(){this._sliderConfig.left.click()}goToIndex(e){e>=0&&e<this._slides.length&&(console.log(e),s(this._sliderConfig.nav.children()[e]).click())}addSlide(e,t={}){let n=t.index,i=t.cssClass,r=(0,a.createComponent)("div");r.addCssClass("w-slide"),i&&r.addCssClass(i),r.appendChild(e);let o="number"!=typeof n?-1:n,s=this._slides;o>=0&&o<=s.length?s.splice(n,0,r):s.push(r),this._slides=[...s],this.refereshSlides()}removeSlide(e){let t=[...this._slides];e>=0&&e<t.length&&t.splice(e,1),this._slides=[...t],console.log(this._slides),this.refereshSlides()}getSlideNav(){return this._nav}setSlideNavigationState(e){e?(this._left.removeCssClass("xa-slider-disable"),this._right.removeCssClass("xa-slider-disable"),this._nav.removeCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe",this._defaultSwipeDisabled?"true":"false")):(this._left.addCssClass("xa-slider-disable"),this._right.addCssClass("xa-slider-disable"),this._nav.addCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe","true")),this.reloadWFSlider()}onSlideChange(e){let t=(0,r.v4)();return this._listeners.set(t,e),()=>{this._listeners.delete(t)}}_triggerOnChange(){Array.from(this._listeners.values()).forEach(e=>{e(this._index,this._sliderConfig.previous)})}getConfig(){return this._sliderConfig}}i=t.exports,Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||i.hasOwnProperty(e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return o[e]}})})},{"1a87f3bc23b90fa3":"65YBq","37b5fd8189a9f4c7":"faiuA"}],kfWdK:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"initializeUserContactDetails",()=>d);var a=e("@xatom/core"),r=e("../../../utils/validationUtils"),o=e("../../../utils/formUtils"),s=e("../state/donationState"),l=e("../../../auth/authConfig");let d=()=>{let e=new a.WFComponent("#firstNameInput"),t=new a.WFComponent("#lastNameInput"),n=new a.WFComponent("#emailInput"),i=new a.WFComponent("#firstNameInputError"),d=new a.WFComponent("#lastNameInputError"),p=new a.WFComponent("#emailInputError"),u=new a.WFComponent("#emailWrap"),m=(0,l.userAuth).getUser();m&&m.email?(u.setStyle({display:"none"}),(0,s.saveDonationState)({email:m.email})):(u.setStyle({display:"grid"}),(0,o.setupValidation)(n,p,c(n,r.validateEmail,"Invalid email address."))),(0,o.setupValidation)(e,i,c(e,r.validateNotEmpty,"First name is required.")),(0,o.setupValidation)(t,d,c(t,r.validateNotEmpty,"Last name is required.")),e.on("input",()=>{let t=e.getElement().value;(0,s.saveDonationState)({firstName:t})}),t.on("input",()=>{let e=t.getElement().value;(0,s.saveDonationState)({lastName:e})}),n.on("input",()=>{let e=n.getElement().value;(0,s.saveDonationState)({email:e})})};function c(e,t,n){return()=>t(e.getElement().value)?"":n}},{"@xatom/core":"65YBq","../../../utils/validationUtils":"gu2z7","../../../utils/formUtils":"gepHz","../state/donationState":"apIbX","../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gu2z7:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return void 0!==e&&""!==e.trim()}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}i.defineInteropFlag(n),i.export(n,"validateNotEmpty",()=>a),i.export(n,"validateEmail",()=>r),i.export(n,"validateEmailOptional",()=>o),i.export(n,"validatePasswordRequirements",()=>s),i.export(n,"validateCheckbox",()=>l),i.export(n,"validatePasswordsMatch",()=>d),i.export(n,"validateSelectField",()=>c),i.export(n,"validatePhoneNumber",()=>p),i.export(n,"validatePhoneNumberOptional",()=>u);let o=e=>""===e.trim()||r(e);function s(e){let t=/[a-z]/.test(e),n=/[A-Z]/.test(e),i=/\d/.test(e),a=/[!@#$%^&*(),.?":{}|<>]/.test(e),r=e.length>=8;return t&&n&&i&&a&&r}function l(e){return e}function d(e,t){return e===t}function c(e){return void 0!==e&&"N/A"!==e}function p(e){return/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)}let u=e=>""===e.trim()||p(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gepHz:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"toggleError",()=>l),i.export(n,"setupValidation",()=>d),i.export(n,"createValidationFunction",()=>c),i.export(n,"createCheckboxValidationFunction",()=>p),i.export(n,"setupCheckboxValidation",()=>u),i.export(n,"validateSelectedSessions",()=>m),i.export(n,"setProfilePicUrl",()=>g),i.export(n,"setupFileUpload",()=>f),i.export(n,"formatPhoneNumber",()=>h);var a=e("@xatom/core"),r=e("@xatom/image"),o=e("../api/apiConfig"),s=e("../auth/authConfig");function l(e,t,n){e.updateTextViaAttrVar({text:n?t:""}),e.setStyle({display:n?"flex":"none"})}function d(e,t,n,i){let a=()=>{let e=n();l(t,e,!!e),i&&""===e&&l(i,"",!1)};e.on("input",a),e.on("blur",a),e.on("change",a)}function c(e,t,n){return()=>t(e.getElement().value)?"":n}function p(e,t){return()=>e.getElement().checked?"":t}function u(e,t,n){let i=p(e,n);d(e,t,i)}function m(e,t,n){let i=e.length>0&&e.some(e=>e.studentIds.length>0);return i?l(t,"",!1):l(t,n,!0),i}function g(e){let t=(0,s.userAuth).getUser();t&&t.profile&&(t.profile.profile_pic=t.profile.profile_pic||{url:""},t.profile.profile_pic.url=e,(0,s.userAuth).setUser(t),localStorage.setItem("auth_user",JSON.stringify(t)))}function f(e,t,n,i){let s=new r.WFImage("#profilePictureImage"),d=new a.WFComponent("#uploadAnimation"),c=new a.WFComponent(".drop-zone"),p=0;return new Promise(a=>{let r=r=>{if(!["image/jpeg","image/jpg"].includes(r.type)&&!/\.(jpg|jpeg)$/i.test(r.name)){l(t,"Only JPEG images are allowed.",!0),e.getElement().value="";return}if(r.size>2097152){l(t,"File size must be less than 2 MB.",!0),e.getElement().value="";return}d.setStyle({display:"flex"}),t.setStyle({display:"none"}),n.setStyle({display:"none"});let u=new FileReader;u.onload=e=>{let t=e.target?.result;s.setImage(t),c.setStyle({display:"none"})},u.readAsDataURL(r);let m=new FormData;m.append("profile_picture",r);let f=localStorage.getItem("current_student");if(f){let e=JSON.parse(f);m.append("student_profile_id",e.id.toString())}let h=(0,o.apiClient).post(i,{data:m});h.onData(i=>{if("success"===i.status){let e=i.url.profile_pic.url;g(e),s.setImage(e),localStorage.setItem("image_upload",e),n.setStyle({display:"flex"}),d.setStyle({display:"none"}),a(e)}else l(t,"Failed to upload profile picture.",!0),d.setStyle({display:"none"}),c.setStyle({display:"none"}),p=0,e.getElement().value=""}),h.onError(n=>{let i="An error occurred during image upload.";n.response&&n.response.data?i=n.response.data.message||i:n.message&&(i=n.message),l(t,i,!0),d.setStyle({display:"none"}),c.setStyle({display:"none"}),p=0,e.getElement().value=""}),h.fetch()};e.on("change",()=>{let t=e.getElement().files?.[0];t&&r(t)});let u=document.body;u.addEventListener("dragenter",e=>{e.preventDefault(),1==++p&&c.setStyle({display:"flex"})}),u.addEventListener("dragleave",()=>{--p<=0&&(c.setStyle({display:"none"}),p=0)}),u.addEventListener("dragover",e=>{e.preventDefault()}),u.addEventListener("drop",e=>{e.preventDefault();let t=e.dataTransfer?.files;t?.length&&r(t[0]),c.setStyle({display:"none"}),p=0})})}let h=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:t.length<=10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../api/apiConfig":"dUmIV","../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,n){var i,a=e("d023971cccd819e3"),r={};Object.defineProperty(r,"WFImage",{get:()=>o,set:void 0,enumerable:!0,configurable:!0});class o extends a.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}i=t.exports,Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||i.hasOwnProperty(e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return r[e]}})})},{d023971cccd819e3:"65YBq"}],aB2QU:[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"initializeSidebarIndicators",()=>o),i.export(n,"setActiveStep",()=>s),i.export(n,"unsetActiveStep",()=>l),i.export(n,"markStepAsCompleted",()=>d),i.export(n,"unmarkStepAsCompleted",()=>c);var a=e("@xatom/core"),r=e("../../../auth/authConfig");let o=()=>{let e=new a.WFComponent("#firstNameText"),t=(0,r.userAuth).getUser();t&&t.profile&&t.profile.first_name?e.setText(t.profile.first_name):e.setText("Friend"),[{id:"sidebarStepOne",index:1},{id:"sidebarStepTwo",index:2},{id:"sidebarStepThree",index:3}].forEach(e=>{let t=new a.WFComponent(`#${e.id}`),n=!1;t.on("click",()=>{n=!n})})},s=e=>{let t=p(e);new a.WFComponent(`#${t}`).addCssClass("is-active")},l=e=>{let t=p(e);new a.WFComponent(`#${t}`).removeCssClass("is-active")},d=e=>{let t=p(e);new a.WFComponent(`#${t}`).getElement().click()},c=e=>{let t=p(e);new a.WFComponent(`#${t}`).getElement().click()},p=e=>({1:"sidebarStepOne",2:"sidebarStepTwo",3:"sidebarStepThree"})[e]||`sidebarStep${e}`},{"@xatom/core":"65YBq","../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"4SgF0":[function(e,t,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"initializeStateFromUrlParams",()=>g);var a=e("../state/donationState"),r=e("../campaignList"),o=e("../campaignProductList"),s=e("../components/sidebarIndicators"),l=e("@xatom/core"),d=e("../components/selectedCampaignDisplay"),c=e("../../../api/apiConfig");let p=()=>{let e=new URLSearchParams(window.location.search);return{campaignId:e.get("campaign"),cancelId:e.get("cancel")}},u=e=>{},m=e=>{},g=async e=>{let{campaignId:t,cancelId:n}=p();(0,s.initializeSidebarIndicators)();let i=new l.WFComponent(".loading_wall");if(t||n){i.setStyle({display:"flex"});try{if(n){let e=(0,c.apiClient).delete(`/donate/cancel_donation/${n}`);await new Promise((t,i)=>{e.onData(()=>{console.log(`Donation ${n} canceled successfully`);let e=new URLSearchParams(window.location.search);e.delete("cancel");let i=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`;window.history.replaceState({},document.title,i),m("Your donation has been successfully canceled."),t()}),e.onError(e=>{console.error(`Failed to cancel donation ${n}:`,e),u("Failed to cancel your donation. Please try again later."),i(e)}),e.fetch()})}if(t){(0,a.clearDonationState)();let n=(await (0,r.initializeCampaignList)("#selectCampaignList")).find(e=>e.id.toString()===t);if(n){(0,a.saveSelectedCampaign)({id:n.id.toString(),name:n.Name,imageUrl:n.Main_Image,description:n.Short_Description,subheading:n.Subheading}),(0,s.markStepAsCompleted)(1),(0,s.setActiveStep)(2),(0,d.updateSelectedCampaignDisplay)();let i=document.querySelector(`input[value="${t}"]`);i&&(i.checked=!0,i.dispatchEvent(new Event("change"))),await (0,o.initializeDynamicProductList)("#selectProductList",t),e.goToIndex(1)}else console.error(`Campaign with ID ${t} not found`),u("Selected campaign not found. Please choose a valid campaign."),e.goToIndex(0)}}catch(t){console.error("Error initializing state from URL parameters:",t),u("An error occurred while initializing. Please try again."),e.goToIndex(0)}finally{i.addCssClass("hidden"),setTimeout(()=>i.setStyle({display:"none"}),500)}}}},{"../state/donationState":"apIbX","../campaignList":"cyN3Q","../campaignProductList":"dw1Mn","../components/sidebarIndicators":"aB2QU","@xatom/core":"65YBq","../components/selectedCampaignDisplay":"iv1HY","../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=makeDonation.51429870.js.map
