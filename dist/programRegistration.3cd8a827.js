!function(e,t,r,o,s){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof n[o]&&n[o],a=i.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,r){if(!a[t]){if(!e[t]){var s="function"==typeof n[o]&&n[o];if(!r&&s)return s(t,!0);if(i)return i(t,!0);if(l&&"string"==typeof t)return l(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}m.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},m.cache={};var p=a[t]=new d.Module(t);e[t][0].call(p.exports,m,p,p.exports,this)}return a[t].exports;function m(e){var t=m.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=a,d.parent=i,d.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(d,"root",{get:function(){return n[o]}}),n[o]=d;for(var c=0;c<t.length;c++)d(t[c])}({QiELz:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"programRegistration",()=>S);var s=e("./programList"),n=e("./workshopList"),i=e("./sessionsList"),a=e("./checkoutPreview"),l=e("./state/selectedProgram"),d=e("./state/selectedWorkshop"),c=e("@xatom/core"),p=e("@xatom/slider"),m=e("./components/sidebarIndicators"),u=e("./components/dialogHandler"),g=e("./components/urlParamNavigator"),h=e("./state/registrationState"),f=e("../../api/apiConfig");let S=async()=>{window.onload=function(){localStorage.removeItem("registrationState")},(0,m.initializeSidebarIndicators)(),(0,m.setActiveStep)(1),await (0,s.initializeProgramList)(),await (0,u.checkForStudents)();let e=new p.WFSlider(".multi-step_form_slider");y(e),await (0,g.initializeStateFromUrlParams)(e)},y=e=>{let t=new c.WFComponent("#submitStepOne"),r=new c.WFComponent("#submitStepOneError"),o=new c.WFComponent("#stepOneRequestingAnimation");t.on("click",async t=>{t.preventDefault();let s=(0,l.loadSelectedProgram)();if(!s.id){r.setText("Please select a program before proceeding."),r.setStyle({display:"block"});return}r.setStyle({display:"none"}),o.setStyle({display:"block"});try{await (0,n.initializeWorkshopList)(s.id);let t=document.querySelector("#selectWorkshopList"),r=t?.querySelectorAll("#cardSelectWorkshop")||[];0===r.length?((0,d.resetSelectedWorkshop)(),await (0,i.initializeSessionList)(void 0,s.id),e.goNext(),(0,m.markStepAsCompleted)(1),(0,m.setActiveStep)(2),e.goNext(),(0,m.markStepAsCompleted)(2),(0,m.setActiveStep)(3)):(e.goNext(),(0,m.markStepAsCompleted)(1),(0,m.setActiveStep)(2),(0,d.resetSelectedWorkshop)())}catch(e){console.error("Error loading workshops:",e)}finally{o.setStyle({display:"none"})}}),new c.WFComponent("#backStepTwo").on("click",()=>{e.goPrevious(),(0,m.unmarkStepAsCompleted)(1),(0,m.unsetActiveStep)(2),(0,d.resetSelectedWorkshop)()});let s=new c.WFComponent("#submitStepTwo"),p=new c.WFComponent("#stepTwoRequestingAnimation"),u=new c.WFComponent("#submitStepTwoError");s.on("click",async t=>{t.preventDefault();let r=(0,d.loadSelectedWorkshop)(),o=(0,l.loadSelectedProgram)(),s=document.querySelector("#selectWorkshopList");if(0!==(s?.querySelectorAll("#cardSelectWorkshop")||[]).length&&!r.id){u.setText("Please select a workshop before proceeding."),u.setStyle({display:"block"});return}u.setStyle({display:"none"}),p.setStyle({display:"block"});try{await (0,i.initializeSessionList)(r.id,o.id),e.goNext(),(0,m.markStepAsCompleted)(2),(0,m.setActiveStep)(3)}catch(e){console.error("Error loading sessions:",e)}finally{p.setStyle({display:"none"})}}),new c.WFComponent("#backStepThree").on("click",()=>{e.goPrevious(),(0,m.unmarkStepAsCompleted)(2),(0,m.unsetActiveStep)(3)});let g=new c.WFComponent("#submitStepThree"),S=new c.WFComponent("#stepThreeRequestingAnimation"),y=new c.WFComponent("#submitStepThreeError");g.on("click",async t=>{t.preventDefault(),S.setStyle({display:"block"});try{await (0,i.validateAndSubmitSessions)()?(await (0,a.initializeCheckoutPreview)(),e.goNext(),(0,m.markStepAsCompleted)(3),(0,m.setActiveStep)(4)):(y.setText("Please select sessions and students before proceeding."),y.setStyle({display:"block"}))}catch(e){console.error("Error during session submission:",e),y.setText("An error occurred. Please try again."),y.setStyle({display:"block"})}finally{S.setStyle({display:"none"})}}),new c.WFComponent("#backStepFour").on("click",()=>{e.goPrevious(),(0,m.unmarkStepAsCompleted)(3),(0,m.unsetActiveStep)(4)});let w=new c.WFComponent("#submitStepFour"),v=new c.WFComponent("#stepFourRequestingAnimation"),C=new c.WFComponent("#submitStepFourError");w.on("click",async e=>{e.preventDefault(),v.setStyle({display:"block"});try{let e=(0,h.loadState)(),t=await (0,f.apiClient).post("/session_registrations/begin_checkout",{data:e}).fetch();console.log("Registration checkout response:",t),(0,m.markStepAsCompleted)(4),t.setup_url?window.location.href=t.setup_url:window.location.href=t.checkout_url}catch(e){console.error("Error during registration checkout:",e),C.setText("An error occurred during registration checkout. Please try again."),C.setStyle({display:"block"})}finally{v.setStyle({display:"none"})}})}},{"./programList":"9PvQg","./workshopList":"caQhI","./sessionsList":"8yBQ3","./checkoutPreview":"1avQb","./state/selectedProgram":"9SM9a","./state/selectedWorkshop":"1ahaO","@xatom/core":"65YBq","@xatom/slider":"ejxGx","./components/sidebarIndicators":"9yhwg","./components/dialogHandler":"euoMA","./components/urlParamNavigator":"fW1lZ","./state/registrationState":"2Pbtv","../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"9PvQg":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeProgramList",()=>l);var s=e("../../api/programs"),n=e("./state/selectedProgram"),i=e("@xatom/core");let a=null,l=async()=>{let e="#selectProgramList",t=document.querySelector(e);if(!t){console.error("Program list container not found");return}a?(t.innerHTML="",t.appendChild(a.cloneNode(!0))):a=t.cloneNode(!0);let r=new i.WFDynamicList(e,{rowSelector:"#cardSelectProgram",loaderSelector:"#programListLoading",emptySelector:"#programListEmpty"});r.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),r.emptyRenderer(e=>(e.setStyle({display:"flex"}),e));try{let e=await (0,s.fetchPrograms)();r.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let o=new i.WFComponent(t),s=o.getChildAsComponent("#cardProgramTitle"),a=o.getChildAsComponent("#cardProgramDescription"),l=o.getChildAsComponent("#cardProgramAges"),d=o.getChildAsComponent("#cardProgramImage"),c=o.getChildAsComponent(".input_card_input"),p=`programInput-${r}`;c.setAttribute("id",p),c.setAttribute("name","program"),c.setAttribute("value",e.id),o.getChildAsComponent("label").setAttribute("for",p),s.setText(e.fieldData.name),a.setText(e.fieldData["short-description"]),l.setText(e.fieldData["age-range"]),d.setAttribute("src",e.fieldData["main-image"].url);let m=o.getChildAsComponent("#registrationTrue");return!0===e.registered?(m.setStyle({display:"flex"}),c.setAttribute("disabled","true")):(m.setStyle({display:"none"}),c.removeAttribute("disabled")),c.on("change",()=>{(0,n.saveSelectedProgram)({id:e.id,name:e.fieldData.name,imageUrl:e.fieldData["main-image"].url,ageRange:e.fieldData["age-range"]})}),t.setStyle({display:"flex"}),t}),r.setData(e)}catch(e){console.error("Error loading programs:",e),r.setData([])}}},{"../../api/programs":"emoCP","./state/selectedProgram":"9SM9a","@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],emoCP:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchPrograms",()=>n),o.export(r,"fetchProgramById",()=>i);var s=e("./apiConfig");let n=async()=>{try{return(await (0,s.apiClient).get("/registration/programs").fetch()).programs}catch(e){throw console.error("Error fetching programs:",e),e}},i=async e=>{try{return(await n()).find(t=>t.id===e)||null}catch(t){return console.error(`Error fetching program with ID ${e}:`,t),null}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"9SM9a":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"loadSelectedProgram",()=>s),o.export(r,"saveSelectedProgram",()=>n);let s=()=>{let e=JSON.parse(localStorage.getItem("registrationState")||"{}");return{id:e.selectedProgramId||null,name:e.selectedProgramName||null,imageUrl:e.selectedProgramImageUrl||null,ageRange:e.selectedProgramAgeRange||null}},n=e=>{let t=JSON.parse(localStorage.getItem("registrationState")||"{}");t.selectedProgramId=e.id,t.selectedProgramName=e.name,t.selectedProgramImageUrl=e.imageUrl,t.selectedProgramAgeRange=e.ageRange,console.log("Saving selected program to state:",t),localStorage.setItem("registrationState",JSON.stringify(t))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],caQhI:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeWorkshopList",()=>l);var s=e("../../api/workshops"),n=e("./state/selectedWorkshop"),i=e("@xatom/core");let a=null,l=async e=>{let t="#selectWorkshopList",r=document.querySelector(t);if(!r){console.error("Workshop list container not found");return}a?(r.innerHTML="",r.appendChild(a.cloneNode(!0))):a=r.cloneNode(!0);let o=new i.WFDynamicList(t,{rowSelector:"#cardSelectWorkshop",loaderSelector:"#workshopListLoading",emptySelector:"#workshopListEmpty"});o.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),o.emptyRenderer(e=>(e.setStyle({display:"flex"}),e));try{let t=await (0,s.fetchWorkshops)(e),r=(Array.isArray(t)?t:[]).sort((e,t)=>e.fieldData.name.localeCompare(t.fieldData.name));o.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let o=new i.WFComponent(t),s=o.getChildAsComponent("#cardWorkshopTitle"),a=o.getChildAsComponent("#cardWorkshopDescription"),l=o.getChildAsComponent("#cardWorkshopAges"),d=o.getChildAsComponent("#cardWorkshopImage"),c=o.getChildAsComponent(".input_card_input"),p=`workshopInput-${r}`;c.setAttribute("id",p),c.setAttribute("name","workshop"),c.setAttribute("value",e.id),o.getChildAsComponent("label").setAttribute("for",p),s.setText(e.fieldData.name),a.setText(e.fieldData["short-description"]),l.setText(e.fieldData["age-range"]),d.setAttribute("src",e.fieldData["main-image"].url);let m=o.getChildAsComponent("#registrationTrue");return!0===e.registered?(m.setStyle({display:"flex"}),c.setAttribute("disabled","true")):(m.setStyle({display:"none"}),c.removeAttribute("disabled")),c.on("change",()=>{(0,n.saveSelectedWorkshop)({id:e.id,name:e.fieldData.name,imageUrl:e.fieldData["main-image"].url,ageRange:e.fieldData["age-range"]})}),t.setStyle({display:"flex"}),t}),o.setData(r)}catch(e){console.error("Error loading workshops:",e),o.setData([])}}},{"../../api/workshops":"6oDbq","./state/selectedWorkshop":"1ahaO","@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"6oDbq":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchWorkshops",()=>n),o.export(r,"fetchWorkshopById",()=>i);var s=e("./apiConfig");let n=async e=>{try{return(await (0,s.apiClient).get(`/registration/workshops?program_id=${e}`).fetch()).workshops}catch(e){throw console.error("Error fetching workshops:",e),e}},i=async e=>{try{return(await (0,s.apiClient).get(`/registration/workshops/${e}`).fetch()).workshop||null}catch(t){return console.error(`Error fetching workshop with ID ${e}:`,t),null}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"1ahaO":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"loadSelectedWorkshop",()=>s),o.export(r,"saveSelectedWorkshop",()=>n),o.export(r,"resetSelectedWorkshop",()=>i);let s=()=>{let e=JSON.parse(localStorage.getItem("registrationState")||"{}");return{id:e.selectedWorkshopId||null,name:e.selectedWorkshopName||null,imageUrl:e.selectedWorkshopImageUrl||null,ageRange:e.selectedWorkshopAgeRange||null}},n=e=>{let t=JSON.parse(localStorage.getItem("registrationState")||"{}");t.selectedWorkshopId=e.id,t.selectedWorkshopName=e.name,t.selectedWorkshopImageUrl=e.imageUrl,t.selectedWorkshopAgeRange=e.ageRange,console.log("Saving selected workshop to state:",t),localStorage.setItem("registrationState",JSON.stringify(t))},i=()=>{let e=JSON.parse(localStorage.getItem("registrationState")||"{}");delete e.selectedWorkshopId,delete e.selectedWorkshopName,delete e.selectedWorkshopImageUrl,delete e.selectedWorkshopAgeRange,console.log("Resetting selected workshop in state:",e),localStorage.setItem("registrationState",JSON.stringify(e))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"8yBQ3":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeSessionList",()=>m),o.export(r,"validateAndSubmitSessions",()=>S);var s=e("../../api/sessions"),n=e("./utils/updateUi"),i=e("../../api/students"),a=e("./state/selectedSessions"),l=e("./state/registrationState"),d=e("@xatom/core");let c=null,p=[],m=async(e,t)=>{let r="#selectSessionList",o=document.querySelector(r);if(!o){console.error("Session list container not found");return}(0,a.resetSelectedSessions)(),c?(o.innerHTML="",o.appendChild(c.cloneNode(!0))):c=o.cloneNode(!0);let m=new d.WFDynamicList(r,{rowSelector:"#sessionSelectWrap",loaderSelector:"#sessionListLoading",emptySelector:"#sessionListEmpty"});m.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),m.emptyRenderer(e=>(e.setStyle({display:"flex"}),e));let f=[];try{let{students:e}=await (0,i.fetchStudentProfiles)();f=e}catch(e){console.error("Error fetching student profiles:",e)}m.rowRenderer(({rowData:e,rowElement:t,index:r})=>{let o=new d.WFComponent(t),s=o.getChildAsComponent("#cardSessionWeekday"),n=o.getChildAsComponent("#cardSessionTime"),i=o.getChildAsComponent("#cardSessionLocation"),l=o.getChildAsComponent("#cardSessionPrice"),c=o.getChildAsComponent("#cardSessionInput"),p=o.getChildAsComponent("#selectStudentsList"),m=o.getChildAsComponent(".hidden_form_field-wrap"),g=`sessionInput-${r}`;c.setAttribute("id",g),c.setAttribute("value",e.id),o.getChildAsComponent("label").setAttribute("for",g),s.setText(e.fieldData.weekday),n.setText(e.fieldData["time-block"]),i.setText(e.fieldData.location);let h=u(l,e);return p.removeAllChildren(),f.forEach(t=>{let r=t.id,o=`${g}-student-${r}`,s=new d.WFComponent(document.createElement("label"));s.addCssClass("pill-item"),s.setAttribute("for",o);let n=new d.WFComponent(document.createElement("input"));n.setAttribute("type","checkbox"),n.addCssClass("pill-checkbox"),n.setAttribute("id",o),n.setAttribute("name","selectedStudents"),n.setAttribute("value",r.toString());let i=new d.WFComponent(document.createElement("span"));i.addCssClass("pill-label"),i.addCssClass("has-icon"),i.setText(`${t.first_name} ${t.last_name}`);let l=new d.WFComponent(document.createElement("div"));l.addCssClass("pill-icon"),l.addCssClass("w-embed"),l.setHTML('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z"></path></svg>'),s.appendChild(n),s.appendChild(i),s.appendChild(l),p.appendChild(s),n.on("change",()=>{let t=n.getElement(),r=parseInt(t.value),o=new CustomEvent("sessionChanged",{detail:{sessionId:e.id,studentId:r,checked:t.checked,initialPriceSelection:h}});document.dispatchEvent(o),(0,a.updateSelectedSessions)(e.id,r,t.checked)})}),c.on("change",()=>{c.getElement().checked?m.setStyle({display:"flex"}):(m.setStyle({display:"none"}),p.getChildAsComponents(".pill-checkbox").forEach(t=>{let r=t.getElement();r.checked=!1;let o=parseInt(r.value),s=new CustomEvent("sessionChanged",{detail:{sessionId:e.id,studentId:o,checked:!1,initialPriceSelection:h}});document.dispatchEvent(s),(0,a.updateSelectedSessions)(e.id,o,!1)}))}),t.setStyle({display:"flex"}),t});try{m.changeLoadingStatus(!0);let r=await (0,s.fetchSessions)(e,t);if(Array.isArray(r)&&r.length>0){p=r,m.setData(r);let e=(0,l.loadState)();e.selectedPricingOption||(e.selectedPricingOption="Annual",(0,l.saveState)(e)),g()}else m.setData([]);m.changeLoadingStatus(!1)}catch(e){console.error("Error loading sessions:",e),m.setData([]),m.changeLoadingStatus(!1)}document.querySelector("#updatePriceAnnual")?.addEventListener("change",()=>{l.logPricingOption("Annual"),g()}),document.querySelector("#updatePriceMonthly")?.addEventListener("change",()=>{l.logPricingOption("Monthly"),g()}),document.querySelector("#updatePriceSemester")?.addEventListener("change",()=>{l.logPricingOption("Pay-Per-Semester"),g()}),document.querySelector("#updatePriceDeposit")?.addEventListener("change",()=>{l.logPricingOption("Deposit"),g()}),h(),(0,n.updateSelectedItemUI)()};(0,n.updateSelectedItemUI)();let u=(e,t)=>{let r;switch(JSON.parse(localStorage.getItem("registrationState")||"{}").selectedPricingOption||"Annual"){case"Annual":r=t.fieldData["displayed-annual-price"];break;case"Monthly":r=t.fieldData["displayed-monthly-price"];break;case"Pay-Per-Semester":r=t.fieldData["displayed-one-off-price"];break;case"Deposit":r=t.fieldData["displayed-deposit-price"];break;default:r=""}return e.setText(r),r},g=()=>{document.querySelectorAll("#sessionSelectWrap").forEach(e=>{let t=e.querySelector("#cardSessionPrice"),r=new d.WFComponent(t),o=e.querySelector(".session-input").value,s=p.find(e=>e.id===o);r&&s&&u(r,s)})},h=()=>{let e=document.getElementById("singleSelectInput");e&&e.addEventListener("change",e=>{f(e.target.value)})},f=e=>{document.querySelectorAll("#sessionSelectWrap").forEach(t=>{let r=t.querySelector("#cardSessionLocation"),o=r?.textContent||"";"N/A"===e||o===e?t.style.display="flex":t.style.display="none"})},S=()=>{let e=JSON.parse(localStorage.getItem("registrationState")||"{}"),t=new d.WFComponent("#submitStepThreeError");if(!e.selectedSessions||0===e.selectedSessions.length)return t.setText("Please select at least one session."),t.setStyle({display:"block"}),!1;for(let r of e.selectedSessions)if(!r.studentIds||0===r.studentIds.length)return t.setText("Please select at least one student for each session."),t.setStyle({display:"block"}),!1;return t.setStyle({display:"none"}),(0,l.saveState)(e),!0}},{"../../api/sessions":"gSiEx","./utils/updateUi":"f5R2n","../../api/students":"9PiOd","./state/selectedSessions":"9QhCf","./state/registrationState":"2Pbtv","@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gSiEx:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchSessions",()=>n);var s=e("./apiConfig");let n=async(e,t)=>{try{return(await (0,s.apiClient).get(`/registration/sessions?workshop_id=${e}&program_id=${t}`).fetch()).sessions||[]}catch(e){throw console.error("Error fetching sessions:",e),e}}},{"./apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],f5R2n:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"updateSelectedItemUI",()=>a);var s=e("../state/selectedProgram"),n=e("../state/selectedWorkshop"),i=e("@xatom/core");let a=()=>{let e=(0,s.loadSelectedProgram)(),t=(0,n.loadSelectedWorkshop)(),r=new i.WFComponent("#selectedProgramTitle"),o=new i.WFComponent("#selectedWorkshopTitle"),a=new i.WFComponent("#selectedAgeRange"),l=new i.WFComponent("#selectedImage"),d=new i.WFComponent("#selectedProgramTitleFinal"),c=new i.WFComponent("#selectedWorkshopTitleFinal"),p=new i.WFComponent("#selectedAgeRangeFinal"),m=new i.WFComponent("#selectedImageFinal"),u=(r,o,s,n)=>{if(r.setText(e.name),t.id){o.setText(t.name),o.setStyle({display:"block"}),s.setText(t.ageRange);let r=t.imageUrl||e.imageUrl;n.setAttribute("src",r)}else o.setStyle({display:"none"}),s.setText(e.ageRange),n.setAttribute("src",e.imageUrl)};e.id&&u(r,o,a,l),e.id&&u(d,c,p,m)}},{"../state/selectedProgram":"9SM9a","../state/selectedWorkshop":"1ahaO","@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"9PiOd":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchStudentProfiles",()=>i);var s=e("./apiConfig"),n=e("../modules/registration/state/registrationState");let i=async()=>{try{let e=await (0,s.apiClient).get("/profiles/student_profiles").fetch();if(!e.students)return console.error("No students property in response"),{students:[],showDialog:!0};{let t=e.students.filter(e=>"Pending"===e.Status).map(e=>`${e.first_name} ${e.last_name}`);return console.log("Pending Students:",t),(0,n.saveState)({pendingStudents:t}),{students:e.students,showDialog:0===e.students.length}}}catch(e){return console.error("Error fetching student profiles:",e),{students:[],showDialog:!0}}}},{"./apiConfig":"dUmIV","../modules/registration/state/registrationState":"2Pbtv","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"2Pbtv":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"loadState",()=>s),o.export(r,"saveState",()=>n),o.export(r,"logPricingOption",()=>i),o.export(r,"getPendingStudents",()=>a);let s=()=>{let e=localStorage.getItem("registrationState");return e?JSON.parse(e):{}},n=e=>{let t={...s(),...e};localStorage.setItem("registrationState",JSON.stringify(t))},i=e=>{n({selectedPricingOption:e})},a=()=>s().pendingStudents||[]},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"9QhCf":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"loadSelectedSession",()=>s),o.export(r,"saveSelectedSession",()=>n),o.export(r,"resetSelectedSessions",()=>i),o.export(r,"updateSelectedSessions",()=>a);let s=()=>JSON.parse(localStorage.getItem("registrationState")||"{}").selectedSession||null,n=e=>{let t=JSON.parse(localStorage.getItem("registrationState")||"{}");t.selectedSession=e,localStorage.setItem("registrationState",JSON.stringify(t))},i=()=>{let e=JSON.parse(localStorage.getItem("registrationState")||"{}");e.selectedSessions=[],localStorage.setItem("registrationState",JSON.stringify(e))},a=(e,t,r)=>{let o=JSON.parse(localStorage.getItem("registrationState")||"{}");o.selectedSessions||(o.selectedSessions=[]);let s=o.selectedSessions.find(t=>t.sessionId===e);r?s?s.studentIds.includes(t)||s.studentIds.push(t):(s={sessionId:e,studentIds:[t]},o.selectedSessions.push(s)):s&&(s.studentIds=s.studentIds.filter(e=>e!==t),0===s.studentIds.length&&(o.selectedSessions=o.selectedSessions.filter(t=>t.sessionId!==e))),localStorage.setItem("registrationState",JSON.stringify(o))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"1avQb":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeCheckoutPreview",()=>u);var s=e("./utils/updateUi"),n=e("../../api/apiConfig"),i=e("./state/registrationState"),a=e("./components/alertBox"),l=e("./components/primaryPaymentRadios"),d=e("./components/lineItems"),c=e("./components/updateTotalAmount"),p=e("./components/financialAid"),m=e("./components/alertBoxEarly");let u=async()=>{try{let e=(0,i.loadState)(),t=await (0,n.apiClient).post("/registration/checkout-preview",{data:e}).fetch();console.log("Checkout Preview Data:",t),(0,s.updateSelectedItemUI)(),(0,a.initializeAlertBox)();let{selectedPricingOption:r,early_registration:o,start_date:u}=t,g={annual_line_items:t.annual_line_items,monthly_line_items:t.monthly_line_items,semester_line_items:t.semester_line_items,deposit_line_items:t.deposit_line_items};(0,i.saveState)({checkoutPreview:t,selectedPricingOption:r,early_registration:o,start_date:t.start_date}),(0,l.initializePrimaryPaymentRadios)(r),(0,p.initializeFinancialAid)();let h=e.pendingStudents?.length>0,f=o&&"Monthly"===r||h;if(console.log(`shouldShowDeposit: ${f}`),f){let e=t.deposit_line_items;console.log("Initial deposit line items:",e),(0,d.renderLineItems)(e,!0),(0,c.updateTotalAmount)(!0,r),console.log("Initial deposit line items rendered.")}else{let e=(0,d.getLineItemsForSelectedOption)(r,g);(0,d.renderLineItems)(e),(0,c.updateTotalAmount)(!1,r),console.log("Initial primary line items rendered.")}(0,m.initializeAlertBoxEarly)()}catch(e){console.error("Error fetching checkout preview data:",e)}}},{"./utils/updateUi":"f5R2n","../../api/apiConfig":"dUmIV","./state/registrationState":"2Pbtv","./components/alertBox":"bIj2D","./components/primaryPaymentRadios":"c4bfd","./components/lineItems":"hN0Ua","./components/updateTotalAmount":"l9HwZ","./components/financialAid":"dDV9Y","./components/alertBoxEarly":"8h0nb","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bIj2D:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeAlertBox",()=>n);var s=e("../state/registrationState");let n=()=>{let e=document.querySelector("#alertBox"),t=document.querySelector("#alertPendingStudentList");if(!e||!t){console.error("Alert box elements not found");return}let r=(0,s.getPendingStudents)();r.length>0?(e.style.display="flex",t.innerHTML=r.map(e=>`<li>${e}</li>`).join("")):e.style.display="none"}},{"../state/registrationState":"2Pbtv","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],c4bfd:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializePrimaryPaymentRadios",()=>d);var s=e("@xatom/core"),n=e("../state/registrationState"),i=e("./lineItems"),a=e("./updateTotalAmount"),l=e("./alertBoxEarly");let d=e=>{let t=[{key:"Annual",id:"annualPlan",wrapId:"annualRadioWrap"},{key:"Monthly",id:"monthlyPlan",wrapId:"monthlyRadioWrap"},{key:"Pay-Per-Semester",id:"semesterPlan",wrapId:"semesterRadioWrap"}];t.forEach(t=>{let r=new(0,s.WFComponent)(`#${t.id}`).getElement(),o=new(0,s.WFComponent)(`#${t.wrapId}`).getElement();t.key===e&&(r.checked=!0),o.classList.remove("is-disabled"),r.disabled=!1}),t.forEach(e=>{new(0,s.WFComponent)(`#${e.id}`).getElement().addEventListener("change",e=>{let t=e.target;if(t.checked){(0,n.saveState)({selectedPricingOption:t.value});let e=(0,n.loadState)();console.log("Current Registration State:",e);let r={annual_line_items:e.checkoutPreview?.annual_line_items??[],monthly_line_items:e.checkoutPreview?.monthly_line_items??[],semester_line_items:e.checkoutPreview?.semester_line_items??[]},o=e.early_registration&&"Monthly"===t.value||e.pendingStudents?.length>0;if(console.log(`shouldShowDeposit: ${o}`),o){let o=e.checkoutPreview?.deposit_line_items??[];if(o.length>0)console.log("Rendering Deposit Line Items:",o),(0,i.renderLineItems)(o,!0),(0,a.updateTotalAmount)(!0,t.value),console.log(`Deposit line items rendered for ${t.value}`);else{console.warn("Deposit line items are empty or undefined.");let e=(0,i.getLineItemsForSelectedOption)(t.value,r);(0,i.renderLineItems)(e),(0,a.updateTotalAmount)(!1,t.value),console.log(`Primary line items rendered for ${t.value} due to missing deposit items.`)}}else{let e=(0,i.getLineItemsForSelectedOption)(t.value,r);(0,i.renderLineItems)(e),(0,a.updateTotalAmount)(!1,t.value),console.log(`Primary line items rendered for ${t.value}`)}console.log(`Primary pricing option selected: ${t.value}`),(0,l.initializeAlertBoxEarly)()}})})}},{"@xatom/core":"65YBq","../state/registrationState":"2Pbtv","./lineItems":"hN0Ua","./updateTotalAmount":"l9HwZ","./alertBoxEarly":"8h0nb","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],hN0Ua:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"renderLineItems",()=>n),o.export(r,"getLineItemsForSelectedOption",()=>i);var s=e("@xatom/core");let n=(e,t=!1)=>{let r=new s.WFComponent("#lineItemList");r.removeAllChildren(),console.log(`Rendering ${t?"Deposit":"Primary"} Line Items:`,e),e.forEach(e=>{let o=document.createElement("tr");o.className="table_row"+(t?" deposit_row":"");let s=document.createElement("td");s.className="table_cell",s.textContent=e.product_name,o.appendChild(s);let n=document.createElement("td");n.className="table_cell",n.textContent=`$${e.unit_amount}`,o.appendChild(n);let i=document.createElement("td");i.className="table_cell",i.textContent=`${e.quantity}`,o.appendChild(i);let a=document.createElement("td");a.className="table_cell",a.textContent=`$${e.total_amount}`,o.appendChild(a),r.getElement().appendChild(o)}),t?(r.getElement().classList.add("has-deposit"),console.log("Deposit line items have been added.")):(r.getElement().classList.remove("has-deposit"),console.log("Primary line items have been added."))},i=(e,t)=>{switch(e){case"Annual":return t.annual_line_items;case"Monthly":return t.monthly_line_items;case"Pay-Per-Semester":return t.semester_line_items;default:return console.warn("Unknown pricing option:",e),[]}}},{"@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],l9HwZ:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"updateTotalAmount",()=>l);var s=e("@xatom/core"),n=e("../state/registrationState"),i=e("../utils/formatting"),a=e("./updateSecondaryTotalAmount");let l=(e=!1,t)=>{let r,o;let l=(0,n.loadState)(),d=new s.WFComponent("#primaryTotalAmount"),c=new s.WFComponent("#primaryOriginalAmount"),p=new s.WFComponent("#primaryDiscountPill"),m=new s.WFComponent("#primaryDiscountNumber"),u=new s.WFComponent("#secondaryAmountWrap"),g=new s.WFComponent("#secondaryTotalAmount"),h=new s.WFComponent("#secondaryOriginalAmount"),f=new s.WFComponent("#secondaryDiscountPill"),S=new s.WFComponent("#secondaryDiscountNumber");console.log(`updateTotalAmount called with includeDeposit=${e} and selectedPricingOption=${t}`);let y="",w=t||l.selectedPricingOption;switch(w){case"Annual":o=l.checkoutPreview?.annual_amount_due,y="Per Year";break;case"Monthly":o=l.checkoutPreview?.monthly_amount_due,y="Per Month";break;case"Pay-Per-Semester":o=l.checkoutPreview?.semester_amount_due,y="Per Semester";break;default:console.warn("Unknown pricing option:",w)}if(e){let e=l.checkoutPreview?.deposit_amount_due;void 0!==e?d.setText(`${(0,i.formatCurrency)(e)} Total`):d.setText("$0.00 Total"),(0,a.updateSecondaryTotalAmount)(),u.setStyle({display:"flex",flexDirection:"column"}),console.log("SecondaryAmountWrap displayed as flex."),p.setStyle({display:"none"}),m.setText(""),c.setStyle({display:"none"}),console.log("Primary discount pill hidden.")}else{if(l.selected_discount){let e=parseFloat(l.selected_discount);r=o?o*(1-e/100):0,p.setStyle({display:"block"}),m.setText(`${e}%`),c.setText(`was ${(0,i.formatCurrency)(o)} ${y}`),c.setStyle({display:"block"}),console.log("Applied discount to primary total.")}else r=o,p.setStyle({display:"none"}),c.setStyle({display:"none"}),m.setText(""),console.log("No discount applied to primary total.");void 0!==r?d.setText(`${(0,i.formatCurrency)(r)} ${y}`):d.setText(`$0.00 ${y}`),u.setStyle({display:"none"}),console.log("SecondaryAmountWrap hidden."),g.setText(`$0.00 ${y}`),h.setStyle({display:"none"}),f.setStyle({display:"none"}),S.setText("")}}},{"@xatom/core":"65YBq","../state/registrationState":"2Pbtv","../utils/formatting":"fevto","./updateSecondaryTotalAmount":"kQasf","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],fevto:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"formatCurrency",()=>s);let s=e=>{let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"$0.00":t.toLocaleString("en-US",{style:"currency",currency:"USD"})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],kQasf:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"updateSecondaryTotalAmount",()=>a);var s=e("@xatom/core"),n=e("../state/registrationState"),i=e("../utils/formatting");let a=()=>{let e;let t=(0,n.loadState)(),r=new s.WFComponent("#secondaryTotalAmount"),o=new s.WFComponent("#secondaryOriginalAmount"),a=new s.WFComponent("#secondaryDiscountPill"),l=new s.WFComponent("#secondaryDiscountNumber"),d=t.selectedPricingOption,c="";switch(d){case"Annual":e=t.checkoutPreview?.annual_amount_due,c="Per Year";break;case"Monthly":e=t.checkoutPreview?.monthly_amount_due,c="Per Month";break;case"Pay-Per-Semester":e=t.checkoutPreview?.semester_amount_due,c="Per Semester";break;default:console.warn("Unknown pricing option:",d)}if(t.selected_discount&&void 0!==e){let s=parseFloat(t.selected_discount),n=e*(1-s/100);a.setStyle({display:"block"}),l.setText(`${s}%`),o.setText(`was ${(0,i.formatCurrency)(e)} ${c}`),o.setStyle({display:"block"}),r.setText(`${(0,i.formatCurrency)(n)} ${c}`),console.log("Applied discount to secondary total.")}else void 0!==e?r.setText(`${(0,i.formatCurrency)(e)} ${c}`):r.setText(`$0.00 ${c}`),a.setStyle({display:"none"}),o.setStyle({display:"none"}),l.setText(""),console.log("No discount applied to secondary total.")}},{"@xatom/core":"65YBq","../state/registrationState":"2Pbtv","../utils/formatting":"fevto","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"8h0nb":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeAlertBoxEarly",()=>n);var s=e("../state/registrationState");let n=()=>{let e=document.querySelector("#alertBoxEarly"),t=document.querySelector("#startDate");if(!e||!t){console.error("Early Alert Box elements not found");return}let{selectedPricingOption:r,early_registration:o,checkoutPreview:n}=(0,s.loadState)();if("Monthly"===r&&o&&n&&n.start_date){let r=new Date(n.start_date),o=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}).format(r);t.textContent=o,e.style.display="flex",console.log("Early registration alert box displayed with start date:",o)}else e.style.display="none",console.log("Early registration alert box hidden")}},{"../state/registrationState":"2Pbtv","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],dDV9Y:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeFinancialAid",()=>d);var s=e("@xatom/core"),n=e("../state/registrationState"),i=e("./updateTotalAmount"),a=e("../../../utils/formUtils"),l=e("../../../utils/validationUtils");let d=()=>{let e=new s.WFComponent("#requestFinAid"),t=new s.WFComponent("#finaidForm");e.on("change",()=>{let r=e.getElement(),o=(0,n.loadState)();if(r.checked)t.getElement().showModal();else{(0,n.saveState)({fin_aid_requested:!1,selected_discount:void 0});let e=o.pendingStudents?.length>0||o.early_registration&&"Monthly"===o.selectedPricingOption;(0,i.updateTotalAmount)(e,o.selectedPricingOption)}}),t.getElement()?.addEventListener("close",()=>{n.loadState().selected_discount||(e.getElement().checked=!1)}),m(),new s.WFComponent("#submitfinancialAid").on("click",()=>{u()&&(g(),h())}),p(t);let r=new s.WFComponent("#annualIncome"),o=new s.WFComponent("#monthlyExpense"),a=e=>{let t=e.getElement(),r=t.value.replace(/[^\d.-]/g,""),o=t.selectionStart||0,s=(t.value.slice(0,o).match(/,/g)||[]).length;if(r.includes(".")){let[e,t]=r.split(".");r=`${e}.${t.slice(0,2)}`}let n=l(r);t.value=n;let i=(t.value.slice(0,o).match(/,/g)||[]).length;(o+=i-s)>n.length&&(o=n.length),t.setSelectionRange(o,o)},l=e=>{let t=parseFloat(e.replace(/,/g,""));return isNaN(t)?e:t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})};r.on("input",()=>a(r)),o.on("input",()=>a(o))},c=e=>{e.getElement().close()},p=e=>{new s.WFComponent("#close-dialog-btn").on("click",()=>c(e)),e.getElement()?.addEventListener("click",t=>{let r=e.getElement().getBoundingClientRect();(t.clientX<r.left||t.clientX>r.right||t.clientY<r.top||t.clientY>r.bottom)&&c(e)})},m=()=>{let e=new s.WFComponent("#finaidRelationship"),t=new s.WFComponent("#finaidRelationshipError"),r=document.getElementsByName("previous_participant"),o=new s.WFComponent("#previousParticipantError"),n=new s.WFComponent("#annualIncome"),i=new s.WFComponent("#annualIncomeError"),d=new s.WFComponent("#monthlyExpense"),c=new s.WFComponent("#monthlyExpenseError");(0,a.setupValidation)(e,t,()=>(0,l.validateSelectField)(f(e))?"":"Please select a relationship."),(0,a.setupValidation)(n,i,()=>(0,l.validateNotEmpty)(f(n))?"":"Please enter your annual household income."),(0,a.setupValidation)(d,c,()=>(0,l.validateNotEmpty)(f(d))?"":"Please enter your monthly expenditure."),Array.from(r).forEach(e=>{(0,a.setupValidation)(new s.WFComponent(e),o,()=>Array.from(r).some(e=>e.checked)?"":"Please select an option.")})},u=()=>{let e=new s.WFComponent("#finaidRelationship"),t=new s.WFComponent("#annualIncome"),r=new s.WFComponent("#monthlyExpense"),o=document.getElementsByName("previous_participant"),n=(0,l.validateSelectField)(f(e));(0,a.toggleError)(new s.WFComponent("#finaidRelationshipError"),"Please select a relationship.",!n);let i=(0,l.validateNotEmpty)(f(t));(0,a.toggleError)(new s.WFComponent("#annualIncomeError"),"Please enter your annual household income.",!i);let d=(0,l.validateNotEmpty)(f(r));(0,a.toggleError)(new s.WFComponent("#monthlyExpenseError"),"Please enter your monthly expenditure.",!d);let c=Array.from(o).some(e=>e.checked);return(0,a.toggleError)(new s.WFComponent("#previousParticipantError"),"Please select an option.",!c),n&&i&&d&&c},g=()=>{let e=new s.WFComponent("#finaidRelationship").getElement().value,t=new s.WFComponent("#annualIncome").getElement().value,r=new s.WFComponent("#monthlyExpense").getElement().value,o=document.querySelector("input[name='previous_participant']:checked"),i=o?o.value:"";(0,n.saveState)({fin_aid_requested:!0,selected_discount:"",financialAidData:{relationship:e,annualIncome:t,monthlyExpense:r,previousParticipant:i}}),console.log("Financial aid data saved:",{relationship:e,annualIncome:t,monthlyExpense:r,previousParticipant:i})},h=()=>{let e=new s.WFComponent(".success-message"),t=new s.WFComponent("#wf-form-Finaid-Form");t.setStyle({display:"none"}),e.setStyle({display:"block"});let r=new s.WFComponent("#applyDiscount"),o=new s.WFComponent("#backFinAid"),a=new s.WFComponent("#finaidForm");r.on("click",()=>{let e=document.querySelector("input[name='discountValue']:checked");if(e){let t=e.value,r=(0,n.loadState)();(0,n.saveState)({selected_discount:t}),(0,n.saveState)({fin_aid_requested:!0});let o=r.pendingStudents?.length>0||r.early_registration&&"Monthly"===r.selectedPricingOption;(0,i.updateTotalAmount)(o,r.selectedPricingOption),console.log(`Discount applied: ${t}%`),c(a)}else console.warn("No discount selected.")}),o.on("click",()=>{e.setStyle({display:"none"}),t.setStyle({display:"flex"})})},f=e=>e.getElement().value},{"@xatom/core":"65YBq","../state/registrationState":"2Pbtv","./updateTotalAmount":"l9HwZ","../../../utils/formUtils":"gepHz","../../../utils/validationUtils":"gu2z7","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gepHz:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"toggleError",()=>l),o.export(r,"setupValidation",()=>d),o.export(r,"createValidationFunction",()=>c),o.export(r,"createCheckboxValidationFunction",()=>p),o.export(r,"setupCheckboxValidation",()=>m),o.export(r,"validateSelectedSessions",()=>u),o.export(r,"setProfilePicUrl",()=>g),o.export(r,"setupFileUpload",()=>h),o.export(r,"formatPhoneNumber",()=>f);var s=e("@xatom/core"),n=e("@xatom/image"),i=e("../api/apiConfig"),a=e("../auth/authConfig");function l(e,t,r){e.updateTextViaAttrVar({text:r?t:""}),e.setStyle({display:r?"flex":"none"})}function d(e,t,r,o){let s=()=>{let e=r();l(t,e,!!e),o&&""===e&&l(o,"",!1)};e.on("input",s),e.on("blur",s),e.on("change",s)}function c(e,t,r){return()=>t(e.getElement().value)?"":r}function p(e,t){return()=>e.getElement().checked?"":t}function m(e,t,r){let o=p(e,r);d(e,t,o)}function u(e,t,r){let o=e.length>0&&e.some(e=>e.studentIds.length>0);return o?l(t,"",!1):l(t,r,!0),o}function g(e){let t=(0,a.userAuth).getUser();t&&t.profile&&(t.profile.profile_pic=t.profile.profile_pic||{url:""},t.profile.profile_pic.url=e,(0,a.userAuth).setUser(t),localStorage.setItem("auth_user",JSON.stringify(t)))}function h(e,t,r,o){let a=new n.WFImage("#profilePictureImage"),d=new s.WFComponent("#uploadAnimation"),c=new s.WFComponent(".drop-zone"),p=0;return new Promise(s=>{let n=n=>{if(!["image/jpeg","image/jpg"].includes(n.type)&&!/\.(jpg|jpeg)$/i.test(n.name)){l(t,"Only JPEG images are allowed.",!0),e.getElement().value="";return}if(n.size>2097152){l(t,"File size must be less than 2 MB.",!0),e.getElement().value="";return}d.setStyle({display:"flex"}),t.setStyle({display:"none"}),r.setStyle({display:"none"});let m=new FileReader;m.onload=e=>{let t=e.target?.result;a.setImage(t),c.setStyle({display:"none"})},m.readAsDataURL(n);let u=new FormData;u.append("profile_picture",n);let h=localStorage.getItem("current_student");if(h){let e=JSON.parse(h);u.append("student_profile_id",e.id.toString())}let f=(0,i.apiClient).post(o,{data:u});f.onData(o=>{if("success"===o.status){let e=o.url.profile_pic.url;g(e),a.setImage(e),localStorage.setItem("image_upload",e),r.setStyle({display:"flex"}),d.setStyle({display:"none"}),s(e)}else l(t,"Failed to upload profile picture.",!0),d.setStyle({display:"none"}),c.setStyle({display:"none"}),p=0,e.getElement().value=""}),f.onError(r=>{let o="An error occurred during image upload.";r.response&&r.response.data?o=r.response.data.message||o:r.message&&(o=r.message),l(t,o,!0),d.setStyle({display:"none"}),c.setStyle({display:"none"}),p=0,e.getElement().value=""}),f.fetch()};e.on("change",()=>{let t=e.getElement().files?.[0];t&&n(t)});let m=document.body;m.addEventListener("dragenter",e=>{e.preventDefault(),1==++p&&c.setStyle({display:"flex"})}),m.addEventListener("dragleave",()=>{--p<=0&&(c.setStyle({display:"none"}),p=0)}),m.addEventListener("dragover",e=>{e.preventDefault()}),m.addEventListener("drop",e=>{e.preventDefault();let t=e.dataTransfer?.files;t?.length&&n(t[0]),c.setStyle({display:"none"}),p=0})})}let f=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:t.length<=10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../api/apiConfig":"dUmIV","../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var o,s=e("d023971cccd819e3"),n={};Object.defineProperty(n,"WFImage",{get:()=>i,set:void 0,enumerable:!0,configurable:!0});class i extends s.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}o=t.exports,Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return n[e]}})})},{d023971cccd819e3:"65YBq"}],gu2z7:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function s(e){return void 0!==e&&""!==e.trim()}function n(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}o.defineInteropFlag(r),o.export(r,"validateNotEmpty",()=>s),o.export(r,"validateEmail",()=>n),o.export(r,"validateEmailOptional",()=>i),o.export(r,"validatePasswordRequirements",()=>a),o.export(r,"validateCheckbox",()=>l),o.export(r,"validatePasswordsMatch",()=>d),o.export(r,"validateSelectField",()=>c),o.export(r,"validatePhoneNumber",()=>p),o.export(r,"validatePhoneNumberOptional",()=>m);let i=e=>""===e.trim()||n(e);function a(e){let t=/[a-z]/.test(e),r=/[A-Z]/.test(e),o=/\d/.test(e),s=/[!@#$%^&*(),.?":{}|<>]/.test(e),n=e.length>=8;return t&&r&&o&&s&&n}function l(e){return e}function d(e,t){return e===t}function c(e){return void 0!==e&&"N/A"!==e}function p(e){return/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)}let m=e=>""===e.trim()||p(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],ejxGx:[function(e,t,r){var o,s=e("1a87f3bc23b90fa3"),n=e("37b5fd8189a9f4c7"),i={};Object.defineProperty(i,"WFSlider",{get:()=>l,set:void 0,enumerable:!0,configurable:!0});let a=window.jQuery;class l extends s.WFComponent{_sliderConfig={};_slides=[];_defaultSwipeDisabled=!1;_index=0;_listeners=new Map;constructor(e){super(e),this.init()}init(){this._defaultSwipeDisabled="true"===this.getAttribute("data-disable-swipe"),this._sliderConfig=a(this.getElement()).data()[".wSlider"],this._slides=Array.from(this._sliderConfig.slides).map(e=>new s.WFComponent(e)),this._mask=new s.WFComponent(this._sliderConfig.mask[0]),this._nav=new s.WFComponent(this._sliderConfig.nav[0]),this._left=new s.WFComponent(this._sliderConfig.left[0]),this._right=new s.WFComponent(this._sliderConfig.right[0]),function(e,t){let r,o;if(document.styleSheets&&0!=document.getElementsByTagName("head").length){if(document.styleSheets.length>0){for(var s=0,n=document.styleSheets.length;s<n;s++)if(!document.styleSheets[s].disabled){var i=document.styleSheets[s].media;if("string"==(o=typeof i)?""!==i&&-1===i.indexOf("screen")||(r=document.styleSheets[s]):"object"==o&&(""!==i.mediaText&&-1===i.mediaText.indexOf("screen")||(r=document.styleSheets[s])),void 0!==r)break}}if(void 0===r){var a=document.createElement("style");for(a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),s=0;s<document.styleSheets.length;s++)document.styleSheets[s].disabled||(r=document.styleSheets[s]);o=typeof r.media}if("string"===o){for(s=0,n=r.rules.length;s<n;s++)if(r.rules[s].selectorText&&r.rules[s].selectorText.toLowerCase()==e.toLowerCase())return void(r.rules[s].style.cssText=t);r.addRule(e,t)}else if("object"===o){var l=r.cssRules?r.cssRules.length:0;for(s=0;s<l;s++)if(r.cssRules[s].selectorText&&r.cssRules[s].selectorText.toLowerCase()==e.toLowerCase())return void(r.cssRules[s].style.cssText=t);r.insertRule(e+"{"+t+"}",l)}}}(".xa-slider-disable","display:none !important;");let e=this;Object.defineProperty(e._sliderConfig,"index",{set:function(t){e._index=t,e._triggerOnChange()},get:function(){return e._index}}),this.refereshSlides()}reloadWFSlider(){window.Webflow.require("slider").destroy(),window.Webflow.require("slider").redraw(),window.Webflow.require("slider").ready()}refereshSlides(){this._mask.getChildAsComponents(".w-slide").forEach(e=>e.remove()),this._slides.reverse().forEach(e=>{this._mask.getElement().prepend(e.getElement())}),this._slides.reverse(),this.reloadWFSlider()}getActiveSlide(){return this._slides[this._index]}getAllSlides(){return[...this._slides]}getSlideByIndex(e){return this._slides[e]}getActiveSlideIndex(){return this._index}getPreviousSlideIndex(){return this._sliderConfig.previous}goNext(){this._sliderConfig.right.click()}goPrevious(){this._sliderConfig.left.click()}goToIndex(e){e>=0&&e<this._slides.length&&(console.log(e),a(this._sliderConfig.nav.children()[e]).click())}addSlide(e,t={}){let r=t.index,o=t.cssClass,n=(0,s.createComponent)("div");n.addCssClass("w-slide"),o&&n.addCssClass(o),n.appendChild(e);let i="number"!=typeof r?-1:r,a=this._slides;i>=0&&i<=a.length?a.splice(r,0,n):a.push(n),this._slides=[...a],this.refereshSlides()}removeSlide(e){let t=[...this._slides];e>=0&&e<t.length&&t.splice(e,1),this._slides=[...t],console.log(this._slides),this.refereshSlides()}getSlideNav(){return this._nav}setSlideNavigationState(e){e?(this._left.removeCssClass("xa-slider-disable"),this._right.removeCssClass("xa-slider-disable"),this._nav.removeCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe",this._defaultSwipeDisabled?"true":"false")):(this._left.addCssClass("xa-slider-disable"),this._right.addCssClass("xa-slider-disable"),this._nav.addCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe","true")),this.reloadWFSlider()}onSlideChange(e){let t=(0,n.v4)();return this._listeners.set(t,e),()=>{this._listeners.delete(t)}}_triggerOnChange(){Array.from(this._listeners.values()).forEach(e=>{e(this._index,this._sliderConfig.previous)})}getConfig(){return this._sliderConfig}}o=t.exports,Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return i[e]}})})},{"1a87f3bc23b90fa3":"65YBq","37b5fd8189a9f4c7":"faiuA"}],"9yhwg":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeSidebarIndicators",()=>i),o.export(r,"setActiveStep",()=>a),o.export(r,"unsetActiveStep",()=>l),o.export(r,"markStepAsCompleted",()=>d),o.export(r,"unmarkStepAsCompleted",()=>c);var s=e("@xatom/core"),n=e("../../../auth/authConfig");let i=()=>{let e=new s.WFComponent("#firstNameText"),t=(0,n.userAuth).getUser();t&&t.profile&&t.profile.first_name?e.setText(t.profile.first_name):e.setText("Friend"),[{id:"sidebarStepOne",index:1},{id:"sidebarStepTwo",index:2},{id:"sidebarStepThree",index:3},{id:"sidebarStepFour",index:4},{id:"sidebarStepFive",index:5}].forEach(e=>{let t=new s.WFComponent(`#${e.id}`),r=!1;t.on("click",()=>{r=!r})})},a=e=>{let t=p(e);new s.WFComponent(`#${t}`).addCssClass("is-active")},l=e=>{let t=p(e);new s.WFComponent(`#${t}`).removeCssClass("is-active")},d=e=>{let t=p(e);new s.WFComponent(`#${t}`).getElement().click()},c=e=>{let t=p(e);new s.WFComponent(`#${t}`).getElement().click()},p=e=>({1:"sidebarStepOne",2:"sidebarStepTwo",3:"sidebarStepThree",4:"sidebarStepFour",5:"sidebarStepFive"})[e]||`sidebarStep${e}`},{"@xatom/core":"65YBq","../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],euoMA:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"displayActionRequiredDialog",()=>i),o.export(r,"checkForStudents",()=>a);var s=e("@xatom/core"),n=e("../../../api/students");let i=()=>{let e=new s.WFComponent("#actionRequiredDialog"),t=new s.WFComponent("#alertDialogAnimationTrigger"),r=document.querySelector(".page_main");e.getElement().showModal(),t.getElement().click(),r&&r.setAttribute("data-brand","5"),e.getElement().addEventListener("cancel",e=>{e.preventDefault()}),e.getElement().addEventListener("close",e=>{e.preventDefault()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&e.preventDefault()})},a=async()=>{try{let{students:e,showDialog:t}=await (0,n.fetchStudentProfiles)();t&&i()}catch(e){console.error("Error during registration initialization:",e)}}},{"@xatom/core":"65YBq","../../../api/students":"9PiOd","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],fW1lZ:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStateFromUrlParams",()=>u);var s=e("../state/selectedWorkshop"),n=e("../../registration/programList"),i=e("../../registration/workshopList"),a=e("../../registration/sessionsList"),l=e("../../registration/components/sidebarIndicators"),d=e("@xatom/core"),c=e("../../../api/apiConfig"),p=e("../../registration/components/alertBoxEarly");let m=()=>{let e=new URLSearchParams(window.location.search);return{programId:e.get("program"),workshopId:e.get("workshop"),cancelId:e.get("cancel")}},u=async e=>{let{programId:t,workshopId:r,cancelId:o}=m();(0,l.initializeSidebarIndicators)();let u=new d.WFComponent(".loading_wall");if(t||r||o){u.setStyle({display:"flex"});try{if(o){let e=(0,c.apiClient).delete(`/subscriptions/${o}`);await new Promise((t,r)=>{e.onData(()=>{console.log(`Subscription ${o} canceled successfully`);let e=new URLSearchParams(window.location.search);e.delete("cancel");let r=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`;window.history.replaceState({},document.title,r),t()}),e.onError(e=>{console.error(`Failed to cancel subscription ${o}:`,e),r(e)}),e.fetch()})}if(await (0,n.initializeProgramList)(),t){let o=document.querySelector(`input[value="${t}"]`);if(o){if(o.checked=!0,o.dispatchEvent(new Event("change")),(0,l.markStepAsCompleted)(1),(0,l.setActiveStep)(2),await (0,i.initializeWorkshopList)(t),r&&"none"===r)(0,s.resetSelectedWorkshop)(),(0,l.markStepAsCompleted)(2),(0,l.setActiveStep)(3),await (0,a.initializeSessionList)(null,t),e.goToIndex(2);else if(r){let o=document.querySelector(`input[value="${r}"]`);o?(o.checked=!0,o.dispatchEvent(new Event("change")),(0,l.markStepAsCompleted)(2),(0,l.setActiveStep)(3),await (0,a.initializeSessionList)(r,t),e.goToIndex(2)):(console.error(`Workshop with ID ${r} not found`),e.goToIndex(1))}else(0,s.resetSelectedWorkshop)(),e.goToIndex(1)}else console.error(`Program with ID ${t} not found`),e.goToIndex(0)}else e.goToIndex(0)}catch(t){console.error("Error initializing state from URL parameters:",t),e.goToIndex(0)}finally{u.addCssClass("hidden"),setTimeout(()=>u.setStyle({display:"none"}),500),(0,p.initializeAlertBoxEarly)()}}}},{"../state/selectedWorkshop":"1ahaO","../../registration/programList":"9PvQg","../../registration/workshopList":"caQhI","../../registration/sessionsList":"8yBQ3","../../registration/components/sidebarIndicators":"9yhwg","@xatom/core":"65YBq","../../../api/apiConfig":"dUmIV","../../registration/components/alertBoxEarly":"8h0nb","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=programRegistration.3cd8a827.js.map
