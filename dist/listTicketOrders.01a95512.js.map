{"mappings":"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","sources":["src/modules/dashboard/listTicketOrders.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js"],"sourcesContent":["// src/modules/dashboard/listTicketOrders.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../api/apiConfig\";\n\n// ——————————————————————————————————————————————————\n// TICKET ORDER & DETAILS INTERFACES\n// ——————————————————————————————————————————————————\ninterface TicketRecord {\n  id: number;\n}\n\ninterface PerformanceDetails {\n  id: number;\n  Displayed_Name: string;\n  Main_Image: string;\n  Short_Description: string;\n  Date_Time: number;\n}\n\ninterface ProductionDetails {\n  id: number;\n  Name: string;\n}\n\ninterface TicketOrder {\n  id: number;\n  order_uuid: string;\n  status: string;\n  performance_id: number;\n  performance_date_time: number;\n  ticket_records: TicketRecord[];\n  performance_details: PerformanceDetails;\n  production_details: ProductionDetails;\n}\n\n// ——————————————————————————————————————————————————\n// FETCH FUNCTION\n// ——————————————————————————————————————————————————\nexport async function fetchTicketOrders(): Promise<TicketOrder[]> {\n  const req = apiClient.get<TicketOrder[]>(\"/dashboard/ticket_orders\");\n  return await req.fetch();\n}\n\n// ——————————————————————————————————————————————————\n// DYNAMIC LIST INITIALIZER\n// ——————————————————————————————————————————————————\nexport async function initializeDynamicTicketOrderList(\n  containerSelector: string\n) {\n  const list = new WFDynamicList<TicketOrder>(containerSelector, {\n    rowSelector: \"#listTicketsCard\",\n    loaderSelector: \"#listTicketsloading\",\n    emptySelector: \"#listTicketsEmpty\",\n  });\n\n  list.loaderRenderer((loaderEl) => {\n    loaderEl.setStyle({ display: \"flex\" });\n    return loaderEl;\n  });\n\n  list.emptyRenderer((emptyEl) => {\n    emptyEl.setStyle({ display: \"flex\" });\n    return emptyEl;\n  });\n\n  // — formatters for New York —\n  const fmtDate = (ts: number) =>\n    new Date(ts).toLocaleDateString(\"en-US\", {\n      timeZone: \"America/New_York\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n      year: \"numeric\",\n    });\n  const fmtTime = (ts: number) =>\n    new Date(ts).toLocaleTimeString(\"en-US\", {\n      timeZone: \"America/New_York\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      hour12: true,\n    });\n\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const card = new WFComponent(rowElement);\n\n    // Performance image\n    const imgComp = card.getChildAsComponent(\"#cardPerformanceImage\");\n    if (imgComp) {\n      const img = new WFImage(imgComp.getElement());\n      img.setImage(rowData.performance_details.Main_Image);\n    }\n\n    // Production Name\n    const prodComp = card.getChildAsComponent(\"#cardProductionName\");\n    prodComp?.setText(rowData.production_details.Name);\n\n    // Performance Name\n    const perfComp = card.getChildAsComponent(\"#cardPerformanceName\");\n    perfComp?.setText(rowData.performance_details.Displayed_Name);\n\n    // Performance Date & Time in NYC\n    const dateComp = card.getChildAsComponent(\"#cardPerformanceDate\");\n    if (dateComp) {\n      const ts = rowData.performance_details.Date_Time;\n      dateComp.setText(`${fmtDate(ts)} at ${fmtTime(ts)}`);\n    }\n\n    // Quantity = number of ticket_records\n    const qtyComp = card.getChildAsComponent(\"#quantity\");\n    qtyComp?.setText(String(rowData.ticket_records.length));\n\n    // Build link with order_uuid param only\n    const anchor = card.getElement() as HTMLAnchorElement;\n    const href = anchor.getAttribute(\"href\") || \"/\";\n    const url = new URL(href, window.location.origin);\n    url.searchParams.set(\"order\", rowData.order_uuid);\n    anchor.setAttribute(\"href\", url.toString());\n\n    rowElement.setStyle({ display: \"block\" });\n    return rowElement;\n  });\n\n  try {\n    list.changeLoadingStatus(true);\n\n    const orders = await fetchTicketOrders();\n    orders.sort(\n      (a, b) =>\n        a.performance_details.Date_Time - b.performance_details.Date_Time\n    );\n    list.setData(orders);\n  } catch (err) {\n    console.error(\"Error loading ticket orders:\", err);\n    list.setData([]);\n  } finally {\n    list.changeLoadingStatus(false);\n  }\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));"],"names":[],"version":3,"file":"listTicketOrders.01a95512.js.map","sourceRoot":"../"}