!function(e,t,r,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[o]&&i[o],a=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function p(t,r){if(!a[t]){if(!e[t]){var n="function"==typeof i[o]&&i[o];if(!r&&n)return n(t,!0);if(s)return s(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}u.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},u.cache={};var c=a[t]=new p.Module(t);e[t][0].call(c.exports,u,c,c.exports,this)}return a[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:p(t)}}p.isParcelRequire=!0,p.Module=function(e){this.id=e,this.bundle=p,this.exports={}},p.modules=e,p.cache=a,p.parent=s,p.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(p,"root",{get:function(){return i[o]}}),i[o]=p;for(var d=0;d<t.length;d++)p(t[d])}({"8ujNa":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"addStudentProfile",()=>v);var n=e("@xatom/core"),i=e("./sidebar"),s=e("./slider"),a=e("./steps/step1"),l=e("./steps/step2"),p=e("./steps/step3"),d=e("./steps/step4"),c=e("./steps/step5"),u=e("./steps/step6"),m=e("./steps/step7"),g=e("./steps/step8"),f=e("./steps/step9"),h=e("./steps/step10");let v=async()=>{console.log("Initialize Add Student Form"),(0,i.initializeSidebarIndicators)();let e=(0,s.initializeSlider)(),t=new n.WFFormComponent("#formStepOne"),r=new n.WFFormComponent("#formStepTwo"),o=new n.WFFormComponent("#formStepThree"),v=new n.WFFormComponent("#formStepFive"),S=new n.WFFormComponent("#formStepSix"),F=new n.WFFormComponent("#formStepSeven");(0,a.initializeStepOne)(e),(0,l.initializeStepTwo)(e),(0,p.initializeStepThree)(e),(0,d.initializeStepFour)(e),(0,c.initializeStepFive)(e),(0,u.initializeStepSix)(e),(0,m.initializeStepSeven)(e),(0,g.initializeStepEight)(e,()=>{let e=t.getFormData(),n=r.getFormData(),i=o.getFormData(),s=v.getFormData(),a=S.getFormData(),l=F.getFormData(),p=localStorage.getItem("current_student"),d=p?JSON.parse(p).id:null,c={...e,...n,...i,...s,...a,...l};return d&&(c.student_id=d),c}),(0,f.initializeStepNine)(e),(0,h.initializeStepTen)(e)}},{"@xatom/core":"65YBq","./sidebar":"fusS1","./slider":"iPmwm","./steps/step1":"3tLjf","./steps/step2":"8CGBG","./steps/step3":"9E92H","./steps/step4":"kZzhc","./steps/step5":"lk6df","./steps/step6":"hSoAl","./steps/step7":"frLQ8","./steps/step8":"4vVew","./steps/step9":"iPCZP","./steps/step10":"gjbWs","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],fusS1:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeSidebarIndicators",()=>s),o.export(r,"setActiveStep",()=>a),o.export(r,"unsetActiveStep",()=>l),o.export(r,"markStepAsCompleted",()=>p),o.export(r,"unmarkStepAsCompleted",()=>d);var n=e("@xatom/core"),i=e("../../../../auth/authConfig");let s=()=>{let e=new n.WFComponent("#firstNameText"),t=(0,i.userAuth).getUser();t&&t.profile&&t.profile.first_name?e.setText(t.profile.first_name):e.setText("Friend"),[{id:"sidebarStepOne",index:1},{id:"sidebarStepTwo",index:2},{id:"sidebarStepThree",index:3},{id:"sidebarStepFour",index:4},{id:"sidebarStepFive",index:5},{id:"sidebarStepSix",index:6},{id:"sidebarStepSeven",index:7},{id:"sidebarStepEight",index:8}].forEach(e=>{let t=new n.WFComponent(`#${e.id}`),r=!1;t.on("click",()=>{r?(r=!1,t.removeCssClass("is-completed")):(r=!0,t.addCssClass("is-completed"))})})},a=e=>{let t=c(e);if(!t){console.warn(`No sidebar step defined for step number ${e}`);return}new n.WFComponent(`#${t}`).addCssClass("is-active")},l=e=>{let t=c(e);if(!t){console.warn(`No sidebar step defined for step number ${e}`);return}new n.WFComponent(`#${t}`).removeCssClass("is-active")},p=e=>{let t=c(e);if(!t){console.warn(`No sidebar step defined for step number ${e}`);return}new n.WFComponent(`#${t}`).getElement().click()},d=e=>{let t=c(e);if(!t){console.warn(`No sidebar step defined for step number ${e}`);return}new n.WFComponent(`#${t}`).getElement().click()},c=e=>({1:"sidebarStepOne",2:"sidebarStepTwo",3:"sidebarStepThree",4:"sidebarStepFour",5:"sidebarStepFive",6:"sidebarStepSix",7:"sidebarStepSeven",8:"sidebarStepEight"})[e]||null},{"@xatom/core":"65YBq","../../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],iPmwm:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeSlider",()=>s);var n=e("@xatom/slider"),i=e("./sidebar");let s=()=>{let e=new n.WFSlider(".multi-step_form_slider");return e.onSlideChange((e,t)=>{console.log(`Slide changed from ${t} to ${e}`),(0,i.setActiveStep)(e+1),-1!==t&&t<e&&(0,i.markStepAsCompleted)(t+1),-1!==t&&t>e&&(0,i.unmarkStepAsCompleted)(t+1)}),(0,i.setActiveStep)(e.getActiveSlideIndex()+1),e}},{"@xatom/slider":"ejxGx","./sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],ejxGx:[function(e,t,r){var o,n=e("1a87f3bc23b90fa3"),i=e("37b5fd8189a9f4c7"),s={};Object.defineProperty(s,"WFSlider",{get:()=>l,set:void 0,enumerable:!0,configurable:!0});let a=window.jQuery;class l extends n.WFComponent{_sliderConfig={};_slides=[];_defaultSwipeDisabled=!1;_index=0;_listeners=new Map;constructor(e){super(e),this.init()}init(){this._defaultSwipeDisabled="true"===this.getAttribute("data-disable-swipe"),this._sliderConfig=a(this.getElement()).data()[".wSlider"],this._slides=Array.from(this._sliderConfig.slides).map(e=>new n.WFComponent(e)),this._mask=new n.WFComponent(this._sliderConfig.mask[0]),this._nav=new n.WFComponent(this._sliderConfig.nav[0]),this._left=new n.WFComponent(this._sliderConfig.left[0]),this._right=new n.WFComponent(this._sliderConfig.right[0]),function(e,t){let r,o;if(document.styleSheets&&0!=document.getElementsByTagName("head").length){if(document.styleSheets.length>0){for(var n=0,i=document.styleSheets.length;n<i;n++)if(!document.styleSheets[n].disabled){var s=document.styleSheets[n].media;if("string"==(o=typeof s)?""!==s&&-1===s.indexOf("screen")||(r=document.styleSheets[n]):"object"==o&&(""!==s.mediaText&&-1===s.mediaText.indexOf("screen")||(r=document.styleSheets[n])),void 0!==r)break}}if(void 0===r){var a=document.createElement("style");for(a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),n=0;n<document.styleSheets.length;n++)document.styleSheets[n].disabled||(r=document.styleSheets[n]);o=typeof r.media}if("string"===o){for(n=0,i=r.rules.length;n<i;n++)if(r.rules[n].selectorText&&r.rules[n].selectorText.toLowerCase()==e.toLowerCase())return void(r.rules[n].style.cssText=t);r.addRule(e,t)}else if("object"===o){var l=r.cssRules?r.cssRules.length:0;for(n=0;n<l;n++)if(r.cssRules[n].selectorText&&r.cssRules[n].selectorText.toLowerCase()==e.toLowerCase())return void(r.cssRules[n].style.cssText=t);r.insertRule(e+"{"+t+"}",l)}}}(".xa-slider-disable","display:none !important;");let e=this;Object.defineProperty(e._sliderConfig,"index",{set:function(t){e._index=t,e._triggerOnChange()},get:function(){return e._index}}),this.refereshSlides()}reloadWFSlider(){window.Webflow.require("slider").destroy(),window.Webflow.require("slider").redraw(),window.Webflow.require("slider").ready()}refereshSlides(){this._mask.getChildAsComponents(".w-slide").forEach(e=>e.remove()),this._slides.reverse().forEach(e=>{this._mask.getElement().prepend(e.getElement())}),this._slides.reverse(),this.reloadWFSlider()}getActiveSlide(){return this._slides[this._index]}getAllSlides(){return[...this._slides]}getSlideByIndex(e){return this._slides[e]}getActiveSlideIndex(){return this._index}getPreviousSlideIndex(){return this._sliderConfig.previous}goNext(){this._sliderConfig.right.click()}goPrevious(){this._sliderConfig.left.click()}goToIndex(e){e>=0&&e<this._slides.length&&(console.log(e),a(this._sliderConfig.nav.children()[e]).click())}addSlide(e,t={}){let r=t.index,o=t.cssClass,i=(0,n.createComponent)("div");i.addCssClass("w-slide"),o&&i.addCssClass(o),i.appendChild(e);let s="number"!=typeof r?-1:r,a=this._slides;s>=0&&s<=a.length?a.splice(r,0,i):a.push(i),this._slides=[...a],this.refereshSlides()}removeSlide(e){let t=[...this._slides];e>=0&&e<t.length&&t.splice(e,1),this._slides=[...t],console.log(this._slides),this.refereshSlides()}getSlideNav(){return this._nav}setSlideNavigationState(e){e?(this._left.removeCssClass("xa-slider-disable"),this._right.removeCssClass("xa-slider-disable"),this._nav.removeCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe",this._defaultSwipeDisabled?"true":"false")):(this._left.addCssClass("xa-slider-disable"),this._right.addCssClass("xa-slider-disable"),this._nav.addCssClass("xa-slider-disable"),this.setAttribute("data-disable-swipe","true")),this.reloadWFSlider()}onSlideChange(e){let t=(0,i.v4)();return this._listeners.set(t,e),()=>{this._listeners.delete(t)}}_triggerOnChange(){Array.from(this._listeners.values()).forEach(e=>{e(this._index,this._sliderConfig.previous)})}getConfig(){return this._sliderConfig}}o=t.exports,Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return s[e]}})})},{"1a87f3bc23b90fa3":"65YBq","37b5fd8189a9f4c7":"faiuA"}],"3tLjf":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepOne",()=>d);var n=e("@xatom/core"),i=e("../../../../../utils/formUtils"),s=e("../../../../../utils/validationUtils"),a=e("../../../../../utils/recaptchaUtils"),l=e("../../../../../api/apiConfig"),p=e("../../../../../auth/authConfig");let d=e=>{console.log("Initialize Add Student Form"),new n.WFComponent("#firstNameText").setText((0,p.userAuth).getUser().profile.first_name),console.log(`First name set to: ${(0,p.userAuth).getUser().profile.first_name}`);let t=new n.WFFormComponent("#formStepOne"),r=localStorage.getItem("current_student");if(console.log(`Existing Student at Initialization: ${r}`),r)try{let e=JSON.parse(r);console.log("Parsed existing student data:",e),t.setFromData({first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,send_texts:e.send_texts})}catch(e){console.error("Error parsing existing_student:",e)}let o=[{input:new n.WFComponent("#firstNameInput"),error:new n.WFComponent("#firstNameInputError"),validationFn:s.validateNotEmpty,message:"First name is required"},{input:new n.WFComponent("#lastNameInput"),error:new n.WFComponent("#lastNameInputError"),validationFn:s.validateNotEmpty,message:"Last name is required"},{input:new n.WFComponent("#emailInput"),error:new n.WFComponent("#emailInputError"),validationFn:s.validateEmailOptional,message:"Please enter a valid email address"},{input:new n.WFComponent("#phoneNumberInput"),error:new n.WFComponent("#phoneNumberInputError"),validationFn:s.validatePhoneNumberOptional,message:"Please enter a valid phone number or leave it empty"}],d=new n.WFComponent("#phoneNumberInput");d.on("input",()=>{let e=d.getElement(),t=e.selectionStart,r=e.value;e.value=function(e){let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}(e.value);let o=e.value.length,n=e.value.replace(/\D/g,"").length;e.setSelectionRange(t+(o-n),t+(o-n)),console.log(`Phone number formatted from "${r}" to "${e.value}"`)}),o.forEach(({input:e,error:t,validationFn:r,message:o})=>{e.on("blur",()=>{let n=(0,i.createValidationFunction)(e,r,o)();n?(0,i.toggleError)(t,n,!0):(0,i.toggleError)(t,"",!1)}),(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitStepOneError"))}),t.onFormSubmit(async(t,r)=>{r.preventDefault(),console.log("Form submission initiated.");let s=new n.WFComponent("#stepOneRequestingAnimation");s.setStyle({display:"block"});let p=!0;if(o.forEach(({input:e,error:t,validationFn:r,message:o})=>{let n=(0,i.createValidationFunction)(e,r,o)();n?((0,i.toggleError)(t,n,!0),p=!1):(0,i.toggleError)(t,"",!1)}),!p){(0,i.toggleError)(new n.WFComponent("#submitStepOneError"),"Please correct all errors above.",!0),s.setStyle({display:"none"});return}let d=localStorage.getItem("current_student");if(d){try{let r=JSON.parse(d);if(t.first_name===r.first_name&&t.last_name===r.last_name&&t.email===r.email&&t.phone===r.phone&&t.send_texts===r.send_texts){e.goNext(),s.setStyle({display:"none"});return}{let o=await c(r.id,t);localStorage.setItem("current_student",JSON.stringify(o)),e.goNext()}}catch(t){let e=t.response?.data?.message||t.message||"Failed to update student profile.";(0,i.toggleError)(new n.WFComponent("#submitStepOneError"),e,!0)}finally{s.setStyle({display:"none"})}return}if(!await (0,a.handleRecaptcha)("create_account")){(0,i.toggleError)(new n.WFComponent("#submitStepOneError"),"reCAPTCHA verification failed. Please try again.",!0),s.setStyle({display:"none"});return}try{let r=await (0,l.apiClient).post("/profiles/students/create-student",{data:t}).fetch();if("success"===r.status&&r.profile)localStorage.setItem("current_student",JSON.stringify(r.profile)),e.goNext();else throw Error(r.message||"Failed to create student profile.")}catch(t){let e=t.response?.data?.message||t.message||"Failed to create student profile.";(0,i.toggleError)(new n.WFComponent("#submitStepOneError"),e,!0)}finally{s.setStyle({display:"none"})}})};async function c(e,t){let r=await (0,l.apiClient).post("/profiles/students/create-student-updated",{data:{...t,id:e}}).fetch();if("success"===r.status&&r.profile)return r.profile;throw Error(r.message||"Failed to update student profile.")}},{"@xatom/core":"65YBq","../../../../../utils/formUtils":"gepHz","../../../../../utils/validationUtils":"gu2z7","../../../../../utils/recaptchaUtils":"Jsdel","../../../../../api/apiConfig":"dUmIV","../../../../../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gepHz:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"toggleError",()=>l),o.export(r,"setupValidation",()=>p),o.export(r,"createValidationFunction",()=>d),o.export(r,"createCheckboxValidationFunction",()=>c),o.export(r,"setupCheckboxValidation",()=>u),o.export(r,"validateSelectedSessions",()=>m),o.export(r,"setProfilePicUrl",()=>g),o.export(r,"setupFileUpload",()=>f),o.export(r,"formatPhoneNumber",()=>h);var n=e("@xatom/core"),i=e("@xatom/image"),s=e("../api/apiConfig"),a=e("../auth/authConfig");function l(e,t,r){e.updateTextViaAttrVar({text:r?t:""}),e.setStyle({display:r?"flex":"none"})}function p(e,t,r,o){let n=()=>{let e=r();l(t,e,!!e),o&&""===e&&l(o,"",!1)};e.on("input",n),e.on("blur",n),e.on("change",n)}function d(e,t,r){return()=>t(e.getElement().value)?"":r}function c(e,t){return()=>e.getElement().checked?"":t}function u(e,t,r){let o=c(e,r);p(e,t,o)}function m(e,t,r){let o=e.length>0&&e.some(e=>e.studentIds.length>0);return o?l(t,"",!1):l(t,r,!0),o}function g(e){let t=(0,a.userAuth).getUser();t&&t.profile&&(t.profile.profile_pic=t.profile.profile_pic||{url:""},t.profile.profile_pic.url=e,(0,a.userAuth).setUser(t),localStorage.setItem("auth_user",JSON.stringify(t)))}function f(e,t,r,o){let a=new i.WFImage("#profilePictureImage"),p=new n.WFComponent("#uploadAnimation"),d=new n.WFComponent(".drop-zone"),c=0;return new Promise(n=>{let i=i=>{if(!["image/jpeg","image/jpg"].includes(i.type)&&!/\.(jpg|jpeg)$/i.test(i.name)){l(t,"Only JPEG images are allowed.",!0),e.getElement().value="";return}if(i.size>2097152){l(t,"File size must be less than 2 MB.",!0),e.getElement().value="";return}p.setStyle({display:"flex"}),t.setStyle({display:"none"}),r.setStyle({display:"none"});let u=new FileReader;u.onload=e=>{let t=e.target?.result;a.setImage(t),d.setStyle({display:"none"})},u.readAsDataURL(i);let m=new FormData;m.append("profile_picture",i);let f=localStorage.getItem("current_student");if(f){let e=JSON.parse(f);m.append("student_profile_id",e.id.toString())}let h=(0,s.apiClient).post(o,{data:m});h.onData(o=>{if("success"===o.status){let e=o.url.profile_pic.url;g(e),a.setImage(e),localStorage.setItem("image_upload",e),r.setStyle({display:"flex"}),p.setStyle({display:"none"}),n(e)}else l(t,"Failed to upload profile picture.",!0),p.setStyle({display:"none"}),d.setStyle({display:"none"}),c=0,e.getElement().value=""}),h.onError(r=>{let o="An error occurred during image upload.";r.response&&r.response.data?o=r.response.data.message||o:r.message&&(o=r.message),l(t,o,!0),p.setStyle({display:"none"}),d.setStyle({display:"none"}),c=0,e.getElement().value=""}),h.fetch()};e.on("change",()=>{let t=e.getElement().files?.[0];t&&i(t)});let u=document.body;u.addEventListener("dragenter",e=>{e.preventDefault(),1==++c&&d.setStyle({display:"flex"})}),u.addEventListener("dragleave",()=>{--c<=0&&(d.setStyle({display:"none"}),c=0)}),u.addEventListener("dragover",e=>{e.preventDefault()}),u.addEventListener("drop",e=>{e.preventDefault();let t=e.dataTransfer?.files;t?.length&&i(t[0]),d.setStyle({display:"none"}),c=0})})}let h=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:t.length<=10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../api/apiConfig":"dUmIV","../auth/authConfig":"dHwPR","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var o,n=e("d023971cccd819e3"),i={};Object.defineProperty(i,"WFImage",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});class s extends n.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}o=t.exports,Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return i[e]}})})},{d023971cccd819e3:"65YBq"}],gu2z7:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function n(e){return void 0!==e&&""!==e.trim()}function i(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}o.defineInteropFlag(r),o.export(r,"validateNotEmpty",()=>n),o.export(r,"validateEmail",()=>i),o.export(r,"validateEmailOptional",()=>s),o.export(r,"validatePasswordRequirements",()=>a),o.export(r,"validateCheckbox",()=>l),o.export(r,"validatePasswordsMatch",()=>p),o.export(r,"validateSelectField",()=>d),o.export(r,"validatePhoneNumber",()=>c),o.export(r,"validatePhoneNumberOptional",()=>u);let s=e=>""===e.trim()||i(e);function a(e){let t=/[a-z]/.test(e),r=/[A-Z]/.test(e),o=/\d/.test(e),n=/[!@#$%^&*(),.?":{}|<>]/.test(e),i=e.length>=8;return t&&r&&o&&n&&i}function l(e){return e}function p(e,t){return e===t}function d(e){return void 0!==e&&"N/A"!==e}function c(e){return/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)}let u=e=>""===e.trim()||c(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],Jsdel:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"getRecaptchaToken",()=>i),o.export(r,"validateRecaptchaToken",()=>s),o.export(r,"handleRecaptcha",()=>a);var n=e("../api/apiConfig");async function i(e){return new Promise((t,r)=>{grecaptcha.ready(()=>{grecaptcha.execute("6Lekaa8pAAAAAN6qiq0LSP5Akckql4Blg6K5ToUq",{action:e}).then(e=>{t(e)},r)})})}async function s(e){try{return await (0,n.apiClient).post("/recaptcha/validate",{data:{"g-recaptcha-response":e}}).fetch()}catch(e){throw Error(`ReCAPTCHA validation failed: ${e}`)}}async function a(e){try{let t=await i(e),r=await s(t);return"success"===r.status}catch(e){return console.error("ReCAPTCHA handling failed:",e),e.response&&console.error("Error response:",e.response),!1}}},{"../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"8CGBG":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepTwo",()=>l);var n=e("@xatom/core"),i=e("../../../../../utils/formUtils"),s=e("../../../../../utils/validationUtils"),a=e("../sidebar");let l=e=>{console.log("Initialize Step Two Form");let t=new n.WFFormComponent("#formStepTwo"),r=new n.WFComponent("#profilePictureInput"),o=new n.WFComponent("#profilePictureInputError"),l=new n.WFComponent("#profilePictureInputSuccess");(0,i.setupFileUpload)(r,o,l,"/profiles/students/image-upload").then(e=>{console.log("Image uploaded successfully: ",e);let t=document.querySelector("#profile_pic");t?(t.value=e,console.log(`'profile_pic' field set to: ${e}`)):console.warn("Profile picture input element ('#profile_pic') not found."),l.setText("Image uploaded successfully!")}).catch(e=>{console.error("Error uploading image: ",e.message),(0,i.toggleError)(o,"Failed to upload image. Please try again.",!0)});let p=[{input:new n.WFComponent("#gradeInput"),error:new n.WFComponent("#gradeInputError"),validationFn:s.validateSelectField,message:"Grade is required"},{input:new n.WFComponent("#schoolInput"),error:new n.WFComponent("#schoolInputError"),validationFn:s.validateNotEmpty,message:"School is required"},{input:new n.WFComponent("#dobInput"),error:new n.WFComponent("#dobInputError"),validationFn:s.validateNotEmpty,message:"Date of birth is required"},{input:new n.WFComponent("#genderInput"),error:new n.WFComponent("#genderInputError"),validationFn:s.validateSelectField,message:"Please select an option"}];p.forEach(({input:e,error:t,validationFn:r,message:o})=>{(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitStepTwoError"))}),t.onFormSubmit(async(t,r)=>{r.preventDefault(),console.log("Step Two Form submission initiated.");let o=!0;if(p.forEach(({input:e,error:t,validationFn:r,message:n})=>{let s=(0,i.createValidationFunction)(e,r,n)();console.log(`Validation result for ${e.getElement().id}: "${s}"`),s?((0,i.toggleError)(t,s,!0),o=!1):(0,i.toggleError)(t,"",!1)}),!o){(0,i.toggleError)(new n.WFComponent("#submitStepTwoError"),"Please correct all errors above.",!0),console.log("Form validation failed. Errors are displayed.");return}t.profile_pic?console.log("'profile_pic' exists. No action taken on 'image_upload'."):(localStorage.removeItem("image_upload"),console.log("No image uploaded. Cleared 'image_upload' from local storage.")),console.log("Form is valid. Navigating to the next step."),e.goNext()}),new n.WFComponent("#backStepTwo").on("click",()=>{console.log("Back button clicked. Navigating to the previous step."),e.goPrevious(),(0,a.unsetActiveStep)(2),(0,a.unmarkStepAsCompleted)(1),(0,a.unmarkStepAsCompleted)(2)})}},{"@xatom/core":"65YBq","../../../../../utils/formUtils":"gepHz","../../../../../utils/validationUtils":"gu2z7","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"9E92H":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepThree",()=>l);var n=e("@xatom/core"),i=e("../../../../../utils/formUtils"),s=e("../../../../../utils/validationUtils"),a=e("../sidebar");let l=e=>{console.log("Initialize Step Three Form");let t=new n.WFFormComponent("#formStepThree"),r=[{input:new n.WFComponent("#healthInput"),error:new n.WFComponent("#healthInputError"),validationFn:s.validateNotEmpty,message:"Health information is required"}];r.forEach(({input:e,error:t,validationFn:r,message:o})=>{(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitStepThreeError"))}),t.onFormSubmit(async(t,o)=>{o.preventDefault();let s=!0;if(r.forEach(({input:e,error:t,validationFn:r,message:o})=>{let n=(0,i.createValidationFunction)(e,r,o)();n?((0,i.toggleError)(t,n,!0),s=!1):(0,i.toggleError)(t,"",!1)}),!s){(0,i.toggleError)(new n.WFComponent("#submitStepThreeError"),"Please correct all errors above.",!0);return}e.goNext()}),new n.WFComponent("#backStepThree").on("click",()=>{e.goPrevious(),(0,a.unsetActiveStep)(3),(0,a.unmarkStepAsCompleted)(2),(0,a.unmarkStepAsCompleted)(3)})}},{"@xatom/core":"65YBq","../../../../../utils/formUtils":"gepHz","../../../../../utils/validationUtils":"gu2z7","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],kZzhc:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepFour",()=>a);var n=e("@xatom/core"),i=e("../caregiverDialog"),s=e("../sidebar");let a=e=>{console.log("Initialize Step Four Form - Invite Caregiver"),(0,i.initializeCaregiverDialog)(),new n.WFComponent("#submitStepFour").on("click",()=>{e.goNext()}),new n.WFComponent("#backStepFour").on("click",()=>{e.goPrevious(),(0,s.unsetActiveStep)(4),(0,s.unmarkStepAsCompleted)(3),(0,s.unmarkStepAsCompleted)(4)})}},{"@xatom/core":"65YBq","../caregiverDialog":"iCqpy","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],iCqpy:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeCaregiverDialog",()=>p);var n=e("@xatom/core"),i=e("../../../../utils/formUtils"),s=e("../../../../utils/validationUtils"),a=e("../../../../utils/recaptchaUtils"),l=e("../../../../api/apiConfig");let p=()=>{console.log("Initialize Invite Caregiver Form");let e=new n.WFFormComponent("#inviteCaregiverDialog"),t=[{input:new n.WFComponent("#caregiverEmailInput"),error:new n.WFComponent("#caregiverEmailInputError"),validationFn:s.validateEmail,message:"Please enter a valid email address"}];t.forEach(({input:e,error:t,validationFn:r,message:o})=>{(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitInviteCaregiverError"))}),e.onFormSubmit(async(r,o)=>{o.preventDefault();let s=new n.WFComponent("#caregiverRequestingAnimation");s.setStyle({display:"block"});let p=!0;if(t.forEach(({input:e,error:t,validationFn:r,message:o})=>{let n=(0,i.createValidationFunction)(e,r,o)();n?((0,i.toggleError)(t,n,!0),p=!1):(0,i.toggleError)(t,"",!1)}),!p){console.log("Validation failed:",r),(0,i.toggleError)(new n.WFComponent("#submitInviteCaregiverError"),"Please correct all errors above.",!0),s.setStyle({display:"none"});return}if(!await (0,a.handleRecaptcha)("complete_caregiver")){(0,i.toggleError)(new n.WFComponent("#submitInviteCaregiverError"),"reCAPTCHA verification failed. Please try again.",!0),s.setStyle({display:"none"});return}try{let t=await (0,l.apiClient).post("/caregivers/invite",{data:r}).fetch();if("success"===t.status){let t=new n.WFComponent("#inviteCaregiverSuccessTrigger");e.showSuccessState(),t.getElement()?.click()}else throw Error(t.message||"Failed to invite caregiver.")}catch(t){console.error("Error inviting caregiver:",t);let e=t.response?.data?.message||t.message||"Failed to invite caregiver.";(0,i.toggleError)(new n.WFComponent("#submitInviteCaregiverError"),e,!0)}finally{s.setStyle({display:"none"})}}),new n.WFComponent("#resetCaregiverForm").on("click",()=>{e.resetForm(),e.showForm();let t=new n.WFComponent("#inviteCaregiverSuccessTrigger");t.getElement()?.click()})}},{"@xatom/core":"65YBq","../../../../utils/formUtils":"gepHz","../../../../utils/validationUtils":"gu2z7","../../../../utils/recaptchaUtils":"Jsdel","../../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],lk6df:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepFive",()=>l);var n=e("@xatom/core"),i=e("../../../../../utils/formUtils"),s=e("../../../../../utils/validationUtils"),a=e("../sidebar");let l=e=>{console.log("Initialize Step Five Form - Emergency Contact");let t=new n.WFFormComponent("#formStepFive"),r=[{input:new n.WFComponent("#emergencyFirstNameInput"),error:new n.WFComponent("#emergencyFirstNameInputError"),validationFn:s.validateNotEmpty,message:"First name is required"},{input:new n.WFComponent("#emergencyLastNameInput"),error:new n.WFComponent("#emergencyLastNameInputError"),validationFn:s.validateNotEmpty,message:"Last name is required"},{input:new n.WFComponent("#emergencyEmailInput"),error:new n.WFComponent("#emergencyEmailInputError"),validationFn:s.validateEmail,message:"Please enter a valid email address"},{input:new n.WFComponent("#emergencyPhoneInput"),error:new n.WFComponent("#emergencyPhoneInputError"),validationFn:s.validatePhoneNumber,message:"Please enter a valid phone number"},{input:new n.WFComponent("#emergencyRelationshipInput"),error:new n.WFComponent("#emergencyRelationshipInputError"),validationFn:s.validateNotEmpty,message:"Relationship is required"}],o=new n.WFComponent("#emergencyPhoneInput");o.on("input",()=>{let e=o.getElement(),t=e.selectionStart;e.value=function(e){let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}(e.value);let r=e.value.length,n=e.value.replace(/\D/g,"").length;e.setSelectionRange(t+(r-n),t+(r-n))}),r.forEach(({input:e,error:t,validationFn:r,message:o})=>{(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitStepFiveError"))}),t.onFormSubmit(async(t,o)=>{o.preventDefault();let s=!0;if(r.forEach(({input:e,error:t,validationFn:r,message:o})=>{let n=(0,i.createValidationFunction)(e,r,o)();n?((0,i.toggleError)(t,n,!0),s=!1):(0,i.toggleError)(t,"",!1)}),!s){console.log("Validation failed:",t),(0,i.toggleError)(new n.WFComponent("#submitStepFiveError"),"Please correct all errors above.",!0);return}e.goNext()}),new n.WFComponent("#backStepFive").on("click",()=>{e.goPrevious(),(0,a.unsetActiveStep)(5),(0,a.unmarkStepAsCompleted)(4),(0,a.unmarkStepAsCompleted)(5)})}},{"@xatom/core":"65YBq","../../../../../utils/formUtils":"gepHz","../../../../../utils/validationUtils":"gu2z7","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],hSoAl:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepSix",()=>l);var n=e("@xatom/core"),i=e("../../../../../utils/formUtils"),s=e("../../../../../utils/validationUtils"),a=e("../sidebar");let l=e=>{console.log("Initialize Step Six Form - Dismissal Permissions");let t=new n.WFFormComponent("#formStepSix"),r=[{input:new n.WFComponent("#dismissalNamesInput"),error:new n.WFComponent("#dismissalNamesInputError"),validationFn:s.validateNotEmpty,message:"Dismissal names are required"}];r.forEach(({input:e,error:t,validationFn:r,message:o})=>{(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitStepSixError"))}),t.onFormSubmit(async(t,o)=>{o.preventDefault();let s=!0;if(r.forEach(({input:e,error:t,validationFn:r,message:o})=>{let n=(0,i.createValidationFunction)(e,r,o)();n?((0,i.toggleError)(t,n,!0),s=!1):(0,i.toggleError)(t,"",!1)}),!s){console.log("Validation failed:",t),(0,i.toggleError)(new n.WFComponent("#submitStepSixError"),"Please correct all errors above.",!0);return}e.goNext()}),new n.WFComponent("#backStepSix").on("click",()=>{e.goPrevious(),(0,a.unsetActiveStep)(6),(0,a.unmarkStepAsCompleted)(5),(0,a.unmarkStepAsCompleted)(6)})}},{"@xatom/core":"65YBq","../../../../../utils/formUtils":"gepHz","../../../../../utils/validationUtils":"gu2z7","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],frLQ8:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepSeven",()=>l);var n=e("@xatom/core"),i=e("../../../../../utils/formUtils"),s=e("../../../../../utils/validationUtils"),a=e("../sidebar");let l=e=>{console.log("Initialize Step Seven Form - Family Involvement & Photo Release");let t=new n.WFFormComponent("#formStepSeven"),r=[{input:new n.WFComponent("#familyInvolvedInput"),error:new n.WFComponent("#familyInvolvedInputError"),validationFn:s.validateNotEmpty,message:"Family involvement is required"}];r.forEach(({input:e,error:t,validationFn:r,message:o})=>{(0,i.setupValidation)(e,t,(0,i.createValidationFunction)(e,r,o),new n.WFComponent("#submitStepSevenError"))}),t.onFormSubmit(async(t,o)=>{o.preventDefault();let s=!0;if(r.forEach(({input:e,error:t,validationFn:r,message:o})=>{let n=(0,i.createValidationFunction)(e,r,o)();n?((0,i.toggleError)(t,n,!0),s=!1):(0,i.toggleError)(t,"",!1)}),!s){console.log("Validation failed:",t),(0,i.toggleError)(new n.WFComponent("#submitStepSevenError"),"Please correct all errors above.",!0);return}e.goNext()}),new n.WFComponent("#backStepSeven").on("click",()=>{e.goPrevious(),(0,a.unsetActiveStep)(7),(0,a.unmarkStepAsCompleted)(6),(0,a.unmarkStepAsCompleted)(7)})}},{"@xatom/core":"65YBq","../../../../../utils/formUtils":"gepHz","../../../../../utils/validationUtils":"gu2z7","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"4vVew":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepEight",()=>d);var n=e("@xatom/core"),i=e("@xatom/image"),s=e("../../../../../utils/recaptchaUtils"),a=e("../../../../../api/apiConfig"),l=e("../../../../../utils/formUtils"),p=e("../sidebar");let d=(e,t)=>{console.log("Initialize Step Eight");let r=new i.WFImage("#studentProfilePic"),o=new n.WFComponent("#studentFullName"),d=new n.WFComponent("#studentEmail"),c=new n.WFComponent("#studentPhone"),u=new n.WFComponent("#studentGrade"),m=new n.WFComponent("#studentSchool"),g=new n.WFComponent("#studentDOB"),f=new n.WFComponent("#studentGender"),h=new n.WFComponent("#studentHealth"),v=new n.WFComponent("#studentEmergencyName"),S=new n.WFComponent("#studentEmergencyEmail"),F=new n.WFComponent("#studentEmergencyPhone"),C=new n.WFComponent("#studentEmergencyRelationship"),w=new n.WFComponent("#studentDismissalNames"),b=new n.WFComponent("#studentTravelTrue"),y=new n.WFComponent("#studentTravelFalse"),x=new n.WFComponent("#studentFamily"),E=new n.WFComponent("#studentPhotoTrue"),W=new n.WFComponent("#studentPhotoFalse"),_=new n.WFComponent("#studentTextTrue"),I=new n.WFComponent("#studentTextFalse");e.onSlideChange(()=>{let e=t();if(localStorage.getItem("image_upload")){let e=localStorage.getItem("image_upload");r.setImage(e)}else console.log("No profile picture available"),r.setImage("https://cdn.prod.website-files.com/667f080f36260b9afbdc46b2/667f080f36260b9afbdc46be_placeholder.svg");o.setText(`${e.first_name} ${e.last_name}`),d.setText(e.email),c.setText(e.phone),u.setText(e.grade),m.setText(e.school),g.setText(e.dob),f.setText(e.gender),h.setText(e.health),v.setText(`${e.emergency_first_name} ${e.emergency_last_name}`),S.setText(e.emergency_email),F.setText(e.emergency_phone),C.setText(e.emergency_relationship),w.setText(e.dismissal_names),x.setText(e.family_involved),e.independent_travel?(b.setStyle({display:"block"}),y.setStyle({display:"none"})):(y.setStyle({display:"block"}),b.setStyle({display:"none"})),e.photo_release?(E.setStyle({display:"block"}),W.setStyle({display:"none"})):(W.setStyle({display:"block"}),E.setStyle({display:"none"})),e.send_texts?(_.setStyle({display:"block"}),I.setStyle({display:"none"})):(I.setStyle({display:"block"}),_.setStyle({display:"none"}))});let j=new n.WFComponent("#submitStepEight"),A=new n.WFComponent("#stepEightRequestingAnimation"),P=new n.WFComponent("#submitStepEightError");j.on("click",async r=>{if(r.preventDefault(),A.setStyle({display:"block"}),!await (0,s.handleRecaptcha)("complete_student")){(0,l.toggleError)(P,"reCAPTCHA verification failed. Please try again.",!0),A.setStyle({display:"none"});return}let o=t();try{let t=await (0,a.apiClient).post("/profiles/students/complete-profile",{data:o}).fetch();if("success"===t.status&&t.profile){let r=t.profile,o=new n.WFComponent("#studentCard");o.updateTextViaAttrVar({name:`${r.first_name} ${r.last_name}`,email:r.email,phone:r.phone});let s=o.getElement(),a=s.getAttribute("href")||"",l=`${a}?id=${r.id}`;s.setAttribute("href",l);let p=new i.WFImage("#profileCardImg");r.profile_pic?.url?p.setImage(r.profile_pic.url):(console.log("No profile picture available"),p.setImage("https://cdn.prod.website-files.com/667f080f36260b9afbdc46b2/667f080f36260b9afbdc46be_placeholder.svg")),localStorage.removeItem("current_student"),localStorage.removeItem("image_upload"),A.setStyle({display:"none"}),e.goNext()}else(0,l.toggleError)(P,t.message||"Failed to complete profile.",!0),A.setStyle({display:"none"})}catch(e){console.error("Error completing profile:",e),(0,l.toggleError)(P,e.response?.data?.message||"Failed to complete profile.",!0),A.setStyle({display:"none"})}}),new n.WFComponent("#backStepEight").on("click",()=>{e.goPrevious(),(0,p.unsetActiveStep)(8),(0,p.unmarkStepAsCompleted)(7),(0,p.unmarkStepAsCompleted)(8)})}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../../../../../utils/recaptchaUtils":"Jsdel","../../../../../api/apiConfig":"dUmIV","../../../../../utils/formUtils":"gepHz","../sidebar":"fusS1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],iPCZP:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepNine",()=>i);var n=e("@xatom/core");let i=e=>{new n.WFComponent("#submitStepNine").on("click",async t=>{t.preventDefault();try{console.log("Step 9: Submit action or add another student"),e.goNext()}catch(e){console.error("Error during Step 9 submission: ",e)}})}},{"@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gjbWs:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"initializeStepTen",()=>i);var n=e("@xatom/core");let i=e=>{new n.WFComponent("#backStepTen").on("click",()=>{e.goPrevious()})}},{"@xatom/core":"65YBq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=addStudentProfile.e754d9f7.js.map
