!function(e,t,r,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[o]&&i[o],a=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,r){if(!a[t]){if(!e[t]){var n="function"==typeof i[o]&&i[o];if(!r&&n)return n(t,!0);if(s)return s(t,!0);if(c&&"string"==typeof t)return c(t);var l=Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}m.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},m.cache={};var d=a[t]=new u.Module(t);e[t][0].call(d.exports,m,d,d.exports,this)}return a[t].exports;function m(e){var t=m.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=a,u.parent=s,u.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return i[o]}}),i[o]=u;for(var l=0;l<t.length;l++)u(t[l])}({dXC3Z:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"populateTicketSuccess",()=>p);var n=e("@xatom/core"),i=e("@xatom/image"),s=e("../../api/apiConfig");let a=new n.WFComponent(document.querySelector(".success_trigger")),c=new n.WFComponent(document.getElementById("ticketOrderCard")),u=new i.WFImage(c.getChildAsComponent("#cardPerformanceImage").getElement()),l=c.getChildAsComponent("#cardProductionName"),d=c.getChildAsComponent("#cardPerformanceName"),m=c.getChildAsComponent("#cardPerformanceDate"),f=c.getChildAsComponent("#quantity"),g=new n.WFComponent(document.getElementById("successMessage"));async function p(){let e=new URLSearchParams(window.location.search).get("order");if(!e){console.error("Missing 'order' parameter in URL."),alert("Missing order identifier in URL.");return}let t=(0,s.apiClient).get(`/success_page/tickets/${e}`);try{let{performance_details:e,production_details:r,quantity:o,order_uuid:n}=await new Promise((e,r)=>{t.onData(t=>e(t.data)),t.onError(e=>r(e)),t.fetch()});a.getElement().click(),u.setImage(e.Main_Image),u.getElement().alt=`${r.Name} \u{2014} ${e.Displayed_Name}`,l.setText(r.Name),d.setText(e.Displayed_Name),m.setText(new Date(e.Date_Time).toLocaleString("en-US",{timeZone:"America/New_York",month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})),f.setText(String(o)),g.setText(e.Success_Page_Message);let i=c.getElement();try{let t=new URL(i.getAttribute("href"),window.location.origin);t.searchParams.set("performance",String(e.id)),t.searchParams.set("order",n),i.setAttribute("href",t.toString())}catch{i.setAttribute("href",`/ticket-order?uuid=${encodeURIComponent(n)}`)}c.getElement().style.display="block"}catch(e){console.error("Ticket success load error:",e),alert("We ran into a problem loading your ticket confirmation. Please reach out to support.")}}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var o,n=e("d023971cccd819e3"),i={};Object.defineProperty(i,"WFImage",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});class s extends n.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}o=t.exports,Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return i[e]}})})},{d023971cccd819e3:"65YBq"}]},[],0,"parcelRequired346");
//# sourceMappingURL=ticket_success.c7cdb17b.js.map
