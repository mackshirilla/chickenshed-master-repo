!function(e,t,r,i,n){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof o[i]&&o[i],a=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,r){if(!a[t]){if(!e[t]){var n="function"==typeof o[i]&&o[i];if(!r&&n)return n(t,!0);if(s)return s(t,!0);if(c&&"string"==typeof t)return c(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}u.resolve=function(r){var i=e[t][1][r];return null!=i?i:r},u.cache={};var m=a[t]=new l.Module(t);e[t][0].call(m.exports,u,m,m.exports,this)}return a[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=a,l.parent=s,l.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(l,"root",{get:function(){return o[i]}}),o[i]=l;for(var d=0;d<t.length;d++)l(t[d])}({flcB3:[function(e,t,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"fetchTickets",()=>a),i.export(r,"initializeTicketOrderPage",()=>c);var n=e("@xatom/core"),o=e("@xatom/image"),s=e("../../../api/apiConfig");async function a(e){try{let t=(0,s.apiClient).get(`/dashboard/get_tickets/${e}`);return await t.fetch()}catch(e){return console.error("Error fetching tickets:",e),null}}async function c(){let e=new URLSearchParams(window.location.search).get("order");if(!e){console.error("Missing order UUID");return}let t=await a(e);if(!t){console.error("Failed to fetch ticket details");return}let{tickets:r,order:i,performance:s}=t;document.querySelector(".success_trigger")?.click();let c=e=>new Date(e).toLocaleDateString([],{timeZone:"America/New_York",month:"2-digit",day:"2-digit",year:"2-digit"}),l=e=>new Date(e).toLocaleTimeString([],{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",hour12:!0});new(0,n.WFComponent)("#productionName").setText(s.production_details.Name),new(0,n.WFComponent)("#performanceName").setText(s.Displayed_Name),new(0,n.WFComponent)("#performanceLocation").setText(s.location_details.Name),new(0,n.WFComponent)("#performanceDate").setText(c(s.Date_Time)),new(0,n.WFComponent)("#performanceTime").setText(l(s.Date_Time)),document.querySelector("#ticketOrderBreadcrumb")&&new(0,n.WFComponent)("#ticketOrderBreadcrumb").setText(`${s.Displayed_Name} - ${c(s.Date_Time)} at ${l(s.Date_Time)}`);let d=new n.WFComponent("#performanceLocationMap");d.getElement().innerHTML=s.location_details.Map_embed;let m=d.getElement();m.style.width="100%",m.style.height="100%";let u=m.querySelector("figure"),p=m.querySelector("figure > div"),f=m.querySelector("iframe");u instanceof HTMLElement&&(u.style.cssText="width:100%;height:100%;max-height:none;padding:0;margin:0;"),p instanceof HTMLElement&&(p.style.cssText="width:100%;height:100%;"),f instanceof HTMLElement&&(f.style.cssText="width:100%;height:100%;border:0;");let h=new n.WFComponent("#assistanceRequestedTrue"),g=new n.WFComponent("#assistanceRequestedFalse");i.assistance_required?(h.setStyle({display:"block"}),g.setStyle({display:"none"})):(h.setStyle({display:"none"}),g.setStyle({display:"block"})),new(0,n.WFComponent)("#assistanceMessage").setText(i.assistance_message||"N/A"),new(0,n.WFComponent)("#performanceShortDescription").setText(s.Short_Description||"");let y=new n.WFDynamicList("#ticketList",{rowSelector:"#ticketItem"});r.sort((e,t)=>e.id-t.id),y.rowRenderer(({rowData:e,rowElement:t})=>{let r=new n.WFComponent(t);new(0,o.WFImage)(r.getChildAsComponent(".ticket_qr").getElement()).setImage(`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${e.id}`),r.getChildAsComponent("#ticketProductionName").setText(s.production_details.Name),r.getChildAsComponent("#ticketPerformanceName").setText(s.Displayed_Name);let i=s.Date_Time;return r.getChildAsComponent("#ticketPerformanceDate").setText(`${c(i)} at ${l(i)}`),r.getChildAsComponent("#ticketTicketTier").setText(e.ticket_tier[0].Displayed_Name),r.getChildAsComponent("#ticketSeatingAssignment").setText(e.seating_assignment),t}),y.setData(r),new(0,n.WFComponent)("#printTickets").on("click",()=>{let e=document.querySelector("#ticketList");if(!e)return;let t=window.open("","_blank","width=800,height=600");if(!t)return;let r=Array.from(document.styleSheets).map(e=>{try{return e.href?`<link rel="stylesheet" href="${e.href}">`:""}catch{return""}}).join("\n"),i=`
      <div class="hero-section">
        <h1>${s.production_details.Name}</h1>
        <p>${c(s.Date_Time)} at ${l(s.Date_Time)}</p>
      </div>
    `,n=`<!DOCTYPE html>
<html>
<head>
  <title>Print Tickets</title>
  ${r}
  <style>
    body { padding: 1rem 3rem; }
    #ticketList { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
    .ticket_wrap { page-break-inside: avoid; }
    h1, p { color: black !important; }
  </style>
</head>
<body>
  ${i}
  ${e.outerHTML}
</body>
</html>`;t.document.write(n),t.document.close(),t.onload=()=>{let e=t.document.images,r=0,i=e.length;if(0===i){t.print();return}Array.from(e).forEach(e=>{e.onload=e.onerror=()=>{++r===i&&t.print()}})}})}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var i,n=e("d023971cccd819e3"),o={};Object.defineProperty(o,"WFImage",{get:()=>s,set:void 0,enumerable:!0,configurable:!0});class s extends n.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}i=t.exports,Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||i.hasOwnProperty(e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return o[e]}})})},{d023971cccd819e3:"65YBq"}]},[],0,"parcelRequired346");
//# sourceMappingURL=ticketOrderDetails.dc787944.js.map
