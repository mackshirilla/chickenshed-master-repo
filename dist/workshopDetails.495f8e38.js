!function(e,t,r,o,n){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof s[o]&&s[o],a=i.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,r){if(!a[t]){if(!e[t]){var n="function"==typeof s[o]&&s[o];if(!r&&n)return n(t,!0);if(i)return i(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}u.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},u.cache={};var m=a[t]=new c.Module(t);e[t][0].call(m.exports,u,m,m.exports,this)}return a[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=a,c.parent=i,c.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return s[o]}}),s[o]=c;for(var d=0;d<t.length;d++)c(t[d])}({cxaZ0:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchWorkshopDetails",()=>l),o.export(r,"initializeWorkshopDetailsPage",()=>c);var n=e("@xatom/core"),s=e("@xatom/image"),i=e("../../../api/apiConfig"),a=e("./components/listWorkshopFiles");async function l(e,t,r){try{let o={program:e};return t&&(o.workshop_id=t),r&&(o.subscription_id=r),await (0,i.apiClient).get(`/dashboard/registration/workshop/${t||"none"}`,{data:o}).fetch()}catch(e){console.error("Fetch Workshop Details Error:",e),alert(e?.response?.data?.message||e.message||"Unexpected error"),window.history.back();return}}async function c(){let e=new URLSearchParams(window.location.search),t=e.get("program"),r=e.get("workshop")||void 0,o=e.get("subscription")||void 0;if(!t){alert("Invalid access. Missing program parameter."),window.history.back();return}(0,a.initializeDynamicWorkshopFileList)("#filesList");let i=await l(t,r,o);if(!i)return;let{workshop:c,subscription:m,program:u,sessions:p,caregiver:g}=i;c?function(e,t){let r=document.getElementById("workshopImage");if(r){let o=new s.WFImage(r);o.setImage(e.Main_Image||t.Main_Image),o.getElement().alt=e.Name}[["workshopName",e.Name],["workshopBreadcrumb",e.Name],["programName",t.name],["workshopShortDescription",e.Short_description]].forEach(([e,t])=>{let r=document.getElementById(e);r&&new(0,n.WFComponent)(r).setText(t)})}(c,u):function(e){let t=document.getElementById("workshopImage");t&&new(0,s.WFImage)(t).setImage(e.Main_Image);let r=document.getElementById("workshopName");r&&new(0,n.WFComponent)(r).setText(e.name);let o=document.getElementById("programName");o&&new(0,n.WFComponent)(o).setText(e.Subheading||e.name);let i=document.getElementById("workshopBreadcrumb");i&&new(0,n.WFComponent)(i).setText(e.name);let a=document.getElementById("workshopShortDescription");a&&new(0,n.WFComponent)(a).setText(e.Short_description)}(u),function(e){let t=document.getElementById("programBreadcrumb");if(!t)return;let r=new n.WFComponent(t);r.setText(e.name);let o=new URL(t.getAttribute("href")||"#",window.location.origin);o.searchParams.set("program",e.id.toString()),r.setAttribute("href",o.toString())}(u),d("#listRegistration",function(e){let t={};return e.forEach(e=>{t[e.session]||(t[e.session]=e)}),Object.values(t)}(p),m),function(e,t){let r=document.getElementById("userBreadcrumbList"),o=document.getElementById("caregiverBreadcrumbList");if(e){r?.setAttribute("style","display:none"),o?.setAttribute("style","display:flex");let e=localStorage.getItem("caregiver_breadcrumbs");if(e)try{let t=JSON.parse(e),r=document.getElementById("studentBreadcrumb");if(r){let e=new n.WFComponent(r);e.setText(t.student_name);let o=new URL(r.getAttribute("href")||"/dashboard/student/profile",window.location.origin);o.searchParams.set("id",t.student_id.toString()),e.setAttribute("href",o.toString())}let o=document.getElementById("workshopBreadcrumbCaregiver");o&&new(0,n.WFComponent)(o).setText(t.workshop_name||t.program_name)}catch{}}else r?.setAttribute("style","display:flex"),o?.setAttribute("style","display:none")}(g,0),function(e){let t=document.querySelector(e);t instanceof HTMLElement&&t.click()}(".success_trigger")}async function d(e,t,r){let o=new n.WFDynamicList(e,{rowSelector:"#listRegistrationCard",loaderSelector:"#listRegistrationloading",emptySelector:"#listRegistrationEmpty"});o.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),o.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),o.rowRenderer(({rowData:e,rowElement:t})=>{let o=new n.WFComponent(t),s=e.session_details;o.getChildAsComponent("#cardSessionDay").setText(s?.Weekday||`Session #${e.session}`),o.getChildAsComponent("#cardSessionTimeBlock").setText(s?.Time_block||"N/A"),o.getChildAsComponent("#cardSessionLocation").setText(s?.location_details?.Name||"N/A");let i=o.getElement(),a=new URL("/dashboard/registration/session",window.location.origin);return a.searchParams.set("program",r.program.toString()),a.searchParams.set("workshop",r.workshop.toString()),a.searchParams.set("subscription",r.id.toString()),a.searchParams.set("session",e.session.toString()),i.setAttribute("href",a.toString()),t.setStyle({display:"block"}),t}),o.changeLoadingStatus(!0),o.setData(t),o.changeLoadingStatus(!1)}},{"@xatom/core":"65YBq","@xatom/image":"bavwf","../../../api/apiConfig":"dUmIV","./components/listWorkshopFiles":"jnww1","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],bavwf:[function(e,t,r){var o,n=e("d023971cccd819e3"),s={};Object.defineProperty(s,"WFImage",{get:()=>i,set:void 0,enumerable:!0,configurable:!0});class i extends n.WFComponent{constructor(e){super(e)}getImageConfig(){return this._config}getSrc(){return this.getAttribute("src")}getSizes(){return this.getAttribute("sizes")}getSrcSet(){return this.getAttribute("srcset")}getLoading(){return this.getAttribute("loading")}onLoad(e){return this.on("load",e),()=>{this.off("load",e)}}onLoadError(e){return this.on("error",e),()=>{this.off("error",e)}}setImage(e){if("string"==typeof e)this.setAttribute("src",e),this.removeAttribute("srcset"),this.removeAttribute("sizes");else{if(this.setAttribute("src",e.src),"object"==typeof e&&e.srcSet&&e.srcSet.length&&e.sizes&&e.sizes.length){let t=e.srcSet.map(e=>`${e.url} ${e.size}`).join(", ");this.setAttribute("srcset",t)}else this.removeAttribute("srcset"),this.removeAttribute("sizes");e.loading&&this.setAttribute("loading",e.loading)}}}o=t.exports,Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||o.hasOwnProperty(e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return s[e]}})})},{d023971cccd819e3:"65YBq"}],jnww1:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchWorkshopFiles",()=>i),o.export(r,"initializeDynamicWorkshopFileList",()=>a);var n=e("@xatom/core"),s=e("../../../../api/apiConfig");async function i(e,t){try{let r=t?`/student_files/workshop/${e}?subscription=${encodeURIComponent(t)}`:`/student_files/workshop/${e}`,o=(0,s.apiClient).get(r);return await o.fetch()}catch(e){throw console.error("Error fetching files for workshop:",e),e}}async function a(e){let t=new URLSearchParams(window.location.search).get("workshop");if(!t){console.error("No workshop ID provided in URL");return}let r=new URLSearchParams(window.location.search).get("subscription"),o=new n.WFDynamicList(e,{rowSelector:"#fileCard",loaderSelector:"#filesloading",emptySelector:"#filesEmpty"});o.loaderRenderer(e=>(e.setStyle({display:"flex"}),e)),o.emptyRenderer(e=>(e.setStyle({display:"flex"}),e)),o.rowRenderer(({rowData:e,rowElement:t})=>{let r=new n.WFComponent(t);return r.setAttribute("href",e.file_url),r.getChildAsComponent("#fileName").setText(e.file_name),t.setStyle({display:"block"}),t});try{o.changeLoadingStatus(!0);let e=await i(t,r);e.sort((e,t)=>e.file_name.localeCompare(t.file_name)),o.setData(e)}catch(e){console.error("Error loading files:",e),o.setData([])}finally{o.changeLoadingStatus(!1)}}},{"@xatom/core":"65YBq","../../../../api/apiConfig":"dUmIV","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequired346");
//# sourceMappingURL=workshopDetails.495f8e38.js.map
