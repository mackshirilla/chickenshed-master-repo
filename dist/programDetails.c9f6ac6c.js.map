{"mappings":"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","sources":["src/modules/dashboard/registration/programDetails.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js","src/modules/dashboard/registration/components/listProgramFiles.ts"],"sourcesContent":["// src/pages/programDetails.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../../api/apiConfig\";\nimport { initializeDynamicProgramFileList } from \"./components/listProgramFiles\";\n\n// Define the Subscription interface based on the API response\ninterface Subscription {\n  id: number;\n  created_at: number; // Unix timestamp in milliseconds\n  status: string; // e.g., 'Active', 'Cancelled', 'Deposit Paid', 'Pending'\n  subscription_type: string; // e.g., 'Annual', 'Monthly'\n  program_name: string;\n  workshop_name: string;\n  coupon?: string | null;\n  deposit_amount: number;\n  start_date: string; // ISO date string\n  next_charge_date?: string | null;\n  stripe_subscription_id?: string | null;\n  user_id: number;\n  program_id: string;\n  workshop_id: string;\n  sale_id: number;\n  image_url: string;\n}\n\n// Define the Program interface based on the API response\ninterface Program {\n  request: {\n    url: string;\n    method: string;\n    headers: string[];\n    params: any[];\n  };\n  response: {\n    headers: string[];\n    result: {\n      id: string;\n      cmsLocaleId: string;\n      lastPublished: string;\n      lastUpdated: string;\n      createdOn: string;\n      isArchived: boolean;\n      isDraft: boolean;\n      fieldData: {\n        subheading: string;\n        \"short-description\": string;\n        \"age-range\": string;\n        name: string;\n        slug: string;\n        \"parent-program\": string;\n        \"main-image\": {\n          fileId: string;\n          url: string;\n          alt: string | null;\n        };\n      };\n    };\n    status: number;\n  };\n}\n\n// Define the structure of the API response\ninterface ProgramApiResponse {\n  subscriptions: Subscription[];\n  program: Program;\n}\n\n// Function to fetch program details and subscriptions from the API\nexport async function fetchProgramDetails(\n  programId: string\n): Promise<ProgramApiResponse> {\n  try {\n    const getProgramDetails = apiClient.get<ProgramApiResponse>(\n      `/dashboard/registration/program/${programId}`\n    );\n    const response = await getProgramDetails.fetch();\n    return response;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// Function to initialize and render the program details and subscriptions\nexport async function initializeProgramDetailsPage() {\n  // Initialize the dynamic program files list\n  await initializeDynamicProgramFileList(\"#filesList\");\n  // Utility function to parse URL parameters\n  const getUrlParams = () => {\n    const params = new URLSearchParams(window.location.search);\n    const programId = params.get(\"program\");\n    return { programId };\n  };\n\n  const { programId } = getUrlParams();\n\n  if (!programId) {\n    displayError(\"Invalid access. Program ID is missing.\");\n    return;\n  }\n\n  try {\n    // Fetch program details and subscriptions\n    const apiResponse = await fetchProgramDetails(programId);\n    const { subscriptions, program } = apiResponse;\n\n    // Update program details on the page\n    updateProgramDetails(program);\n\n    // Initialize and render the subscriptions list using fetched data\n    await initializeDynamicSubscriptionList(\n      \"#listRegistration\",\n      subscriptions,\n      program\n    );\n\n    // Trigger the success_trigger element\n    triggerSuccessEvent(\".success_trigger\");\n  } catch (error) {\n    displayError(\"An error occurred while loading the program details.\");\n  }\n}\n\n// Function to update program details on the page\nfunction updateProgramDetails(program: Program) {\n  // Update Program Image\n  const programImageElement = document.getElementById(\"programImage\");\n  if (programImageElement) {\n    const programImage = new WFImage(programImageElement);\n    if (program.response.result.fieldData[\"main-image\"].url) {\n      programImage.setImage(\n        program.response.result.fieldData[\"main-image\"].url\n      );\n      const imgElement = programImage.getElement() as HTMLImageElement;\n      imgElement.alt =\n        program.response.result.fieldData[\"main-image\"].alt || \"Program Image\";\n    } else {\n      programImage.setImage(\n        \"https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg\"\n      );\n      const imgElement = programImage.getElement() as HTMLImageElement;\n      imgElement.alt = \"Program Image\";\n    }\n  }\n\n  // Update Program Name\n  const programNameElement = document.getElementById(\"programName\");\n  if (programNameElement) {\n    const programName = new WFComponent(programNameElement);\n    programName.setText(program.response.result.fieldData.name);\n  }\n\n  // Update program breadcrumb\n  const programBreadcrumbElement = document.getElementById(\"programBreadcrumb\");\n  if (programBreadcrumbElement) {\n    const programBreadcrumb = new WFComponent(programBreadcrumbElement);\n    programBreadcrumb.setText(program.response.result.fieldData.name);\n  }\n\n  // Update Program Subheading\n  const programSubheadingElement = document.getElementById(\"programSubheading\");\n  if (programSubheadingElement) {\n    const programSubheading = new WFComponent(programSubheadingElement);\n    programSubheading.setText(program.response.result.fieldData.subheading);\n  }\n\n  // Update Program Short Description\n  const programShortDescriptionElement = document.getElementById(\n    \"programShortDescription\"\n  );\n  if (programShortDescriptionElement) {\n    const programShortDescription = new WFComponent(\n      programShortDescriptionElement\n    );\n    programShortDescription.setText(\n      program.response.result.fieldData[\"short-description\"]\n    );\n  }\n}\n\n// Function to display an error message on the page\nfunction displayError(message: string) {\n  const errorElement = document.getElementById(\"listRegistrationEmpty\");\n  if (errorElement) {\n    errorElement.innerHTML = `<div>${message}</div>`;\n    errorElement.style.display = \"flex\";\n  }\n}\n\n// Function to initialize and render the dynamic subscription list\nasync function initializeDynamicSubscriptionList(\n  containerSelector: string,\n  subscriptions: Subscription[],\n  program: Program\n) {\n  const list = new WFDynamicList<Subscription>(containerSelector, {\n    rowSelector: \"#listRegistrationCard\",\n    loaderSelector: \"#listRegistrationloading\",\n    emptySelector: \"#listRegistrationEmpty\",\n  });\n\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({\n      display: \"flex\",\n    });\n    return loaderElement;\n  });\n\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({\n      display: \"flex\",\n    });\n    return emptyElement;\n  });\n\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const registrationCard = new WFComponent(rowElement);\n\n    // Set the program image using image_url or fallback to program image\n    const registrationImageComponent =\n      registrationCard.getChildAsComponent<HTMLImageElement>(\n        \"#cardRegistrationImage\"\n      );\n    if (registrationImageComponent) {\n      const registrationImage = new WFImage(\n        registrationImageComponent.getElement()\n      );\n\n      if (rowData.image_url) {\n        registrationImage.setImage(rowData.image_url);\n      } else if (program.response.result.fieldData[\"main-image\"].url) {\n        registrationImage.setImage(\n          program.response.result.fieldData[\"main-image\"].url\n        );\n      } else {\n        registrationImage.setImage(\n          \"https://cdn.prod.website-files.com/66102236c16b61185de61fe3/66102236c16b61185de6204e_placeholder.svg\"\n        );\n      }\n    }\n\n    // Set the program name\n    const programNameComponent =\n      registrationCard.getChildAsComponent(\"#cardProgramName\");\n    if (programNameComponent) {\n      programNameComponent.setText(rowData.program_name);\n    }\n\n    // Set the workshop name\n    const workshopNameComponent =\n      registrationCard.getChildAsComponent(\"#cardWorkshopName\");\n    if (workshopNameComponent) {\n      workshopNameComponent.setText(rowData.workshop_name);\n    }\n\n    // Set the link with subscription and workshop parameters\n    const subscriptionCardElement =\n      registrationCard.getElement() as HTMLAnchorElement;\n    const currentHref = subscriptionCardElement.getAttribute(\"href\") || \"#\";\n\n    const url = new URL(currentHref, window.location.origin);\n    url.searchParams.set(\"program\", rowData.program_id);\n    url.searchParams.set(\"workshop\", rowData.workshop_id);\n    url.searchParams.set(\"subscription\", rowData.id.toString());\n\n    subscriptionCardElement.setAttribute(\"href\", url.toString());\n\n    // Get the #cardActivePill and #cardDepositPill elements\n    const cardActivePill =\n      registrationCard.getChildAsComponent(\"#cardActivePill\");\n    const cardDepositPill =\n      registrationCard.getChildAsComponent(\"#cardDepositPill\");\n\n    // Hide both pills by default\n    cardActivePill.setStyle({ display: \"none\" });\n    cardDepositPill.setStyle({ display: \"none\" });\n\n    // Set display based on the status\n    if (rowData.status === \"Active\") {\n      cardActivePill.setStyle({ display: \"block\" });\n    } else if (rowData.status === \"Deposit Paid\") {\n      cardDepositPill.setStyle({ display: \"block\" });\n    }\n\n    rowElement.setStyle({\n      display: \"block\",\n    });\n\n    return rowElement;\n  });\n\n  try {\n    list.setData(subscriptions);\n  } catch (error) {\n    list.setData([]);\n  }\n}\n\n// Function to trigger a click on the success_trigger element\nfunction triggerSuccessEvent(selector: string) {\n  const successTrigger = document.querySelector(selector);\n  if (successTrigger instanceof HTMLElement) {\n    successTrigger.click();\n  }\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));","// src/pages/listStudentFiles.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { apiClient } from \"../../../../api/apiConfig\";\n\n// Define the FileItem interface based on the API response\ninterface FileItem {\n  id: number;\n  file_name: string;\n  file_url: string;\n  program_id?: string | null;\n  workshop_id?: string | null;\n  session_id?: string | null;\n  user_id: number;\n  created_at: number;\n}\n\n// Function to get the student_id from URL parameters\nfunction getProgramIdFromUrl(): string | null {\n  const urlParams = new URLSearchParams(window.location.search);\n  return urlParams.get(\"program\");\n}\n\n// Function to fetch files for a specific student\nexport async function fetchProgramFiles(\n  programId: string\n): Promise<FileItem[]> {\n  try {\n    const getFiles = apiClient.get<FileItem[]>(\n      `/student_files/program/${programId}`\n    );\n    const response = await getFiles.fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching files for student:\", error);\n    throw error;\n  }\n}\n\n// Function to initialize and render the dynamic file list for a student\nexport async function initializeDynamicProgramFileList(\n  containerSelector: string\n) {\n  // Get the student ID from the URL\n  const programId = getProgramIdFromUrl();\n  if (!programId) {\n    console.error(\"No student ID provided in URL\");\n    return;\n  }\n\n  // Initialize a new instance of WFDynamicList for Files\n  const list = new WFDynamicList<FileItem>(containerSelector, {\n    rowSelector: \"#fileCard\", // Using ID selector for template\n    loaderSelector: \"#filesloading\", // Selector for the loader\n    emptySelector: \"#filesEmpty\", // Selector for the empty state\n  });\n\n  // Customize the rendering of the loader\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({\n      display: \"flex\",\n    });\n    return loaderElement;\n  });\n\n  // Customize the rendering of the empty state\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({\n      display: \"flex\",\n    });\n    return emptyElement;\n  });\n\n  // Customize the rendering of list items (File Cards)\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const fileCard = new WFComponent(rowElement);\n\n    // Set the fileCard's href to file_url\n    fileCard.setAttribute(\"href\", rowData.file_url);\n\n    // Set the fileName to file_name\n    const fileName = fileCard.getChildAsComponent(\"#fileName\");\n    fileName.setText(rowData.file_name);\n\n    // Show the list item\n    rowElement.setStyle({\n      display: \"block\",\n    });\n\n    return rowElement;\n  });\n\n  // Load and display file data\n  try {\n    // Enable the loading state\n    list.changeLoadingStatus(true);\n\n    const files = await fetchProgramFiles(programId);\n\n    // Sort files alphabetically by file_name\n    files.sort((a, b) => a.file_name.localeCompare(b.file_name));\n\n    // Set the data to be displayed in the dynamic list\n    list.setData(files);\n\n    // Disable the loading state\n    list.changeLoadingStatus(false);\n  } catch (error) {\n    console.error(\"Error loading files:\", error);\n\n    // If there's an error, set an empty array to trigger the empty state\n    list.setData([]);\n\n    // Disable the loading state\n    list.changeLoadingStatus(false);\n  }\n}\n"],"names":[],"version":3,"file":"programDetails.c9f6ac6c.js.map","sourceRoot":"../"}