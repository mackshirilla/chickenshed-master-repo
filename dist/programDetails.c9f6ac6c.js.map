{"mappings":"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","sources":["src/modules/dashboard/registration/programDetails.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js","src/modules/dashboard/registration/components/listProgramFiles.ts"],"sourcesContent":["import { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../../api/apiConfig\";\nimport { initializeDynamicProgramFileList } from \"./components/listProgramFiles\";\n\n// ---- Interfaces ----\n\ninterface Program {\n  id: number;\n  name: string;\n  slug: string;\n  Main_Image: string;\n  Subheading: string;\n  Short_description: string;\n}\n\n// Workshop items may represent either a true workshop or a session fallback\ninterface Workshop {\n  id: number;\n  name: string;\n  Main_Image: string;\n  weekday?: string;\n  time_block?: string;\n  location_name?: string;\n}\n\ninterface ProgramApiResponse {\n  program: Program;\n  workshops: Workshop[];\n}\n\n// ---- API Fetch ----\n\n/**\n * Fetch program details, including subscription context if provided.\n */\nexport async function fetchProgramDetails(\n  programId: string,\n  subscriptionId?: string\n): Promise<ProgramApiResponse> {\n  const params: Record<string, string> = { program: programId };\n  if (subscriptionId) params.subscription = subscriptionId;\n\n  const getProgramDetails = apiClient.get<ProgramApiResponse>(\n    `/dashboard/registration/program/${programId}`,\n    { data: params }\n  );\n  const response = await getProgramDetails.fetch();\n  return response;\n}\n\n// ---- Page Init ----\n\nexport async function initializeProgramDetailsPage() {\n  await initializeDynamicProgramFileList(\"#filesList\");\n\n  const params = new URLSearchParams(window.location.search);\n  const programId = params.get(\"program\");\n  const subscriptionId = params.get(\"subscription\") || undefined;\n\n  if (!programId) {\n    return displayError(\"Invalid access. Program ID is missing.\");\n  }\n\n  try {\n    const { program, workshops } = await fetchProgramDetails(programId, subscriptionId);\n\n    updateProgramDetails(program);\n\n    // Sort items alphabetically by name or by weekday+time\n    const sortedItems = [...workshops].sort((a, b) => {\n      if (a.weekday && b.weekday) {\n        return `${a.weekday} ${a.time_block}`.localeCompare(\n          `${b.weekday} ${b.time_block}`\n        );\n      }\n      return a.name.localeCompare(b.name);\n    });\n\n    // Elements\n    const workshopBox = document.getElementById(\"program-workshops\");\n    const sessionBox = document.getElementById(\"program-sessions\");\n\n    // Hide both by default\n    if (workshopBox) workshopBox.style.display = \"none\";\n    if (sessionBox) sessionBox.style.display = \"none\";\n\n    // Determine which to show\n    const hasWorkshops = sortedItems.length > 0 && sortedItems[0].weekday === undefined;\n\n    if (hasWorkshops) {\n      if (workshopBox) workshopBox.style.display = \"flex\";\n      await initializeDynamicWorkshopList(\n        \"#program-workshops #listRegistration\",\n        sortedItems,\n        program,\n        subscriptionId\n      );\n    } else {\n      if (sessionBox) sessionBox.style.display = \"flex\";\n      await initializeDynamicSessionList(\n        \"#program-sessions #listRegistration\",\n        sortedItems,\n        program.id,\n        subscriptionId\n      );\n    }\n\n    // trigger hidden success element for any downstream listeners\n    const trigger = document.querySelector(\".success_trigger\");\n    if (trigger instanceof HTMLElement) trigger.click();\n  } catch {\n    displayError(\"An error occurred while loading the program details.\");\n  }\n}\n\n// ---- DOM Updaters ----\n\nfunction updateProgramDetails(program: Program) {\n  const imgEl = document.getElementById(\"programImage\");\n  if (imgEl) {\n    const img = new WFImage(imgEl);\n    img.setImage(\n      program.Main_Image ||\n        \"https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg\"\n    );\n    (img.getElement() as HTMLImageElement).alt = program.name;\n  }\n\n  const mappings: [string, string][] = [\n    [\"programName\", program.name],\n    [\"programBreadcrumb\", program.name],\n    [\"programSubheading\", program.Subheading],\n    [\"programShortDescription\", program.Short_description],\n  ];\n  mappings.forEach(([id, text]) => {\n    const el = document.getElementById(id);\n    if (el) new WFComponent(el).setText(text);\n  });\n}\n\nfunction displayError(message: string) {\n  const empty = document.getElementById(\"listRegistrationEmpty\");\n  if (empty) {\n    empty.innerHTML = `<div>${message}</div>`;\n    empty.style.display = \"flex\";\n  }\n}\n\n// ---- Dynamic Workshop List ----\n\nasync function initializeDynamicWorkshopList(\n  containerSelector: string,\n  workshops: Workshop[],\n  program: Program,\n  subscriptionId?: string\n) {\n  const list = new WFDynamicList<Workshop>(containerSelector, {\n    rowSelector: \"#listRegistrationCard\",\n    loaderSelector: \"#listRegistrationloading\",\n    emptySelector: \"#listRegistrationEmpty\",\n  });\n\n  list.loaderRenderer(el => {\n    el.setStyle({ display: \"flex\" });\n    return el;\n  });\n  list.emptyRenderer(el => {\n    el.setStyle({ display: \"flex\" });\n    return el;\n  });\n\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const card = new WFComponent(rowElement);\n\n    // Image\n    const imgComp = card.getChildAsComponent<HTMLImageElement>(\"#cardRegistrationImage\");\n    if (imgComp) {\n      const img = new WFImage(imgComp.getElement());\n      img.setImage(rowData.Main_Image || program.Main_Image);\n    }\n\n    // Title\n    card.getChildAsComponent(\"#cardProgramName\")?.setText(rowData.name);\n    card.getChildAsComponent(\"#cardWorkshopName\")?.setText(program.name);\n\n    // Link: program, workshop, subscription\n    const anchor = card.getElement() as HTMLAnchorElement;\n    const url = new URL(\"/dashboard/registration/workshop\", window.location.origin);\n    url.searchParams.set(\"program\", String(program.id));\n    url.searchParams.set(\"workshop\", String(rowData.id));\n    if (subscriptionId) url.searchParams.set(\"subscription\", subscriptionId);\n    anchor.setAttribute(\"href\", url.toString());\n\n    rowElement.setStyle({ display: \"flex\" });\n    return rowElement;\n  });\n\n  try {\n    list.setData(workshops);\n  } catch {\n    list.setData([]);\n  }\n}\n\n// ---- Dynamic Session List ----\n\nasync function initializeDynamicSessionList(\n  containerSelector: string,\n  sessions: Workshop[],\n  programId: number,\n  subscriptionId?: string\n) {\n  const list = new WFDynamicList<Workshop>(containerSelector, {\n    rowSelector: \"#listRegistrationCard\",\n    loaderSelector: \"#listRegistrationloading\",\n    emptySelector: \"#listRegistrationEmpty\",\n  });\n\n  list.loaderRenderer(el => {\n    el.setStyle({ display: \"flex\" });\n    return el;\n  });\n  list.emptyRenderer(el => {\n    el.setStyle({ display: \"flex\" });\n    return el;\n  });\n\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const card = new WFComponent(rowElement);\n\n    card.getChildAsComponent(\"#cardSessionDay\")?.setText(rowData.weekday || \"\");\n    card.getChildAsComponent(\"#cardSessionTimeBlock\")?.setText(rowData.time_block || \"\");\n    card.getChildAsComponent(\"#cardSessionLocation\")?.setText(rowData.location_name || \"\");\n\n    // Link\n    const anchor = card.getElement() as HTMLAnchorElement;\n    const url = new URL(\"/dashboard/registration/session\", window.location.origin);\n    url.searchParams.set(\"program\", String(programId));\n    if (subscriptionId) url.searchParams.set(\"subscription\", subscriptionId);\n    url.searchParams.set(\"session\", String(rowData.id));\n    anchor.setAttribute(\"href\", url.toString());\n\n    rowElement.setStyle({ display: \"flex\" });\n    return rowElement;\n  });\n\n  try {\n    list.setData(sessions);\n  } catch {\n    list.setData([]);\n  }\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));","// src/pages/listStudentFiles.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { apiClient } from \"../../../../api/apiConfig\";\n\n// Define the FileItem interface based on the API response\ninterface FileItem {\n  id: number;\n  file_name: string;\n  file_url: string;\n  program_id?: string | null;\n  workshop_id?: string | null;\n  session_id?: string | null;\n  user_id: number;\n  created_at: number;\n}\n\n// Function to get the program_id from URL parameters\nfunction getProgramIdFromUrl(): string | null {\n  const urlParams = new URLSearchParams(window.location.search);\n  return urlParams.get(\"program\");\n}\n\n// Function to get the subscription from URL parameters\nfunction getSubscriptionFromUrl(): string | null {\n  const urlParams = new URLSearchParams(window.location.search);\n  return urlParams.get(\"subscription\");\n}\n\n// Function to fetch files for a specific program (+ optional subscription)\nexport async function fetchProgramFiles(\n  programId: string,\n  subscriptionId?: string\n): Promise<FileItem[]> {\n  try {\n    // build path with optional subscription query\n    const path = subscriptionId\n      ? `/student_files/program/${programId}?subscription=${encodeURIComponent(subscriptionId)}`\n      : `/student_files/program/${programId}`;\n\n    const getFiles = apiClient.get<FileItem[]>(path);\n    const response = await getFiles.fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching files for program:\", error);\n    throw error;\n  }\n}\n\n// Function to initialize and render the dynamic file list for a program\nexport async function initializeDynamicProgramFileList(\n  containerSelector: string\n) {\n  // Get the program ID from the URL\n  const programId = getProgramIdFromUrl();\n  if (!programId) {\n    console.error(\"No program ID provided in URL\");\n    return;\n  }\n  // Get optional subscription ID\n  const subscriptionId = getSubscriptionFromUrl();\n\n  // Initialize a new instance of WFDynamicList for Files\n  const list = new WFDynamicList<FileItem>(containerSelector, {\n    rowSelector: \"#fileCard\", // Using ID selector for template\n    loaderSelector: \"#filesloading\", // Selector for the loader\n    emptySelector: \"#filesEmpty\", // Selector for the empty state\n  });\n\n  // Customize the rendering of the loader\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({ display: \"flex\" });\n    return loaderElement;\n  });\n\n  // Customize the rendering of the empty state\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({ display: \"flex\" });\n    return emptyElement;\n  });\n\n  // Customize the rendering of list items (File Cards)\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const fileCard = new WFComponent(rowElement);\n    fileCard.setAttribute(\"href\", rowData.file_url);\n    const fileName = fileCard.getChildAsComponent(\"#fileName\");\n    fileName.setText(rowData.file_name);\n    rowElement.setStyle({ display: \"block\" });\n    return rowElement;\n  });\n\n  // Load and display file data\n  try {\n    list.changeLoadingStatus(true);\n    const files = await fetchProgramFiles(programId, subscriptionId);\n    files.sort((a, b) => a.file_name.localeCompare(b.file_name));\n    list.setData(files);\n  } catch (error) {\n    console.error(\"Error loading files:\", error);\n    list.setData([]);\n  } finally {\n    list.changeLoadingStatus(false);\n  }\n}\n"],"names":[],"version":3,"file":"programDetails.c9f6ac6c.js.map","sourceRoot":"../"}