{"mappings":"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","sources":["src/modules/dashboard/registration/workshopDetails.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js","src/modules/dashboard/registration/components/cancelRegistrationDialog.ts","src/utils/formUtils.ts","src/utils/validationUtils.ts","src/modules/dashboard/registration/components/listWorkshopFiles.ts"],"sourcesContent":["// src/pages/workshopDetails.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../../api/apiConfig\";\nimport { CancelRegistrationDialog } from \"../registration/components/cancelRegistrationDialog\";\nimport { initializeDynamicWorkshopFileList } from \"./components/listWorkshopFiles\";\n\n// Define the Session interface based on the API response\ninterface Session {\n  id: string;\n  created_at: number; // Unix timestamp in milliseconds\n  status: string; // e.g., 'Active'\n  subscription_type: string; // e.g., 'Annual'\n  program_name: string;\n  workshop_name: string;\n  weekday: string;\n  location: string;\n  time_block: string;\n  session_id: string;\n  price_id: string;\n  user_id: number;\n  subscription_id: number;\n  workshop_id: string;\n  student_profile_id: number;\n  cancellation_reason?: string; // Optional, based on API response\n}\n\n// Define the Workshop interface based on the API response\ninterface Workshop {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    \"short-description\": string;\n    \"age-range\": string;\n    name: string;\n    slug: string;\n    \"parent-program\": string;\n    \"main-image\": {\n      fileId: string;\n      url: string;\n      alt: string | null;\n    };\n    \"success-page-message\"?: string; // Optional, based on API response\n  };\n  program_name?: string; // Optional if needed\n}\n\n// Define the Invoice interface based on the API response\ninterface Invoice {\n  id: number;\n  created_at: number;\n  contact_id: number;\n  user_id: number;\n  customer_first_name: string;\n  customer_last_name: string;\n  customer_email: string;\n  customer_stripe_id: string;\n  checkout_session_id: string;\n  subscription_id: number;\n  stripe_invoice_id: string;\n  stripe_subscription_id: string;\n  amount_subtotal: number;\n  amount_total: number;\n  amount_discount: number;\n  category: string;\n  is_subscription: boolean;\n  reciept_url: string;\n}\n\n// Define the Program interface based on the API response\ninterface Program {\n  id: string;\n  cmsLocaleId: string;\n  lastPublished: string;\n  lastUpdated: string;\n  createdOn: string;\n  isArchived: boolean;\n  isDraft: boolean;\n  fieldData: {\n    subheading: string;\n    \"short-description\": string;\n    \"age-range\": string;\n    name: string;\n    slug: string;\n    \"parent-program\": string;\n    \"main-image\": {\n      fileId: string;\n      url: string;\n      alt: string | null;\n    };\n    \"2nd-semester-charge-date\"?: string; // Optional, based on API response\n    \"subscription-pause-date\"?: string; // Optional, based on API response\n  };\n}\n\n// Define the Subscription interface based on the API response\ninterface Subscription {\n  id: number;\n  created_at: number;\n  status: string;\n  subscription_type: string;\n  program_name: string;\n  workshop_name: string;\n  coupon?: string | null;\n  deposit_amount: number;\n  start_date: string;\n  next_charge_date: string;\n  next_charge_amount: number;\n  stripe_subscription_id: string;\n  user_id: number;\n  contact_id: number;\n  program_id: string;\n  workshop_id: string;\n  sale_id: number;\n  cancellation_reason?: string; // Optional, based on API response\n}\n\n// Define the structure of the API response\ninterface WorkshopApiResponse {\n  workshop: Workshop | null; // workshop can be null based on API response\n  subscription: Subscription;\n  sessions: Session[];\n  invoices: Invoice[];\n  program: { items: Program[] };\n  caregiver: boolean; // Changed from Caregiver to boolean\n}\n\n// Define the structure of the error response\ninterface ApiErrorResponse {\n  traceId: string;\n  code: string;\n  message: string;\n  payload: string;\n}\n\n// Define the CaregiverBreadcrumbs interface\ninterface CaregiverBreadcrumbs {\n  student_id: number;\n  student_name: string;\n  workshop_name: string;\n  workshop_id: string;\n  program_name: string;\n  program_id: string;\n  subscription_id: number;\n  session_id?: string; // Optional\n  session_weekday?: string; // Optional\n  session_time_block?: string; // Optional\n}\n\n// Function to fetch workshop details from the API, including program and subscription params\nexport async function fetchWorkshopDetails(\n  programId: string,\n  subscriptionId: string,\n  workshopId?: string // Made optional\n): Promise<WorkshopApiResponse | undefined> {\n  try {\n    // Construct request data conditionally\n    const requestData: Record<string, string> = {\n      program: programId,\n      subscription: subscriptionId,\n    };\n\n    if (workshopId) {\n      requestData.workshop_id = workshopId;\n    }\n\n    // Make the API request\n    const getWorkshopDetails = apiClient.get<WorkshopApiResponse>(\n      `/dashboard/registration/workshop/${workshopId || \"none\"}`, // Use \"none\" if no workshopId\n      { data: requestData }\n    );\n\n    const response = await getWorkshopDetails.fetch();\n    return response;\n  } catch (error: any) {\n    // Log the detailed error object for debugging\n    console.error(\"Detailed Error Object:\", error);\n\n    // Initialize a default error message\n    let errorMessage = \"An unexpected error occurred. Please try again.\";\n\n    // Extract the specific error message from the API response if available\n    if (error?.response?.data?.message) {\n      errorMessage = error.response.data.message;\n    } else if (error.message) {\n      // Fallback to the generic error message\n      errorMessage = error.message;\n    }\n\n    // Display the error message in an alert box\n    alert(`Error: ${errorMessage}`);\n\n    // Navigate back to the previous page with a fallback\n    window.history.length > 1\n      ? window.history.back()\n      : (window.location.href = \"/dashboard/registrations\");\n\n    // Log the error for debugging purposes\n    console.error(\"Fetch Workshop Details Error:\", error);\n\n    // Optionally, return undefined to indicate failure\n    return undefined;\n  }\n}\n\n// Function to initialize and render the workshop details and sessions\nexport async function initializeWorkshopDetailsPage() {\n  //initalize files list\n  initializeDynamicWorkshopFileList(\"#filesList\");\n\n  // Utility function to parse URL parameters\n  const getUrlParams = () => {\n    const params = new URLSearchParams(window.location.search);\n    const workshopId = params.get(\"workshop\");\n    const programId = params.get(\"program\");\n    const subscriptionId = params.get(\"subscription\");\n    return { workshopId, programId, subscriptionId };\n  };\n\n  const { workshopId, programId, subscriptionId } = getUrlParams();\n\n  if (!programId || !subscriptionId) {\n    alert(\"Invalid access. Program ID or Subscription ID is missing.\");\n    window.history.back();\n    return;\n  }\n\n  try {\n    // Fetch workshop details with program and subscription params\n    const apiResponse = await fetchWorkshopDetails(\n      programId,\n      subscriptionId,\n      workshopId // Optional parameter\n    );\n\n    // If fetchWorkshopDetails encounters an error, it handles it and navigates back,\n    // so the following code will not execute in that case.\n    if (!apiResponse) {\n      // In case fetchWorkshopDetails returns undefined due to an error\n      return;\n    }\n\n    const { workshop, subscription, program, sessions, invoices, caregiver } =\n      apiResponse;\n\n    // Use program details if workshop details are not provided\n    const programDetails = program.items.find(\n      (p) => p.id === subscription.program_id\n    );\n\n    // Update workshop and program details on the page\n    if (workshop) {\n      updateWorkshopDetails(workshop, { items: program.items }, subscription);\n    } else if (programDetails) {\n      updateWorkshopDetailsFromProgram(programDetails, subscription);\n    }\n\n    // Always update program breadcrumb regardless of workshop availability\n    if (programDetails) {\n      updateProgramBreadcrumb(programDetails);\n    }\n\n    updateSubscriptionDetails(subscription);\n\n    // Filter sessions to unique based on session_id\n    const uniqueSessions = getUniqueSessions(sessions);\n\n    // Initialize and render the sessions list using fetched data\n    initializeDynamicSessionList(\n      \"#listRegistration\",\n      uniqueSessions,\n      subscription,\n      caregiver // Pass the caregiver flag\n    );\n\n    // Initialize and render the invoices list using fetched data\n    initializePastInvoicesList(\".table_body\", invoices);\n\n    // Handle Breadcrumbs based on caregiver flag\n    handleBreadcrumbs(caregiver, subscription);\n\n    // Handle Caregiver-specific UI adjustments\n    if (caregiver) {\n      // Remove the Cancel Registration button\n      const cancelButton = document.querySelector(\"#openCancelDialog\");\n      if (cancelButton) {\n        cancelButton.remove();\n      }\n\n      // Remove any existing Cancel Registration Dialog if present\n      const cancelDialog = document.getElementById(\"cancelRegistrationDialog\");\n      if (cancelDialog) {\n        cancelDialog.remove();\n      }\n\n      // Remove the Payment Details section\n      const paymentDetails = document.querySelector(\".payment_details_wrap\");\n      if (paymentDetails) {\n        paymentDetails.remove();\n      }\n    } else {\n      // Initialize Cancel Registration Dialog component\n      new CancelRegistrationDialog({\n        containerSelector: \".button_group\",\n        subscriptionId: subscription.id.toString(),\n        onCancelSuccess: () => {\n          // Redirect to registrations dashboard upon successful cancellation\n          window.location.href = \"/dashboard/registrations\";\n        },\n      });\n    }\n\n    // Trigger the success_trigger element\n    triggerSuccessEvent(\".success_trigger\");\n  } catch (error) {\n    // Since fetchWorkshopDetails already handles the error, this block can remain empty or be removed.\n    // If you prefer, you can log the error here.\n    console.error(\"initializeWorkshopDetailsPage Error:\", error);\n  }\n}\n\n// Function to handle Breadcrumbs based on caregiver flag\nfunction handleBreadcrumbs(caregiver: boolean, subscription: Subscription) {\n  const userBreadcrumbList = document.getElementById(\"userBreadcrumbList\");\n  const caregiverBreadcrumbList = document.getElementById(\n    \"caregiverBreadcrumbList\"\n  );\n\n  if (caregiver) {\n    if (userBreadcrumbList) {\n      userBreadcrumbList.style.display = \"none\";\n    }\n    if (caregiverBreadcrumbList) {\n      caregiverBreadcrumbList.style.display = \"flex\";\n    }\n\n    // Fetch caregiver_breadcrumbs from localStorage\n    const caregiverBreadcrumbs = localStorage.getItem(\"caregiver_breadcrumbs\");\n    if (caregiverBreadcrumbs) {\n      try {\n        const breadcrumbs = JSON.parse(\n          caregiverBreadcrumbs\n        ) as CaregiverBreadcrumbs;\n\n        // Update studentBreadcrumb link\n        const studentBreadcrumb = document.getElementById(\"studentBreadcrumb\");\n        if (studentBreadcrumb) {\n          const studentBreadcrumbComponent = new WFComponent(studentBreadcrumb);\n          studentBreadcrumbComponent.setText(breadcrumbs.student_name);\n\n          // Append ?id={student_id} to the href\n          const currentHref =\n            studentBreadcrumb.getAttribute(\"href\") ||\n            \"/dashboard/student/profile\";\n          const url = new URL(currentHref, window.location.origin);\n          url.searchParams.set(\"id\", breadcrumbs.student_id.toString());\n          studentBreadcrumbComponent.setAttribute(\"href\", url.toString());\n        }\n\n        // Update workshopBreadcrumbCaregiver text\n        const workshopBreadcrumbCaregiver = document.getElementById(\n          \"workshopBreadcrumbCaregiver\"\n        );\n        if (workshopBreadcrumbCaregiver) {\n          const workshopBreadcrumbComponent = new WFComponent(\n            workshopBreadcrumbCaregiver\n          );\n          const workshopName =\n            breadcrumbs.workshop_name || breadcrumbs.program_name || \"N/A\";\n          workshopBreadcrumbComponent.setText(workshopName);\n        }\n      } catch (parseError) {\n        console.error(\n          \"Error parsing caregiver_breadcrumbs from localStorage:\",\n          parseError\n        );\n      }\n    } else {\n      console.warn(\"No caregiver_breadcrumbs found in localStorage.\");\n    }\n  } else {\n    if (userBreadcrumbList) {\n      userBreadcrumbList.style.display = \"flex\";\n    }\n    if (caregiverBreadcrumbList) {\n      caregiverBreadcrumbList.style.display = \"none\";\n    }\n  }\n}\n\n// Function to initialize and render the past invoices list using fetched data\nasync function initializePastInvoicesList(\n  containerSelector: string,\n  invoices: Invoice[]\n) {\n  // Initialize a new instance of WFDynamicList for Invoices\n  const list = new WFDynamicList<Invoice>(containerSelector, {\n    rowSelector: \"#invoiceLine\", // Using ID selector for table row template\n  });\n\n  // Customize the rendering of the loader\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({\n      display: \"flex\",\n    });\n    return loaderElement;\n  });\n\n  // Customize the rendering of the empty state\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({\n      display: \"flex\",\n    });\n    return emptyElement;\n  });\n\n  // Customize the rendering of list items (Invoice Rows)\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const invoiceRow = new WFComponent(rowElement);\n\n    // Set the invoice date\n    const invoiceDateComponent = invoiceRow.getChildAsComponent(\"#invoiceDate\");\n    if (invoiceDateComponent) {\n      const invoiceDate = new WFComponent(invoiceDateComponent.getElement());\n      const formattedDate = new Date(rowData.created_at).toLocaleDateString();\n      invoiceDate.setText(formattedDate);\n    }\n\n    // Set the invoice amount\n    const invoiceAmountComponent =\n      invoiceRow.getChildAsComponent(\"#invoiceAmount\");\n    if (invoiceAmountComponent) {\n      const invoiceAmount = new WFComponent(\n        invoiceAmountComponent.getElement()\n      );\n      invoiceAmount.setText(`$${rowData.amount_total}`);\n    }\n\n    // Set the receipt link\n    const receiptButtonComponent =\n      invoiceRow.getChildAsComponent(\"#receiptButton\");\n    if (receiptButtonComponent) {\n      const receiptButton = new WFComponent(\n        receiptButtonComponent.getElement()\n      );\n      receiptButton.setAttribute(\"href\", rowData.reciept_url);\n    }\n\n    // Show the list item\n    rowElement.setStyle({\n      display: \"table-row\",\n    });\n\n    return rowElement;\n  });\n\n  // Load and display invoice data\n  try {\n    // Enable the loading state\n    list.changeLoadingStatus(true);\n\n    // Set the data to be displayed in the dynamic list\n    list.setData(invoices);\n\n    // Disable the loading state\n    list.changeLoadingStatus(false);\n  } catch (error) {\n    console.error(\"Error initializing past invoices list:\", error);\n    list.setData([]);\n    list.changeLoadingStatus(false);\n  }\n}\n\n// Function to update workshop and program details on the page using Workshop details\nfunction updateWorkshopDetails(\n  workshop: Workshop,\n  programData: { items: Program[] },\n  subscription: Subscription\n) {\n  // Update Workshop Image\n  const workshopImageElement = document.getElementById(\"workshopImage\");\n  if (workshopImageElement) {\n    const workshopImage = new WFImage(workshopImageElement);\n    if (workshop.fieldData[\"main-image\"].url) {\n      workshopImage.setImage(workshop.fieldData[\"main-image\"].url);\n      const imgElement = workshopImage.getElement() as HTMLImageElement;\n      imgElement.alt = workshop.fieldData[\"main-image\"].alt || \"Workshop Image\";\n    } else {\n      workshopImage.setImage(\n        \"https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg\"\n      );\n      const imgElement = workshopImage.getElement() as HTMLImageElement;\n      imgElement.alt = \"Workshop Image\";\n    }\n  }\n\n  // Update Workshop Name\n  const workshopNameElement = document.getElementById(\"workshopName\");\n  if (workshopNameElement) {\n    const workshopName = new WFComponent(workshopNameElement);\n    workshopName.setText(workshop.fieldData.name);\n  }\n\n  // Update workshop breadcrumb\n  const workshopBreadcrumbElement =\n    document.getElementById(\"workshopBreadcrumb\");\n  if (workshopBreadcrumbElement) {\n    const workshopBreadcrumb = new WFComponent(workshopBreadcrumbElement);\n    workshopBreadcrumb.setText(workshop.fieldData.name);\n  }\n\n  // Update program breadcrumb\n  updateProgramBreadcrumbFromItems(programData, subscription);\n\n  // Update Program Name with safe access and debug statements\n  const programNameElement = document.getElementById(\"programName\");\n  if (programNameElement) {\n    const programName = new WFComponent(programNameElement);\n    if (workshop.fieldData && workshop.fieldData.name) {\n      programName.setText(workshop.fieldData.name);\n    } else {\n      programName.setText(\"Program Name Not Available\");\n    }\n  }\n\n  // Update Workshop Short Description\n  const workshopShortDescriptionElement = document.getElementById(\n    \"workshopShortDescription\"\n  );\n  if (workshopShortDescriptionElement) {\n    const workshopShortDescription = new WFComponent(\n      workshopShortDescriptionElement\n    );\n    workshopShortDescription.setText(workshop.fieldData[\"short-description\"]);\n  }\n}\n\n// Function to update workshop and program details using Program details\nfunction updateWorkshopDetailsFromProgram(\n  programDetails: Program,\n  subscription: Subscription\n) {\n  // Update Program Image\n  const programImageElement = document.getElementById(\"workshopImage\");\n  if (programImageElement) {\n    const programImage = new WFImage(programImageElement);\n    if (programDetails.fieldData[\"main-image\"].url) {\n      programImage.setImage(programDetails.fieldData[\"main-image\"].url);\n      const imgElement = programImage.getElement() as HTMLImageElement;\n      imgElement.alt =\n        programDetails.fieldData[\"main-image\"].alt || \"Program Image\";\n    } else {\n      programImage.setImage(\n        \"https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg\"\n      );\n      const imgElement = programImage.getElement() as HTMLImageElement;\n      imgElement.alt = \"Program Image\";\n    }\n  }\n\n  // Update Workshop Name with the Program Name\n  const workshopNameElement = document.getElementById(\"workshopName\");\n  if (workshopNameElement) {\n    const workshopName = new WFComponent(workshopNameElement);\n    workshopName.setText(programDetails.fieldData.name);\n  }\n\n  // Update Program Name with Program Subheading\n  const programNameElement = document.getElementById(\"programName\");\n  if (programNameElement) {\n    const programName = new WFComponent(programNameElement);\n    programName.setText(programDetails.fieldData.subheading);\n  }\n\n  // Update workshop breadcrumb with the Program Name\n  const workshopBreadcrumbElement =\n    document.getElementById(\"workshopBreadcrumb\");\n  if (workshopBreadcrumbElement) {\n    const workshopBreadcrumb = new WFComponent(workshopBreadcrumbElement);\n    workshopBreadcrumb.setText(programDetails.fieldData.name);\n  }\n}\n\n// Function to update the program breadcrumb element (ensure it's always set)\nfunction updateProgramBreadcrumb(programDetails: Program) {\n  const programBreadcrumbElement = document.getElementById(\"programBreadcrumb\");\n  if (programBreadcrumbElement) {\n    const programBreadcrumb = new WFComponent(programBreadcrumbElement);\n    programBreadcrumb.setText(programDetails.fieldData.name);\n\n    // Update the href attribute to append the program param to the current link\n    const currentHref = programBreadcrumbElement.getAttribute(\"href\") || \"#\";\n    const url = new URL(currentHref, window.location.origin);\n    url.searchParams.set(\"program\", programDetails.id);\n    programBreadcrumb.setAttribute(\"href\", url.toString());\n  }\n}\n\n// Helper function to update program breadcrumb from program items\nfunction updateProgramBreadcrumbFromItems(\n  programData: { items: Program[] },\n  subscription: Subscription\n) {\n  const programBreadcrumbElement = document.getElementById(\"programBreadcrumb\");\n  if (programBreadcrumbElement) {\n    const programBreadcrumb = new WFComponent(programBreadcrumbElement);\n    const matchedProgram = programData.items.find(\n      (program) => program.id === subscription.program_id\n    );\n    if (matchedProgram) {\n      // Set the breadcrumb text to the program name\n      programBreadcrumb.setText(matchedProgram.fieldData.name);\n\n      // Update the href attribute to append the program param to the current link\n      const currentHref = programBreadcrumbElement.getAttribute(\"href\") || \"#\";\n      const url = new URL(currentHref, window.location.origin);\n      url.searchParams.set(\"program\", matchedProgram.id);\n      programBreadcrumb.setAttribute(\"href\", url.toString());\n    }\n  }\n}\n\n// Function to update subscription details on the page\nfunction updateSubscriptionDetails(subscription: Subscription) {\n  // Update Subscription Type\n  const subscriptionTypeElement = document.getElementById(\"subscription_type\");\n  if (subscriptionTypeElement) {\n    const subscriptionType = new WFComponent(subscriptionTypeElement);\n    subscriptionType.setText(subscription.subscription_type);\n  }\n\n  // Update Next Invoice Date\n  const nextInvoiceDateElement = document.getElementById(\"nextInvoiceDate\");\n  if (nextInvoiceDateElement) {\n    const nextInvoiceDate = new WFComponent(nextInvoiceDateElement);\n\n    const nextChargeDateStr = subscription.next_charge_date;\n\n    if (nextChargeDateStr) {\n      // Create a new Date object\n      const date = new Date(nextChargeDateStr + \"T00:00:00Z\");\n      // Check if the date is valid\n      if (!isNaN(date.getTime())) {\n        const formattedDate = date.toLocaleDateString(\"en-US\", {\n          timeZone: \"UTC\",\n        });\n        nextInvoiceDate.setText(formattedDate);\n      } else {\n        nextInvoiceDate.setText(\"Upon Student Approval\");\n      }\n    } else {\n      nextInvoiceDate.setText(\"Upon Student Approval\");\n    }\n  }\n\n  // Update Next Invoice Amount\n  const nextInvoiceAmountElement = document.getElementById(\"nextInvoiceAmount\");\n  if (nextInvoiceAmountElement) {\n    const nextInvoiceAmount = new WFComponent(nextInvoiceAmountElement);\n    const amount = subscription.next_charge_amount;\n\n    if (amount === 0 || amount === null || amount === undefined) {\n      // Hide the parent .bento_box.is-dashboard.is-payment-detail element\n      const parentElement = nextInvoiceAmountElement.closest(\n        \".bento_box.is-dashboard.is-payment-detail\"\n      );\n      if (parentElement instanceof HTMLElement) {\n        parentElement.style.display = \"none\";\n      }\n    } else {\n      nextInvoiceAmount.setText(`$${amount}`);\n    }\n  }\n\n  // Update FinAid Coupon\n  const couponElement = document.getElementById(\"finAidCoupon\");\n  if (couponElement) {\n    const coupon = new WFComponent(couponElement);\n    if (subscription.coupon && subscription.coupon !== \"None\") {\n      // Remove 'FINAID' from the beginning and add '% discount Applied'\n      const couponText =\n        subscription.coupon.replace(/^FINAID/, \"\").trim() + \"% Discount\";\n      coupon.setText(couponText);\n    } else {\n      coupon.setText(\"None\");\n    }\n  }\n\n  // Display or hide finAidDisclaimer based on coupon\n  const finAidDisclaimer = document.getElementById(\"finAidDisclaimer\");\n  if (finAidDisclaimer) {\n    if (subscription.coupon) {\n      finAidDisclaimer.style.display = \"block\";\n    } else {\n      finAidDisclaimer.style.display = \"none\";\n    }\n  }\n}\n\n// Function to filter unique sessions based on session_id\nfunction getUniqueSessions(sessions: Session[]): Session[] {\n  const uniqueMap: { [key: string]: Session } = {};\n  sessions.forEach((session) => {\n    if (!uniqueMap[session.session_id]) {\n      uniqueMap[session.session_id] = session;\n    }\n  });\n  return Object.values(uniqueMap);\n}\n\n// Function to initialize and render the dynamic sessions list\nasync function initializeDynamicSessionList(\n  containerSelector: string,\n  sessions: Session[],\n  subscription: Subscription, // Add subscription details as parameter\n  caregiver: boolean // Add caregiver flag as parameter\n) {\n  // Initialize a new instance of WFDynamicList for Sessions\n  const list = new WFDynamicList<Session>(containerSelector, {\n    rowSelector: \"#listRegistrationCard\", // Using ID selector for template\n    loaderSelector: \"#listRegistrationloading\", // Selector for the loader\n    emptySelector: \"#listRegistrationEmpty\", // Selector for the empty state\n  });\n\n  // Customize the rendering of the loader\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({\n      display: \"flex\",\n    });\n    return loaderElement;\n  });\n\n  // Customize the rendering of the empty state\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({\n      display: \"flex\",\n    });\n    return emptyElement;\n  });\n\n  // Customize the rendering of list items (Session Cards)\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const sessionCard = new WFComponent(rowElement);\n\n    // Set the session day\n    const sessionDayComponent =\n      sessionCard.getChildAsComponent(\"#cardSessionDay\");\n    if (sessionDayComponent) {\n      const sessionDay = new WFComponent(sessionDayComponent.getElement());\n      sessionDay.setText(rowData.weekday);\n    }\n\n    // Set the session time block\n    const sessionTimeBlockComponent = sessionCard.getChildAsComponent(\n      \"#cardSessionTimeBlock\"\n    );\n    if (sessionTimeBlockComponent) {\n      const sessionTimeBlock = new WFComponent(\n        sessionTimeBlockComponent.getElement()\n      );\n      sessionTimeBlock.setText(rowData.time_block);\n    }\n\n    // Set the session location\n    const sessionLocationComponent = sessionCard.getChildAsComponent(\n      \"#cardSessionLocation\"\n    );\n    if (sessionLocationComponent) {\n      const sessionLocation = new WFComponent(\n        sessionLocationComponent.getElement()\n      );\n      sessionLocation.setText(rowData.location);\n    }\n\n    // Set the link with program, workshop, and subscription parameters\n    const sessionCardElement = sessionCard.getElement() as HTMLAnchorElement;\n    const currentHref = sessionCardElement.getAttribute(\"href\") || \"#\";\n\n    // Parse existing URL to avoid malformed URLs\n    const url = new URL(currentHref, window.location.origin);\n\n    // Append or set query parameters using subscription and session details\n    url.searchParams.set(\"program\", subscription.program_id);\n    url.searchParams.set(\"workshop\", subscription.workshop_id);\n    url.searchParams.set(\"session\", rowData.session_id);\n    url.searchParams.set(\"subscription\", subscription.id.toString());\n\n    // Update the href attribute with the correct parameters\n    sessionCardElement.setAttribute(\"href\", url.toString());\n\n    // If the user is a caregiver, update the caregiver_breadcrumbs on session selection\n    if (caregiver) {\n      sessionCardElement.addEventListener(\"click\", () => {\n        const caregiverBreadcrumbs = localStorage.getItem(\n          \"caregiver_breadcrumbs\"\n        );\n        if (caregiverBreadcrumbs) {\n          try {\n            const breadcrumbs = JSON.parse(\n              caregiverBreadcrumbs\n            ) as CaregiverBreadcrumbs;\n\n            // Update with session details\n            breadcrumbs.session_id = rowData.session_id;\n            breadcrumbs.session_weekday = rowData.weekday;\n            breadcrumbs.session_time_block = rowData.time_block;\n\n            // Save back to localStorage\n            localStorage.setItem(\n              \"caregiver_breadcrumbs\",\n              JSON.stringify(breadcrumbs)\n            );\n          } catch (e) {\n            console.error(\"Error updating caregiver_breadcrumbs:\", e);\n          }\n        } else {\n          console.warn(\"No caregiver_breadcrumbs found in localStorage.\");\n        }\n      });\n    }\n\n    // Show the list item\n    rowElement.setStyle({\n      display: \"block\",\n    });\n\n    return rowElement;\n  });\n\n  // Load and display session data\n  try {\n    // Enable the loading state\n    list.changeLoadingStatus(true);\n\n    // Set the data to be displayed in the dynamic list\n    list.setData(sessions);\n\n    // Disable the loading state\n    list.changeLoadingStatus(false);\n  } catch (error) {\n    console.error(\"Error initializing dynamic session list:\", error);\n    list.setData([]);\n    list.changeLoadingStatus(false);\n  }\n}\n\n// Function to trigger a click on the success_trigger element\nfunction triggerSuccessEvent(selector: string) {\n  const successTrigger = document.querySelector(selector);\n  if (successTrigger instanceof HTMLElement) {\n    successTrigger.click();\n  }\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));","import { WFComponent, WFFormComponent } from \"@xatom/core\";\nimport { apiClient } from \"../../../../api/apiConfig\";\nimport {\n  toggleError,\n  setupValidation,\n  createValidationFunction,\n} from \"../../../../utils/formUtils\";\nimport { validateNotEmpty } from \"../../../../utils/validationUtils\";\n\n// CancelRegistrationDialog Component\ntype CancelRegistrationDialogOptions = {\n  containerSelector: string;\n  subscriptionId: string;\n  onCancelSuccess: () => void;\n};\n\nexport class CancelRegistrationDialog {\n  private container: WFComponent;\n  private subscriptionId: string;\n  private cancelForm: WFFormComponent;\n  private dialog: WFComponent;\n  private pageMain: WFComponent;\n\n  constructor(options: CancelRegistrationDialogOptions) {\n    const { containerSelector, subscriptionId, onCancelSuccess } = options;\n\n    // Initialize WFComponents\n    this.container = new WFComponent(containerSelector);\n    this.subscriptionId = subscriptionId;\n    this.cancelForm = new WFFormComponent(\"#cancelSubscriptionForm\");\n    this.dialog = new WFComponent(\"#inviteCaregiverDialog\");\n    this.pageMain = new WFComponent(\".page_main\"); // Get the main page container\n\n    // Initialize the dialog component\n    this.initialize(onCancelSuccess);\n  }\n\n  private initialize(onCancelSuccess: () => void) {\n    if (!this.container.getElement()) {\n      console.error(\"Container element not found for CancelRegistrationDialog\");\n      return;\n    }\n\n    // Attach click event to the \"Cancel Registration\" button\n    const openCancelDialogBtn = new WFComponent(\"#openCancelDialog\");\n    if (openCancelDialogBtn.getElement()) {\n      openCancelDialogBtn.on(\"click\", () => {\n        console.log(\"Open Cancel Registration button clicked\");\n        this.openDialog();\n      });\n    } else {\n      console.error(\"Open Cancel Registration button not found\");\n    }\n\n    // Attach click event to close button\n    const closeDialogBtn = new WFComponent(\"#close-dialog-btn\");\n    if (closeDialogBtn.getElement()) {\n      closeDialogBtn.on(\"click\", () => {\n        console.log(\"Close dialog button clicked\");\n        this.closeDialog();\n      });\n    } else {\n      console.error(\"Close dialog button not found\");\n    }\n\n    // Setup form submission interception and validation\n    this.setupFormSubmission(onCancelSuccess);\n    this.setupFormValidation();\n  }\n\n  private openDialog() {\n    if (this.dialog.getElement() && this.pageMain.getElement()) {\n      console.log(\"Opening dialog\");\n      const dialogElement = this.dialog.getElement() as HTMLDialogElement;\n      dialogElement.showModal(); // Using `showModal()` to make sure it behaves as a dialog\n\n      // Update page_main data-brand attribute to \"6\" when dialog opens\n      console.log(\"Setting page_main data-brand attribute to 6\");\n      this.pageMain.setAttribute(\"data-brand\", \"6\");\n    } else {\n      console.error(\"Dialog or page_main element not found\");\n    }\n  }\n\n  private closeDialog() {\n    if (this.dialog.getElement() && this.pageMain.getElement()) {\n      console.log(\"Closing dialog\");\n      const dialogElement = this.dialog.getElement() as HTMLDialogElement;\n      dialogElement.close(); // Using `close()` to properly close the dialog\n\n      // Reset page_main data-brand attribute to \"2\" when dialog closes\n      console.log(\"Resetting page_main data-brand attribute to 2\");\n      this.pageMain.setAttribute(\"data-brand\", \"2\");\n    } else {\n      console.error(\"Dialog or page_main element not found\");\n    }\n  }\n\n  private setupFormSubmission(onCancelSuccess: () => void) {\n    this.cancelForm.onFormSubmit(async (formData, event) => {\n      event.preventDefault(); // Prevent form default submission\n      event.stopPropagation(); // Stop any other event listeners on the form\n\n      console.log(\"Form submission intercepted\");\n\n      const reason = formData.cancelled_because as string;\n\n      if (!validateNotEmpty(reason)) {\n        const errorComponent = new WFComponent(\"#cancelledReasonError\");\n        toggleError(errorComponent, \"Reason for cancelling is required.\", true);\n        return;\n      }\n\n      try {\n        // Show loading animation\n        this.setLoadingState(true);\n\n        // Make DELETE request to API to cancel subscription\n        console.log(\n          \"Submitting cancellation to API for subscription ID:\",\n          this.subscriptionId\n        );\n\n        interface CancelResponse {\n          status: string;\n        }\n\n        const response = (await apiClient\n          .delete(`/subscriptions/${this.subscriptionId}/cancel`, {\n            data: {\n              reason: reason,\n            },\n          })\n          .fetch()) as CancelResponse;\n\n        // Extract relevant status from the response data\n        if (response && response.status === \"Cancelled\") {\n          console.log(\"Cancellation successful\");\n\n          // Clear any previous error messages\n          const errorComponent = new WFComponent(\"#cancelledReasonError\");\n          toggleError(errorComponent, \"\", false); // Explicitly hide error on success\n\n          // Close dialog and call the success callback\n          this.closeDialog();\n          onCancelSuccess();\n        } else {\n          // Handle unexpected success response format\n          throw new Error(\n            `Unexpected response format or status: ${response.status}`\n          );\n        }\n      } catch (error) {\n        console.error(\"Error cancelling registration: \", error);\n        this.showErrorMessage(\n          \"Oops! Something went wrong while submitting the form.\"\n        );\n      } finally {\n        // Hide loading animation\n        this.setLoadingState(false);\n      }\n    });\n  }\n\n  private setupFormValidation() {\n    const reasonInput = new WFComponent(\"#cancelledReason\");\n    const reasonErrorComponent = new WFComponent(\"#cancelledReasonError\");\n\n    if (!reasonInput.getElement() || !reasonErrorComponent.getElement()) {\n      console.error(\"Reason input or error component not found for validation\");\n      return;\n    }\n\n    const validateReason = createValidationFunction(\n      reasonInput,\n      (input) => validateNotEmpty(input),\n      \"Reason for cancelling is required.\"\n    );\n\n    setupValidation(reasonInput, reasonErrorComponent, validateReason);\n  }\n\n  private setLoadingState(isLoading: boolean) {\n    const loadingAnimation = new WFComponent(\"#cancelRegistrationRequesting\");\n    const submitButton = new WFComponent(\"#cancelRegistration\");\n\n    if (loadingAnimation.getElement() && submitButton.getElement()) {\n      if (isLoading) {\n        loadingAnimation.setStyle({ display: \"block\" });\n        submitButton.setAttribute(\"disabled\", \"true\");\n      } else {\n        loadingAnimation.setStyle({ display: \"none\" });\n        submitButton.removeAttribute(\"disabled\");\n      }\n    } else {\n      console.error(\n        \"Loading animation or submit button not found for setting loading state\"\n      );\n    }\n  }\n\n  private showErrorMessage(message: string) {\n    const errorElement = new WFComponent(\"#submitInviteCaregiverError\");\n    if (errorElement.getElement()) {\n      errorElement.setText(message);\n      errorElement.setStyle({ display: \"flex\" });\n    } else {\n      console.error(\"Error element not found for showing error message\");\n    }\n  }\n}\n","import { WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../api/apiConfig\";\nimport { userAuth } from \"../auth/authConfig\";\n\nexport function toggleError(\n  errorMessageComponent: WFComponent<any>,\n  message: string,\n  show: boolean\n): void {\n  errorMessageComponent.updateTextViaAttrVar({ text: show ? message : \"\" });\n  errorMessageComponent.setStyle({ display: show ? \"flex\" : \"none\" });\n}\n\nexport function setupValidation(\n  inputComponent: WFComponent,\n  errorComponent: WFComponent,\n  validate: () => string,\n  requestErrorComponent?: WFComponent // Optional component to clear on input change\n) {\n  const validateAndUpdate = () => {\n    const errorMessage = validate();\n    toggleError(errorComponent, errorMessage, !!errorMessage);\n    if (requestErrorComponent && errorMessage === \"\") {\n      // Clear request error message when the user is correcting the input\n      toggleError(requestErrorComponent, \"\", false);\n    }\n  };\n\n  // Attach event listeners for real-time validation\n  inputComponent.on(\"input\", validateAndUpdate);\n  inputComponent.on(\"blur\", validateAndUpdate);\n  inputComponent.on(\"change\", validateAndUpdate);\n}\n\nexport function createValidationFunction(\n  inputComponent: WFComponent,\n  validationFn: (input: string) => boolean,\n  errorMessage: string\n): () => string {\n  return () => {\n    const inputElement = inputComponent.getElement() as HTMLInputElement;\n    const isValid = validationFn(inputElement.value);\n    return isValid ? \"\" : errorMessage;\n  };\n}\n\nexport function createCheckboxValidationFunction(\n  checkboxComponent: WFComponent,\n  errorMessage: string\n): () => string {\n  return () => {\n    const checkbox = checkboxComponent.getElement() as HTMLInputElement;\n    return checkbox.checked ? \"\" : errorMessage;\n  };\n}\n\nexport function setupCheckboxValidation(\n  checkboxComponent: WFComponent,\n  checkboxErrorComponent: WFComponent,\n  errorMessage: string\n) {\n  const validate = createCheckboxValidationFunction(\n    checkboxComponent,\n    errorMessage\n  );\n  setupValidation(checkboxComponent, checkboxErrorComponent, validate);\n}\n\nexport function validateSelectedSessions(\n  selectedSessions: { sessionId: string; studentIds: string[] }[],\n  errorMessageComponent: WFComponent<any>,\n  errorMessage: string\n): boolean {\n  const isValid =\n    selectedSessions.length > 0 &&\n    selectedSessions.some((session) => session.studentIds.length > 0);\n\n  if (!isValid) {\n    toggleError(errorMessageComponent, errorMessage, true);\n  } else {\n    toggleError(errorMessageComponent, \"\", false);\n  }\n\n  return isValid;\n}\n\ntype fileUploadResponse = {\n  status: string;\n  url: {\n    profile_pic: {\n      url: string;\n    };\n  };\n};\n\n/**\n * Updates the user's profile picture URL in the authentication system.\n * @param {string} imageUrl - The URL of the uploaded image.\n */\nexport function setProfilePicUrl(imageUrl: string): void {\n  const user = userAuth.getUser();\n  if (user && user.profile) {\n    // Ensure the profile_picture object exists\n    user.profile.profile_pic = user.profile.profile_pic || { url: \"\" };\n\n    // Set the profile picture URL\n    user.profile.profile_pic.url = imageUrl;\n    userAuth.setUser(user);\n    localStorage.setItem(\"auth_user\", JSON.stringify(user));\n  }\n}\n\n/**\n * Handles file upload and displays the uploaded image.\n * @param {WFComponent} fileInput - The WFComponent instance for the file input field.\n * @param {WFComponent} fileInputError - The WFComponent instance for displaying error messages.\n * @param {WFComponent} fileInputSuccess - The WFComponent instance for displaying success messages.\n * @param {string} uploadEndpoint - The endpoint to which the file is sent.\n * @returns {Promise<string>} A promise that resolves with the URL of the uploaded image.\n */\n/**\n * Handles file upload and displays the uploaded image.\n * Only JPEG files less than 2 MB can be uploaded.\n * @param {WFComponent} fileInput - The WFComponent instance for the file input field.\n * @param {WFComponent} fileInputError - The WFComponent instance for displaying error messages.\n * @param {WFComponent} fileInputSuccess - The WFComponent instance for displaying success messages.\n * @param {string} uploadEndpoint - The endpoint to which the file is sent.\n * @returns {Promise<string>} A promise that resolves with the URL of the uploaded image.\n */\nexport function setupFileUpload(\n  fileInput: WFComponent,\n  fileInputError: WFComponent,\n  fileInputSuccess: WFComponent,\n  uploadEndpoint: string\n): Promise<string> {\n  const profilePictureImage = new WFImage(\"#profilePictureImage\");\n  const uploadAnimation = new WFComponent(\"#uploadAnimation\");\n\n  const overlay = new WFComponent(\".drop-zone\");\n  let dragCounter = 0;\n\n  return new Promise<string>((resolve) => {\n    const handleFile = (file: File) => {\n      // Validate file type and size\n      const validTypes = [\"image/jpeg\", \"image/jpg\"];\n      const maxSizeInBytes = 2 * 1024 * 1024; // 2 MB\n\n      if (\n        !validTypes.includes(file.type) &&\n        !/\\.(jpg|jpeg)$/i.test(file.name)\n      ) {\n        const errorMessage = \"Only JPEG images are allowed.\";\n        toggleError(fileInputError, errorMessage, true);\n        // Reset file input value\n        (fileInput.getElement() as HTMLInputElement).value = \"\";\n        return;\n      }\n\n      if (file.size > maxSizeInBytes) {\n        const errorMessage = \"File size must be less than 2 MB.\";\n        toggleError(fileInputError, errorMessage, true);\n        // Reset file input value\n        (fileInput.getElement() as HTMLInputElement).value = \"\";\n        return;\n      }\n\n      // Show upload animation immediately\n      uploadAnimation.setStyle({ display: \"flex\" });\n\n      // Hide error and success messages\n      fileInputError.setStyle({ display: \"none\" });\n      fileInputSuccess.setStyle({ display: \"none\" });\n\n      const reader = new FileReader();\n\n      // Display preview image as soon as the file is loaded into memory\n      reader.onload = (event) => {\n        // Set the preview image for the profile picture\n        const result = event.target?.result as string;\n        profilePictureImage.setImage(result);\n\n        // Hide overlay once the image is set\n        overlay.setStyle({ display: \"none\" });\n      };\n\n      reader.readAsDataURL(file);\n\n      const formData = new FormData();\n      formData.append(\"profile_picture\", file);\n\n      const existingStudent = localStorage.getItem(\"current_student\");\n      if (existingStudent) {\n        const student = JSON.parse(existingStudent);\n        formData.append(\"student_profile_id\", student.id.toString());\n      }\n\n      // Send the file to the server\n      const postRequest = apiClient.post<fileUploadResponse>(uploadEndpoint, {\n        data: formData,\n      });\n\n      postRequest.onData((response) => {\n        if (response.status === \"success\") {\n          const imageUrl = response.url.profile_pic.url;\n\n          // Update the profile picture URL in the user session and local storage\n          setProfilePicUrl(imageUrl);\n\n          // Update the image for other parts of the UI as well\n          profilePictureImage.setImage(imageUrl);\n\n          // Store the URL in local storage\n          localStorage.setItem(\"image_upload\", imageUrl);\n\n          // Show success message and hide upload animation\n          fileInputSuccess.setStyle({ display: \"flex\" });\n          uploadAnimation.setStyle({ display: \"none\" });\n\n          // Resolve with the uploaded image URL\n          resolve(imageUrl);\n        } else {\n          const errorMessage = \"Failed to upload profile picture.\";\n          toggleError(fileInputError, errorMessage, true);\n          uploadAnimation.setStyle({ display: \"none\" });\n          overlay.setStyle({ display: \"none\" });\n          dragCounter = 0;\n          // Reset file input value\n          (fileInput.getElement() as HTMLInputElement).value = \"\";\n        }\n      });\n\n      postRequest.onError((error) => {\n        let errorMessage = \"An error occurred during image upload.\";\n        if (error.response && error.response.data) {\n          errorMessage = error.response.data.message || errorMessage;\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n\n        // Show error message and hide upload animation\n        toggleError(fileInputError, errorMessage, true);\n        uploadAnimation.setStyle({ display: \"none\" });\n        overlay.setStyle({ display: \"none\" });\n        dragCounter = 0;\n        // Reset file input value\n        (fileInput.getElement() as HTMLInputElement).value = \"\";\n      });\n\n      // Make the API call\n      postRequest.fetch();\n    };\n\n    // Event listener for file input changes\n    fileInput.on(\"change\", () => {\n      const file = (fileInput.getElement() as HTMLInputElement).files?.[0];\n      if (file) {\n        handleFile(file);\n      }\n    });\n\n    // Event listeners for drag-and-drop\n    const dragZoneElement = document.body;\n    dragZoneElement.addEventListener(\"dragenter\", (event) => {\n      event.preventDefault();\n      dragCounter++;\n      if (dragCounter === 1) {\n        overlay.setStyle({ display: \"flex\" });\n      }\n    });\n\n    dragZoneElement.addEventListener(\"dragleave\", () => {\n      dragCounter--;\n      if (dragCounter <= 0) {\n        overlay.setStyle({ display: \"none\" });\n        dragCounter = 0;\n      }\n    });\n\n    dragZoneElement.addEventListener(\"dragover\", (event) => {\n      event.preventDefault();\n    });\n\n    dragZoneElement.addEventListener(\"drop\", (event) => {\n      event.preventDefault();\n\n      const files = event.dataTransfer?.files;\n      if (files?.length) {\n        handleFile(files[0]);\n      }\n\n      overlay.setStyle({ display: \"none\" });\n      dragCounter = 0;\n    });\n  });\n}\n\n// src/utils/formUtils.ts\n\n/**\n * Formats a phone number string to the format (xxx) xxx-xxxx.\n * If the input contains more than 10 digits, it truncates the extra digits.\n * If it contains fewer, it formats as much as possible.\n *\n * @param value - The raw phone number string.\n * @returns The formatted phone number string.\n */\nexport const formatPhoneNumber = (value: string): string => {\n  const cleaned = value.replace(/\\D/g, \"\"); // Remove all non-digit characters\n\n  if (cleaned.length <= 3) {\n    return cleaned;\n  } else if (cleaned.length <= 6) {\n    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3)}`;\n  } else if (cleaned.length <= 10) {\n    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(\n      6\n    )}`;\n  } else {\n    // If more than 10 digits, truncate the extra digits\n    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(\n      6,\n      10\n    )}`;\n  }\n};\n","import { WFComponent } from \"@xatom/core\";\nimport { toggleError } from \"./formUtils\";\n\nexport function validateNotEmpty(input: string | undefined): boolean {\n  return input !== undefined && input.trim() !== \"\";\n}\n\nexport function validateEmail(input: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(input);\n}\n\n/**\n * Validates that the email is either empty or correctly formatted.\n * @param value The email input value.\n * @returns True if valid, false otherwise.\n */\nexport const validateEmailOptional = (value: string): boolean => {\n  if (value.trim() === \"\") {\n    // Email is optional, so empty string is valid\n    return true;\n  }\n  // Validate the email format if not empty\n  return validateEmail(value);\n};\n\nexport function validatePasswordRequirements(password: string): boolean {\n  const hasLowercase = /[a-z]/.test(password);\n  const hasUppercase = /[A-Z]/.test(password);\n  const hasDigit = /\\d/.test(password);\n  const hasSpecialChar = /[!@#$%^&*(),.?\":{}|<>]/.test(password);\n  const hasValidLength = password.length >= 8;\n  return (\n    hasLowercase && hasUppercase && hasDigit && hasSpecialChar && hasValidLength\n  );\n}\n\nexport function validateCheckbox(checked: boolean): boolean {\n  return checked;\n}\n\nexport function validatePasswordsMatch(\n  originalPassword: string,\n  confirmPassword: string\n): boolean {\n  return originalPassword === confirmPassword;\n}\n\nexport function validateSelectField(input: string | undefined): boolean {\n  return input !== undefined && input !== \"N/A\";\n}\n\nexport function validatePhoneNumber(input: string): boolean {\n  const phoneRegex = /^\\(\\d{3}\\)\\s\\d{3}-\\d{4}$/;\n  return phoneRegex.test(input);\n}\n","// src/pages/listStudentFiles.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { apiClient } from \"../../../../api/apiConfig\";\n\n// Define the FileItem interface based on the API response\ninterface FileItem {\n  id: number;\n  file_name: string;\n  file_url: string;\n  program_id?: string | null;\n  workshop_id?: string | null;\n  session_id?: string | null;\n  user_id: number;\n  created_at: number;\n}\n\n// Function to get the student_id from URL parameters\nfunction getSubscriptionIdFromUrl(): string | null {\n  const urlParams = new URLSearchParams(window.location.search);\n  return urlParams.get(\"subscription\");\n}\n\n// Function to fetch files for a specific student\nexport async function fetchWorkshopFiles(\n  subscriptionId: string\n): Promise<FileItem[]> {\n  try {\n    const getFiles = apiClient.get<FileItem[]>(\n      `/student_files/workshop/${subscriptionId}`\n    );\n    const response = await getFiles.fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching files for student:\", error);\n    throw error;\n  }\n}\n\n// Function to initialize and render the dynamic file list for a student\nexport async function initializeDynamicWorkshopFileList(\n  containerSelector: string\n) {\n  // Get the student ID from the URL\n  const subscriptionId = getSubscriptionIdFromUrl();\n  if (!subscriptionId) {\n    console.error(\"No student ID provided in URL\");\n    return;\n  }\n\n  // Initialize a new instance of WFDynamicList for Files\n  const list = new WFDynamicList<FileItem>(containerSelector, {\n    rowSelector: \"#fileCard\", // Using ID selector for template\n    loaderSelector: \"#filesloading\", // Selector for the loader\n    emptySelector: \"#filesEmpty\", // Selector for the empty state\n  });\n\n  // Customize the rendering of the loader\n  list.loaderRenderer((loaderElement) => {\n    loaderElement.setStyle({\n      display: \"flex\",\n    });\n    return loaderElement;\n  });\n\n  // Customize the rendering of the empty state\n  list.emptyRenderer((emptyElement) => {\n    emptyElement.setStyle({\n      display: \"flex\",\n    });\n    return emptyElement;\n  });\n\n  // Customize the rendering of list items (File Cards)\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const fileCard = new WFComponent(rowElement);\n\n    // Set the fileCard's href to file_url\n    fileCard.setAttribute(\"href\", rowData.file_url);\n\n    // Set the fileName to file_name\n    const fileName = fileCard.getChildAsComponent(\"#fileName\");\n    fileName.setText(rowData.file_name);\n\n    // Show the list item\n    rowElement.setStyle({\n      display: \"block\",\n    });\n\n    return rowElement;\n  });\n\n  // Load and display file data\n  try {\n    // Enable the loading state\n    list.changeLoadingStatus(true);\n\n    const files = await fetchWorkshopFiles(subscriptionId);\n\n    // Sort files alphabetically by file_name\n    files.sort((a, b) => a.file_name.localeCompare(b.file_name));\n\n    // Set the data to be displayed in the dynamic list\n    list.setData(files);\n\n    // Disable the loading state\n    list.changeLoadingStatus(false);\n  } catch (error) {\n    console.error(\"Error loading files:\", error);\n\n    // If there's an error, set an empty array to trigger the empty state\n    list.setData([]);\n\n    // Disable the loading state\n    list.changeLoadingStatus(false);\n  }\n}\n"],"names":[],"version":3,"file":"workshopDetails.dcf5c3cd.js.map","sourceRoot":"../"}