{"mappings":"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","sources":["src/modules/dashboard/registration/workshopDetails.ts","node_modules/.pnpm/@xatom+image@1.0.0_@xatom+core@1.0.12/node_modules/@xatom/image/dist/index.js","src/modules/dashboard/registration/components/listWorkshopFiles.ts"],"sourcesContent":["// src/pages/workshopDetails.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { WFImage } from \"@xatom/image\";\nimport { apiClient } from \"../../../api/apiConfig\";\nimport { initializeDynamicWorkshopFileList } from \"./components/listWorkshopFiles\";\n\n// -------------------- INTERFACES -------------------- //\n\ninterface Workshop {\n  id: number;\n  Name: string;\n  Main_Image: string;\n  Subheading: string;\n  Short_description: string;\n  Slug: string;\n  Age_range: string;\n  Price_Description: string;\n  Schedule_Description: string;\n  Financial_Aid_Description: string;\n  Accessibility_Description: string;\n  Workshop_Overview_Description: string;\n  Success_Page_Message: string;\n  Color_Theme: number;\n  Parent_Program: number;\n}\n\ninterface Subscription {\n  id: number;\n  status: string;\n  subscription_type: string;\n  program: number;\n  workshop: number;\n  pending_students: boolean;\n  coupon: string;\n  deposit_amount: number;\n  start_date: number | null;\n  next_charge_date: number | null;\n  next_charge_amount: number;\n  next_invoice_id: string | null;\n  stripe_subscription_id: string;\n  user_id: number;\n  contact_id: number;\n  sale_id: number;\n  cancellation_reason: string;\n  created_at: number;\n}\n\ninterface Session {\n  id: number;\n  status: string;\n  subscription_type: string;\n  program: number;\n  workshop: number;\n  session: number;\n  subscription_id: number;\n  price_id: string;\n  user_id: number;\n  student_profile_id: number;\n  cancellation_reason: string;\n  created_at: number;\n  session_details?: {\n    id: number;\n    Name: string;\n    Weekday: string;\n    Time_block: string;\n    Start_Date: string | null;\n    End_Date: string | null;\n    Location: number;\n    location_details?: {\n      id: number;\n      Name: string;\n      Address_line_1: string;\n      City_state_zip: string;\n    };\n  };\n}\n\ninterface Program {\n  id: number;\n  name: string;\n  Main_Image: string;\n  Subheading: string;\n  Short_description: string;\n  \"1st_Semester_Start_Date\"?: number;\n  \"2nd_Semester_Charge_Date\"?: number;\n  \"Subscription_Pause_Date\"?: number;\n}\n\ninterface WorkshopApiResponse {\n  program: Program;\n  workshop: Workshop | null;\n  subscription: Subscription;\n  sessions: Session[];\n  caregiver: boolean;\n}\n\n// -------------------- API FETCH -------------------- //\n\nexport async function fetchWorkshopDetails(\n  programId: string,\n  workshopId?: string,\n  subscriptionId?: string\n): Promise<WorkshopApiResponse | undefined> {\n  try {\n    const params: Record<string, string> = { program: programId };\n    if (workshopId)     params.workshop_id     = workshopId;\n    if (subscriptionId) params.subscription_id = subscriptionId;\n\n    return await apiClient\n      .get<WorkshopApiResponse>(\n        `/dashboard/registration/workshop/${workshopId || \"none\"}`,\n        { data: params }\n      )\n      .fetch();\n  } catch (error: any) {\n    console.error(\"Fetch Workshop Details Error:\", error);\n    alert(\n      error?.response?.data?.message || error.message || \"Unexpected error\"\n    );\n    window.history.back();\n    return undefined;\n  }\n}\n\n// -------------------- PAGE INIT -------------------- //\n\nexport async function initializeWorkshopDetailsPage() {\n  const params         = new URLSearchParams(window.location.search);\n  const programId      = params.get(\"program\");\n  const workshopId     = params.get(\"workshop\") || undefined;\n  const subscriptionId = params.get(\"subscription\") || undefined;\n\n  if (!programId) {\n    alert(\"Invalid access. Missing program parameter.\");\n    window.history.back();\n    return;\n  }\n\n  initializeDynamicWorkshopFileList(\"#filesList\");\n\n  const apiResponse = await fetchWorkshopDetails(\n    programId,\n    workshopId,\n    subscriptionId\n  );\n  if (!apiResponse) return;\n\n  const { workshop, subscription, program, sessions, caregiver } = apiResponse;\n\n  // Update details\n  if (workshop) updateWorkshopDetails(workshop, program);\n  else         updateWorkshopDetailsFallback(program);\n\n  updateProgramBreadcrumb(program);\n\n  // Sessions\n  const uniqueSessions = getUniqueSessions(sessions);\n  initializeDynamicSessionList(\n    \"#listRegistration\",\n    uniqueSessions,\n    subscription\n  );\n\n  // Caregiver breadcrumbs\n  handleBreadcrumbs(caregiver, subscription);\n\n  triggerSuccessEvent(\".success_trigger\");\n}\n\n// -------------------- UPDATERS -------------------- //\n\nfunction updateWorkshopDetails(workshop: Workshop, program: Program) {\n  const imgEl = document.getElementById(\"workshopImage\");\n  if (imgEl) {\n    const img = new WFImage(imgEl);\n    img.setImage(workshop.Main_Image || program.Main_Image);\n    (img.getElement() as HTMLImageElement).alt = workshop.Name;\n  }\n  [\n    [\"workshopName\", workshop.Name],\n    [\"workshopBreadcrumb\", workshop.Name],\n    [\"programName\", program.name],\n    [\"workshopShortDescription\", workshop.Short_description],\n  ].forEach(([id, text]) => {\n    const el = document.getElementById(id);\n    if (el) new WFComponent(el).setText(text as string);\n  });\n}\n\nfunction updateWorkshopDetailsFallback(program: Program) {\n  const imgEl = document.getElementById(\"workshopImage\");\n  if (imgEl) new WFImage(imgEl).setImage(program.Main_Image);\n  const nameEl = document.getElementById(\"workshopName\");\n  if (nameEl) new WFComponent(nameEl).setText(program.name);\n  const progEl = document.getElementById(\"programName\");\n  if (progEl) new WFComponent(progEl).setText(program.Subheading || program.name);\n  const bcEl = document.getElementById(\"workshopBreadcrumb\");\n  if (bcEl) new WFComponent(bcEl).setText(program.name);\n  const descEl = document.getElementById(\"workshopShortDescription\");\n  if (descEl) new WFComponent(descEl).setText(program.Short_description);\n}\n\nfunction updateProgramBreadcrumb(program: Program) {\n  const el = document.getElementById(\"programBreadcrumb\");\n  if (!el) return;\n  const comp = new WFComponent(el);\n  comp.setText(program.name);\n  const url = new URL(el.getAttribute(\"href\") || \"#\", window.location.origin);\n  url.searchParams.set(\"program\", program.id.toString());\n  comp.setAttribute(\"href\", url.toString());\n}\n\n// -------------------- SESSIONS LIST -------------------- //\n\nfunction getUniqueSessions(sessions: Session[]): Session[] {\n  const map: Record<number, Session> = {};\n  sessions.forEach((s) => {\n    if (!map[s.session]) map[s.session] = s;\n  });\n  return Object.values(map);\n}\n\nasync function initializeDynamicSessionList(\n  container: string,\n  sessions: Session[],\n  subscription: Subscription\n) {\n  const list = new WFDynamicList<Session>(container, {\n    rowSelector:   \"#listRegistrationCard\",\n    loaderSelector:\"#listRegistrationloading\",\n    emptySelector: \"#listRegistrationEmpty\",\n  });\n  list.loaderRenderer((loader) => {\n    loader.setStyle({ display: \"flex\" });\n    return loader;\n  });\n  list.emptyRenderer((empty) => {\n    empty.setStyle({ display: \"flex\" });\n    return empty;\n  });\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const card = new WFComponent(rowElement);\n    const sd   = rowData.session_details;\n    card\n      .getChildAsComponent<HTMLDivElement>(\"#cardSessionDay\")\n      .setText(sd?.Weekday || `Session #${rowData.session}`);\n    card\n      .getChildAsComponent<HTMLDivElement>(\"#cardSessionTimeBlock\")\n      .setText(sd?.Time_block || \"N/A\");\n    card\n      .getChildAsComponent<HTMLDivElement>(\"#cardSessionLocation\")\n      .setText(sd?.location_details?.Name || \"N/A\");\n\n    const anchor = card.getElement() as HTMLAnchorElement;\n    const url = new URL(\"/dashboard/registration/session\", window.location.origin);\n    // include program, workshop & subscription IDs\n    url.searchParams.set(\"program\",      subscription.program.toString());\n    url.searchParams.set(\"workshop\",     subscription.workshop.toString());\n    url.searchParams.set(\"subscription\", subscription.id.toString());\n    url.searchParams.set(\"session\",      rowData.session.toString());\n    anchor.setAttribute(\"href\", url.toString());\n\n    rowElement.setStyle({ display: \"block\" });\n    return rowElement;\n  });\n  list.changeLoadingStatus(true);\n  list.setData(sessions);\n  list.changeLoadingStatus(false);\n}\n\n// -------------------- CAREGIVER BREADCRUMBS -------------------- //\n\ninterface CaregiverBreadcrumbs {\n  student_id: number;\n  student_name: string;\n  workshop_name: string;\n  workshop_id: string;\n  program_name: string;\n  program_id: string;\n  subscription_id: number;\n  session_id?: string;\n  session_weekday?: string;\n  session_time_block?: string;\n}\n\nfunction handleBreadcrumbs(caregiver: boolean, subscription: Subscription) {\n  const userList = document.getElementById(\"userBreadcrumbList\");\n  const careList = document.getElementById(\"caregiverBreadcrumbList\");\n  if (caregiver) {\n    userList?.setAttribute(\"style\", \"display:none\");\n    careList?.setAttribute(\"style\", \"display:flex\");\n    const bc = localStorage.getItem(\"caregiver_breadcrumbs\");\n    if (bc) {\n      try {\n        const obj = JSON.parse(bc) as CaregiverBreadcrumbs;\n        const stud = document.getElementById(\"studentBreadcrumb\");\n        if (stud) {\n          const comp = new WFComponent(stud);\n          comp.setText(obj.student_name);\n          const url = new URL(\n            stud.getAttribute(\"href\") || \"/dashboard/student/profile\",\n            window.location.origin\n          );\n          url.searchParams.set(\"id\", obj.student_id.toString());\n          comp.setAttribute(\"href\", url.toString());\n        }\n        const wbc = document.getElementById(\"workshopBreadcrumbCaregiver\");\n        if (wbc) new WFComponent(wbc).setText(obj.workshop_name || obj.program_name);\n      } catch {}\n    }\n  } else {\n    userList?.setAttribute(\"style\", \"display:flex\");\n    careList?.setAttribute(\"style\", \"display:none\");\n  }\n}\n\n// -------------------- SUCCESS TRIGGER -------------------- //\n\nfunction triggerSuccessEvent(selector: string) {\n  const el = document.querySelector(selector);\n  if (el instanceof HTMLElement) el.click();\n}\n","var t=require(\"@xatom/core\");var e,r,s,i,o,n,u={};e=u,r=\"WFImage\",s=()=>c,Object.defineProperty(e,r,{get:s,set:i,enumerable:!0,configurable:!0});class c extends t.WFComponent{constructor(t){super(t)}getImageConfig(){return this._config}getSrc(){return this.getAttribute(\"src\")}getSizes(){return this.getAttribute(\"sizes\")}getSrcSet(){return this.getAttribute(\"srcset\")}getLoading(){return this.getAttribute(\"loading\")}onLoad(t){return this.on(\"load\",t),()=>{this.off(\"load\",t)}}onLoadError(t){return this.on(\"error\",t),()=>{this.off(\"error\",t)}}setImage(t){if(\"string\"==typeof t)this.setAttribute(\"src\",t),this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");else{if(this.setAttribute(\"src\",t.src),\"object\"==typeof t&&t.srcSet&&t.srcSet.length&&t.sizes&&t.sizes.length){const e=t.srcSet.map((t=>`${t.url} ${t.size}`)).join(\", \");this.setAttribute(\"srcset\",e)}else this.removeAttribute(\"srcset\"),this.removeAttribute(\"sizes\");t.loading&&this.setAttribute(\"loading\",t.loading)}}}o=module.exports,n=u,Object.keys(n).forEach((function(t){\"default\"===t||\"__esModule\"===t||o.hasOwnProperty(t)||Object.defineProperty(o,t,{enumerable:!0,get:function(){return n[t]}})}));","// src/pages/listStudentFiles.ts\n\nimport { WFDynamicList, WFComponent } from \"@xatom/core\";\nimport { apiClient } from \"../../../../api/apiConfig\";\n\n// Define the FileItem interface based on the API response\ninterface FileItem {\n  id: number;\n  file_name: string;\n  file_url: string;\n  program_id?: string | null;\n  workshop_id?: string | null;\n  session_id?: string | null;\n  user_id: number;\n  created_at: number;\n}\n\n// Function to get the workshop_id from URL parameters\nfunction getWorkshopIdFromUrl(): string | null {\n  return new URLSearchParams(window.location.search).get(\"workshop\");\n}\n\n// Function to get the subscription from URL parameters\nfunction getSubscriptionFromUrl(): string | null {\n  return new URLSearchParams(window.location.search).get(\"subscription\");\n}\n\n// Function to fetch files for a specific workshop (+ optional subscription)\nexport async function fetchWorkshopFiles(\n  workshopId: string,\n  subscriptionId?: string\n): Promise<FileItem[]> {\n  try {\n    const path = subscriptionId\n      ? `/student_files/workshop/${workshopId}?subscription=${encodeURIComponent(subscriptionId)}`\n      : `/student_files/workshop/${workshopId}`;\n\n    const getFiles = apiClient.get<FileItem[]>(path);\n    const response = await getFiles.fetch();\n    return response;\n  } catch (error) {\n    console.error(\"Error fetching files for workshop:\", error);\n    throw error;\n  }\n}\n\n// Function to initialize and render the dynamic file list for a workshop\nexport async function initializeDynamicWorkshopFileList(\n  containerSelector: string\n) {\n  // Get the workshop ID from the URL\n  const workshopId = getWorkshopIdFromUrl();\n  if (!workshopId) {\n    console.error(\"No workshop ID provided in URL\");\n    return;\n  }\n  // Get optional subscription ID\n  const subscriptionId = getSubscriptionFromUrl();\n\n  // Initialize a new instance of WFDynamicList for Files\n  const list = new WFDynamicList<FileItem>(containerSelector, {\n    rowSelector: \"#fileCard\",\n    loaderSelector: \"#filesloading\",\n    emptySelector: \"#filesEmpty\",\n  });\n\n  // Customize loader\n  list.loaderRenderer(el => {\n    el.setStyle({ display: \"flex\" });\n    return el;\n  });\n\n  // Customize empty state\n  list.emptyRenderer(el => {\n    el.setStyle({ display: \"flex\" });\n    return el;\n  });\n\n  // Customize each row\n  list.rowRenderer(({ rowData, rowElement }) => {\n    const fileCard = new WFComponent(rowElement);\n    fileCard.setAttribute(\"href\", rowData.file_url);\n    fileCard.getChildAsComponent(\"#fileName\").setText(rowData.file_name);\n    rowElement.setStyle({ display: \"block\" });\n    return rowElement;\n  });\n\n  // Load & render\n  try {\n    list.changeLoadingStatus(true);\n    const files = await fetchWorkshopFiles(workshopId, subscriptionId);\n    files.sort((a, b) => a.file_name.localeCompare(b.file_name));\n    list.setData(files);\n  } catch (error) {\n    console.error(\"Error loading files:\", error);\n    list.setData([]);\n  } finally {\n    list.changeLoadingStatus(false);\n  }\n}\n"],"names":[],"version":3,"file":"workshopDetails.dcf5c3cd.js.map","sourceRoot":"../"}